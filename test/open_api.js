/* 
 * LTApi v2.0-beta
 * Made by Level Travel (https://level.travel)
 * Including:
 * RSVP.js    jQuery    Handlebars.js
 * Moment.js  Sugar.js  Pikaday.js fork (https://github.com/nicholasrq/Pikaday)
 **/
(function(){var a=[].slice;this.LevelTravelAPI=function(){function b(){this.setup()}var c,d,e,f,g;return g=function(){var b,c;return b=1<=arguments.length?a.call(arguments,0):[],(c=LTApi.Utils).merge.apply(c,b)},d={xhr:1,jsonp:2},c={1:"json",2:"js"},f={development:{public_host:"leveltravel.dev",api_host:"api.leveltravel.dev",assets_host:"api.leveltravel.dev",assets_path:"/js/{version}/assets"},local:{port:"8000",public_host:"leveltravel.dev",api_host:"api.leveltravel.dev",assets_host:"localhost",assets_path:"/lt_api/assets"},mobile_package:{public_host:"level.travel",api_host:"api.level.travel",assets_host:"api.level.travel",assets_path:"/js/{version}/assets"},production:{public_host:"level.travel",api_host:"api.level.travel",assets_host:"api.level.travel",assets_path:"/js/{version}/assets"}},e={api_key:null,env:"production",scheme:null,assets_path:null,interaction:d.jsonp,min_jq_version:"1.7.1",actual_jq_version:"1.9.1",globalize_jquery:!1,is_admin:!1,cookie:{location_global:"lt_departure_city",location_widget:"lt_departure_code"}},b.prototype.setup=function(a,b){var f,h,i,j,k,l,m,n,o,p;return j=this.environment_config(null!=a?a.env:void 0),a=g(!0,{},e,a),k=g(!0,{},j,b),p=null!=(o=a.scheme)?o:this.get_scheme(),m=/https/.test(p)?443:80,h=LTApi.Utils.assign(k.assets_path,{version:LTApi.VERSION.build}),l=this.create_url({host:k.public_host}),n=this.create_url({host:k.public_host}),i=this.create_url({host:k.assets_host,path:h,scheme:p,port:k.port}),f=this.create_url({host:k.api_host,scheme:p}),LTApi.Utils.CONFIG=g(a,{external_url:l,public_url:n,assets_url:i,api_url:f,scheme:p},{url:function(a){return this[a+"_url"]},data_type:function(){return c[this.interaction]},interaction_match:function(a){return this.interaction===d[a]},environment:k})},b.prototype.create_url=function(a){var b,c,d,e;return e=LTApi.URI("").resource("").port(null!=(d=a.port)?d:"").hostname(a.host).pathname(null!=(c=a.path)?c:"/").protocol(null!=(b=a.scheme)?b:"https"),e.toString()},b.prototype.get_scheme=function(){var a;return a=location.protocol.replace(":",""),"http"!==a&&"https"!==a?"https":a},b.prototype.environment_config=function(a){var b,c;return this.env=a||e.env,b=null!=(c=f[this.env])?c:f[e.env]},b.prototype.cfg=function(){var b,c;return b=1<=arguments.length?a.call(arguments,0):[],(c=this.Utils).cfg.apply(c,b)},Object.defineProperty(b.prototype,"INTERACTION",{get:function(){return d}}),Object.defineProperty(b.prototype,"DATA_TYPES",{get:function(){return c}}),b}(),window.LTApi={Modules:{},JqueryExtensions:{},Instances:{client:{}},Utils:{cfg:function(){var b,c,d,e,f,g,h,i;if(h=arguments[0],b=2<=arguments.length?a.call(arguments,1):[],null!=h){try{c=new Function("obj","return obj."+h),d=c(this.CONFIG);try{i=d.apply(this.CONFIG,b)}catch(f){e=f,i=d}}catch(g){e=g,i=void 0}return i}return this.merge({},this.CONFIG)}}}}).call(this),LTApi.VERSION={build:"2.0-beta",version:"3.0.0"},function(){LTApi.JqueryExtensions.easing={easeOutExpo:function(a,b,c,d,e){var f;return null!=(f=b===e)?f:c+{c:d*(-Math.pow(2,-10*b/e)+1)+c}}}}.call(this),function(){LTApi.JqueryExtensions.expr={":":{invisible:function(a){var b,c,d,e;return b=LTApi.Utils.$(a),e="0"===b.css("opacity"),d="hidden"===b.css("visibility"),c="none"===b.css("display"),e||d||c},relative:function(a){var b;return b=LTApi.Utils.$(a),"relative"===b.css("position")}}}}.call(this),function(){var a=[].slice;LTApi.JqueryExtensions.fn={selection:function(){var b,c,d,e,f;return b=1<=arguments.length?a.call(arguments,0):[],b.length?(e=b.map(function(a){return null!=a?Number(a):null}),f=e[0],c=e[1],this.each(function(){var a,b,d;return b=null!=f?f:this.selectionStart,a=null!=(d=null!=c?c:f)?d:this.selectionEnd,this.selectionStart=b,this.selectionEnd=a})):(d=this.get(0),{start:d.selectionStart,end:d.selectionEnd})}}}.call(this),function(a,b){"use strict";"object"==typeof exports?module.exports=b(require("./punycode"),require("./IPv6"),require("./SecondLevelDomains")):"function"==typeof define&&define.amd?define(["./punycode","./IPv6","./SecondLevelDomains"],b):a.URI=b(a.punycode,a.IPv6,a.SecondLevelDomains,a)}(LTApi,function(a,b,c,d){"use strict";function e(a,b){return this instanceof e?(void 0===a&&(a="undefined"!=typeof location?location.href+"":""),this.href(a),void 0!==b?this.absoluteTo(b):this):new e(a,b)}function f(a){return a.replace(/([.*+?^=!:${}()|[\]\/\\])/g,"\\$1")}function g(a){return void 0===a?"Undefined":String(Object.prototype.toString.call(a)).slice(8,-1)}function h(a){return"Array"===g(a)}function i(a,b){var c,d,e={};if(h(b))for(c=0,d=b.length;d>c;c++)e[b[c]]=!0;else e[b]=!0;for(c=0,d=a.length;d>c;c++)void 0!==e[a[c]]&&(a.splice(c,1),d--,c--);return a}function j(a,b){var c,d;if(h(b)){for(c=0,d=b.length;d>c;c++)if(!j(a,b[c]))return!1;return!0}var e=g(b);for(c=0,d=a.length;d>c;c++)if("RegExp"===e){if("string"==typeof a[c]&&a[c].match(b))return!0}else if(a[c]===b)return!0;return!1}function k(a,b){if(!h(a)||!h(b))return!1;if(a.length!==b.length)return!1;a.sort(),b.sort();for(var c=0,d=a.length;d>c;c++)if(a[c]!==b[c])return!1;return!0}function l(a){return escape(a)}function m(a){return encodeURIComponent(a).replace(/[!'()*]/g,l).replace(/\*/g,"%2A")}function n(a){return function(b,c){return void 0===b?this._parts[a]||"":(this._parts[a]=b||null,this.build(!c),this)}}function o(a,b){return function(c,d){return void 0===c?this._parts[a]||"":(null!==c&&(c+="",c.charAt(0)===b&&(c=c.substring(1))),this._parts[a]=c,this.build(!d),this)}}var p=d&&d.URI;e.version="1.14.1";var q=e.prototype,r=Object.prototype.hasOwnProperty;e._parts=function(){return{protocol:null,username:null,password:null,hostname:null,urn:null,port:null,path:null,query:null,fragment:null,duplicateQueryParameters:e.duplicateQueryParameters,escapeQuerySpace:e.escapeQuerySpace}},e.duplicateQueryParameters=!1,e.escapeQuerySpace=!0,e.protocol_expression=/^[a-z][a-z0-9.+-]*$/i,e.idn_expression=/[^a-z0-9\.-]/i,e.punycode_expression=/(xn--)/i,e.ip4_expression=/^\d{1,3}\.\d{1,3}\.\d{1,3}\.\d{1,3}$/,e.ip6_expression=/^\s*((([0-9A-Fa-f]{1,4}:){7}([0-9A-Fa-f]{1,4}|:))|(([0-9A-Fa-f]{1,4}:){6}(:[0-9A-Fa-f]{1,4}|((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){5}(((:[0-9A-Fa-f]{1,4}){1,2})|:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3})|:))|(([0-9A-Fa-f]{1,4}:){4}(((:[0-9A-Fa-f]{1,4}){1,3})|((:[0-9A-Fa-f]{1,4})?:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){3}(((:[0-9A-Fa-f]{1,4}){1,4})|((:[0-9A-Fa-f]{1,4}){0,2}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){2}(((:[0-9A-Fa-f]{1,4}){1,5})|((:[0-9A-Fa-f]{1,4}){0,3}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(([0-9A-Fa-f]{1,4}:){1}(((:[0-9A-Fa-f]{1,4}){1,6})|((:[0-9A-Fa-f]{1,4}){0,4}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:))|(:(((:[0-9A-Fa-f]{1,4}){1,7})|((:[0-9A-Fa-f]{1,4}){0,5}:((25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)(\.(25[0-5]|2[0-4]\d|1\d\d|[1-9]?\d)){3}))|:)))(%.+)?\s*$/,e.find_uri_expression=/\b((?:[a-z][\w-]+:(?:\/{1,3}|[a-z0-9%])|www\d{0,3}[.]|[a-z0-9.\-]+[.][a-z]{2,4}\/)(?:[^\s()<>]+|\(([^\s()<>]+|(\([^\s()<>]+\)))*\))+(?:\(([^\s()<>]+|(\([^\s()<>]+\)))*\)|[^\s`!()\[\]{};:'".,<>?«»“”‘’]))/gi,e.findUri={start:/\b(?:([a-z][a-z0-9.+-]*:\/\/)|www\.)/gi,end:/[\s\r\n]|$/,trim:/[`!()\[\]{};:'".,<>?«»“”„‘’]+$/},e.defaultPorts={http:"80",https:"443",ftp:"21",gopher:"70",ws:"80",wss:"443"},e.invalid_hostname_characters=/[^a-zA-Z0-9\.-]/,e.domAttributes={a:"href",blockquote:"cite",link:"href",base:"href",script:"src",form:"action",img:"src",area:"href",iframe:"src",embed:"src",source:"src",track:"src",input:"src",audio:"src",video:"src"},e.getDomAttribute=function(a){if(!a||!a.nodeName)return void 0;var b=a.nodeName.toLowerCase();return"input"===b&&"image"!==a.type?void 0:e.domAttributes[b]},e.encode=m,e.decode=decodeURIComponent,e.iso8859=function(){e.encode=escape,e.decode=unescape},e.unicode=function(){e.encode=m,e.decode=decodeURIComponent},e.characters={pathname:{encode:{expression:/%(24|26|2B|2C|3B|3D|3A|40)/gi,map:{"%24":"$","%26":"&","%2B":"+","%2C":",","%3B":";","%3D":"=","%3A":":","%40":"@"}},decode:{expression:/[\/\?#]/g,map:{"/":"%2F","?":"%3F","#":"%23"}}},reserved:{encode:{expression:/%(21|23|24|26|27|28|29|2A|2B|2C|2F|3A|3B|3D|3F|40|5B|5D)/gi,map:{"%3A":":","%2F":"/","%3F":"?","%23":"#","%5B":"[","%5D":"]","%40":"@","%21":"!","%24":"$","%26":"&","%27":"'","%28":"(","%29":")","%2A":"*","%2B":"+","%2C":",","%3B":";","%3D":"="}}}},e.encodeQuery=function(a,b){var c=e.encode(a+"");return void 0===b&&(b=e.escapeQuerySpace),b?c.replace(/%20/g,"+"):c},e.decodeQuery=function(a,b){a+="",void 0===b&&(b=e.escapeQuerySpace);try{return e.decode(b?a.replace(/\+/g,"%20"):a)}catch(c){return a}},e.recodePath=function(a){for(var b=(a+"").split("/"),c=0,d=b.length;d>c;c++)b[c]=e.encodePathSegment(e.decode(b[c]));return b.join("/")},e.decodePath=function(a){for(var b=(a+"").split("/"),c=0,d=b.length;d>c;c++)b[c]=e.decodePathSegment(b[c]);return b.join("/")};var s,t={encode:"encode",decode:"decode"},u=function(a,b){return function(c){try{return e[b](c+"").replace(e.characters[a][b].expression,function(c){return e.characters[a][b].map[c]})}catch(d){return c}}};for(s in t)e[s+"PathSegment"]=u("pathname",t[s]);e.encodeReserved=u("reserved","encode"),e.parse=function(a,b){var c;return b||(b={}),c=a.indexOf("#"),c>-1&&(b.fragment=a.substring(c+1)||null,a=a.substring(0,c)),c=a.indexOf("?"),c>-1&&(b.query=a.substring(c+1)||null,a=a.substring(0,c)),"//"===a.substring(0,2)?(b.protocol=null,a=a.substring(2),a=e.parseAuthority(a,b)):(c=a.indexOf(":"),c>-1&&(b.protocol=a.substring(0,c)||null,b.protocol&&!b.protocol.match(e.protocol_expression)?b.protocol=void 0:"//"===a.substring(c+1,c+3)?(a=a.substring(c+3),a=e.parseAuthority(a,b)):(a=a.substring(c+1),b.urn=!0))),b.path=a,b},e.parseHost=function(a,b){var c,d,e=a.indexOf("/");return-1===e&&(e=a.length),"["===a.charAt(0)?(c=a.indexOf("]"),b.hostname=a.substring(1,c)||null,b.port=a.substring(c+2,e)||null,"/"===b.port&&(b.port=null)):a.indexOf(":")!==a.lastIndexOf(":")?(b.hostname=a.substring(0,e)||null,b.port=null):(d=a.substring(0,e).split(":"),b.hostname=d[0]||null,b.port=d[1]||null),b.hostname&&"/"!==a.substring(e).charAt(0)&&(e++,a="/"+a),a.substring(e)||"/"},e.parseAuthority=function(a,b){return a=e.parseUserinfo(a,b),e.parseHost(a,b)},e.parseUserinfo=function(a,b){var c,d=a.indexOf("/"),f=a.lastIndexOf("@",d>-1?d:a.length-1);return f>-1&&(-1===d||d>f)?(c=a.substring(0,f).split(":"),b.username=c[0]?e.decode(c[0]):null,c.shift(),b.password=c[0]?e.decode(c.join(":")):null,a=a.substring(f+1)):(b.username=null,b.password=null),a},e.parseQuery=function(a,b){if(!a)return{};if(a=a.replace(/&+/g,"&").replace(/^\?*&*|&+$/g,""),!a)return{};for(var c,d,f,g={},h=a.split("&"),i=h.length,j=0;i>j;j++)c=h[j].split("="),d=e.decodeQuery(c.shift(),b),f=c.length?e.decodeQuery(c.join("="),b):null,r.call(g,d)?("string"==typeof g[d]&&(g[d]=[g[d]]),g[d].push(f)):g[d]=f;return g},e.build=function(a){var b="";return a.protocol&&(b+=a.protocol+":"),a.urn||!b&&!a.hostname||(b+="//"),b+=e.buildAuthority(a)||"","string"==typeof a.path&&("/"!==a.path.charAt(0)&&"string"==typeof a.hostname&&(b+="/"),b+=a.path),"string"==typeof a.query&&a.query&&(b+="?"+a.query),"string"==typeof a.fragment&&a.fragment&&(b+="#"+a.fragment),b},e.buildHost=function(a){var b="";return a.hostname?(b+=e.ip6_expression.test(a.hostname)?"["+a.hostname+"]":a.hostname,a.port&&(b+=":"+a.port),b):""},e.buildAuthority=function(a){return e.buildUserinfo(a)+e.buildHost(a)},e.buildUserinfo=function(a){var b="";return a.username&&(b+=e.encode(a.username),a.password&&(b+=":"+e.encode(a.password)),b+="@"),b},e.buildQuery=function(a,b,c){var d,f,g,i,j="";for(f in a)if(r.call(a,f)&&f)if(h(a[f]))for(d={},g=0,i=a[f].length;i>g;g++)void 0!==a[f][g]&&void 0===d[a[f][g]+""]&&(j+="&"+e.buildQueryParameter(f,a[f][g],c),b!==!0&&(d[a[f][g]+""]=!0));else void 0!==a[f]&&(j+="&"+e.buildQueryParameter(f,a[f],c));return j.substring(1)},e.buildQueryParameter=function(a,b,c){return e.encodeQuery(a,c)+(null!==b?"="+e.encodeQuery(b,c):"")},e.addQuery=function(a,b,c){if("object"==typeof b)for(var d in b)r.call(b,d)&&e.addQuery(a,d,b[d]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");if(void 0===a[b])return void(a[b]=c);"string"==typeof a[b]&&(a[b]=[a[b]]),h(c)||(c=[c]),a[b]=(a[b]||[]).concat(c)}},e.removeQuery=function(a,b,c){var d,f,g;if(h(b))for(d=0,f=b.length;f>d;d++)a[b[d]]=void 0;else if("object"==typeof b)for(g in b)r.call(b,g)&&e.removeQuery(a,g,b[g]);else{if("string"!=typeof b)throw new TypeError("URI.addQuery() accepts an object, string as the first parameter");void 0!==c?a[b]===c?a[b]=void 0:h(a[b])&&(a[b]=i(a[b],c)):a[b]=void 0}},e.hasQuery=function(a,b,c,d){if("object"==typeof b){for(var f in b)if(r.call(b,f)&&!e.hasQuery(a,f,b[f]))return!1;return!0}if("string"!=typeof b)throw new TypeError("URI.hasQuery() accepts an object, string as the name parameter");switch(g(c)){case"Undefined":return b in a;case"Boolean":var i=Boolean(h(a[b])?a[b].length:a[b]);return c===i;case"Function":return!!c(a[b],b,a);case"Array":if(!h(a[b]))return!1;var l=d?j:k;return l(a[b],c);case"RegExp":return h(a[b])?d?j(a[b],c):!1:Boolean(a[b]&&a[b].match(c));case"Number":c=String(c);case"String":return h(a[b])?d?j(a[b],c):!1:a[b]===c;default:throw new TypeError("URI.hasQuery() accepts undefined, boolean, string, number, RegExp, Function as the value parameter")}},e.commonPath=function(a,b){var c,d=Math.min(a.length,b.length);for(c=0;d>c;c++)if(a.charAt(c)!==b.charAt(c)){c--;break}return 1>c?a.charAt(0)===b.charAt(0)&&"/"===a.charAt(0)?"/":"":(("/"!==a.charAt(c)||"/"!==b.charAt(c))&&(c=a.substring(0,c).lastIndexOf("/")),a.substring(0,c+1))},e.withinString=function(a,b,c){c||(c={});var d=c.start||e.findUri.start,f=c.end||e.findUri.end,g=c.trim||e.findUri.trim,h=/[a-z0-9-]=["']?$/i;for(d.lastIndex=0;;){var i=d.exec(a);if(!i)break;var j=i.index;if(c.ignoreHtml){var k=a.slice(Math.max(j-3,0),j);if(k&&h.test(k))continue}var l=j+a.slice(j).search(f),m=a.slice(j,l).replace(g,"");if(!c.ignore||!c.ignore.test(m)){l=j+m.length;var n=b(m,j,l,a);a=a.slice(0,j)+n+a.slice(l),d.lastIndex=j+n.length}}return d.lastIndex=0,a},e.ensureValidHostname=function(b){if(b.match(e.invalid_hostname_characters)){if(!a)throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-] and Punycode.js is not available');if(a.toASCII(b).match(e.invalid_hostname_characters))throw new TypeError('Hostname "'+b+'" contains characters other than [A-Z0-9.-]')}},e.noConflict=function(a){if(a){var b={URI:this.noConflict()};return d.URITemplate&&"function"==typeof d.URITemplate.noConflict&&(b.URITemplate=d.URITemplate.noConflict()),d.IPv6&&"function"==typeof d.IPv6.noConflict&&(b.IPv6=d.IPv6.noConflict()),d.SecondLevelDomains&&"function"==typeof d.SecondLevelDomains.noConflict&&(b.SecondLevelDomains=d.SecondLevelDomains.noConflict()),b}return d.URI===this&&(d.URI=p),this},q.build=function(a){return a===!0?this._deferred_build=!0:(void 0===a||this._deferred_build)&&(this._string=e.build(this._parts),this._deferred_build=!1),this},q.clone=function(){return new e(this)},q.valueOf=q.toString=function(){return this.build(!1)._string},q.protocol=n("protocol"),q.username=n("username"),q.password=n("password"),q.hostname=n("hostname"),q.port=n("port"),q.query=o("query","?"),q.fragment=o("fragment","#"),q.search=function(a,b){var c=this.query(a,b);return"string"==typeof c&&c.length?"?"+c:c},q.hash=function(a,b){var c=this.fragment(a,b);return"string"==typeof c&&c.length?"#"+c:c},q.pathname=function(a,b){if(void 0===a||a===!0){var c=this._parts.path||(this._parts.hostname?"/":"");return a?e.decodePath(c):c}return this._parts.path=a?e.recodePath(a):"/",this.build(!b),this},q.path=q.pathname,q.href=function(a,b){var c;if(void 0===a)return this.toString();this._string="",this._parts=e._parts();var d=a instanceof e,f="object"==typeof a&&(a.hostname||a.path||a.pathname);if(a.nodeName){var g=e.getDomAttribute(a);a=a[g]||"",f=!1}if(!d&&f&&void 0!==a.pathname&&(a=a.toString()),"string"==typeof a||a instanceof String)this._parts=e.parse(String(a),this._parts);else{if(!d&&!f)throw new TypeError("invalid input");var h=d?a._parts:a;for(c in h)r.call(this._parts,c)&&(this._parts[c]=h[c])}return this.build(!b),this},q.is=function(a){var b=!1,d=!1,f=!1,g=!1,h=!1,i=!1,j=!1,k=!this._parts.urn;switch(this._parts.hostname&&(k=!1,d=e.ip4_expression.test(this._parts.hostname),f=e.ip6_expression.test(this._parts.hostname),b=d||f,g=!b,h=g&&c&&c.has(this._parts.hostname),i=g&&e.idn_expression.test(this._parts.hostname),j=g&&e.punycode_expression.test(this._parts.hostname)),a.toLowerCase()){case"relative":return k;case"absolute":return!k;case"domain":case"name":return g;case"sld":return h;case"ip":return b;case"ip4":case"ipv4":case"inet4":return d;case"ip6":case"ipv6":case"inet6":return f;case"idn":return i;case"url":return!this._parts.urn;case"urn":return!!this._parts.urn;case"punycode":return j}return null};var v=q.protocol,w=q.port,x=q.hostname;q.protocol=function(a,b){if(void 0!==a&&a&&(a=a.replace(/:(\/\/)?$/,""),!a.match(e.protocol_expression)))throw new TypeError('Protocol "'+a+"\" contains characters other than [A-Z0-9.+-] or doesn't start with [A-Z]");return v.call(this,a,b)},q.scheme=q.protocol,q.port=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a&&(0===a&&(a=null),a&&(a+="",":"===a.charAt(0)&&(a=a.substring(1)),a.match(/[^0-9]/))))throw new TypeError('Port "'+a+'" contains characters other than [0-9]');return w.call(this,a,b)},q.hostname=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0!==a){var c={};e.parseHost(a,c),a=c.hostname}return x.call(this,a,b)},q.host=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildHost(this._parts):"":(e.parseHost(a,this._parts),this.build(!b),this)},q.authority=function(a,b){return this._parts.urn?void 0===a?"":this:void 0===a?this._parts.hostname?e.buildAuthority(this._parts):"":(e.parseAuthority(a,this._parts),this.build(!b),this)},q.userinfo=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.username)return"";var c=e.buildUserinfo(this._parts);return c.substring(0,c.length-1)}return"@"!==a[a.length-1]&&(a+="@"),e.parseUserinfo(a,this._parts),this.build(!b),this},q.resource=function(a,b){var c;return void 0===a?this.path()+this.search()+this.hash():(c=e.parse(a),this._parts.path=c.path,this._parts.query=c.query,this._parts.fragment=c.fragment,this.build(!b),this)},q.subdomain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.length-this.domain().length-1;return this._parts.hostname.substring(0,c)||""}var d=this._parts.hostname.length-this.domain().length,g=this._parts.hostname.substring(0,d),h=new RegExp("^"+f(g));return a&&"."!==a.charAt(a.length-1)&&(a+="."),a&&e.ensureValidHostname(a),this._parts.hostname=this._parts.hostname.replace(h,a),this.build(!b),this},q.domain=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var c=this._parts.hostname.match(/\./g);if(c&&c.length<2)return this._parts.hostname;var d=this._parts.hostname.length-this.tld(b).length-1;return d=this._parts.hostname.lastIndexOf(".",d-1)+1,this._parts.hostname.substring(d)||""}if(!a)throw new TypeError("cannot set domain empty");if(e.ensureValidHostname(a),!this._parts.hostname||this.is("IP"))this._parts.hostname=a;else{var g=new RegExp(f(this.domain())+"$");this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!b),this},q.tld=function(a,b){if(this._parts.urn)return void 0===a?"":this;if("boolean"==typeof a&&(b=a,a=void 0),void 0===a){if(!this._parts.hostname||this.is("IP"))return"";var d=this._parts.hostname.lastIndexOf("."),e=this._parts.hostname.substring(d+1);return b!==!0&&c&&c.list[e.toLowerCase()]?c.get(this._parts.hostname)||e:e}var g;if(!a)throw new TypeError("cannot set TLD empty");if(a.match(/[^a-zA-Z0-9-]/)){if(!c||!c.is(a))throw new TypeError('TLD "'+a+'" contains characters other than [A-Z0-9]');g=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,a)}else{if(!this._parts.hostname||this.is("IP"))throw new ReferenceError("cannot set TLD on non-domain host");g=new RegExp(f(this.tld())+"$"),this._parts.hostname=this._parts.hostname.replace(g,a)}return this.build(!b),this},q.directory=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path&&!this._parts.hostname)return"";if("/"===this._parts.path)return"/";var c=this._parts.path.length-this.filename().length-1,d=this._parts.path.substring(0,c)||(this._parts.hostname?"/":"");return a?e.decodePath(d):d}var g=this._parts.path.length-this.filename().length,h=this._parts.path.substring(0,g),i=new RegExp("^"+f(h));return this.is("relative")||(a||(a="/"),"/"!==a.charAt(0)&&(a="/"+a)),a&&"/"!==a.charAt(a.length-1)&&(a+="/"),a=e.recodePath(a),this._parts.path=this._parts.path.replace(i,a),this.build(!b),this},q.filename=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path||"/"===this._parts.path)return"";var c=this._parts.path.lastIndexOf("/"),d=this._parts.path.substring(c+1);return a?e.decodePathSegment(d):d}var g=!1;"/"===a.charAt(0)&&(a=a.substring(1)),a.match(/\.?\//)&&(g=!0);var h=new RegExp(f(this.filename())+"$");return a=e.recodePath(a),this._parts.path=this._parts.path.replace(h,a),g?this.normalizePath(b):this.build(!b),this},q.suffix=function(a,b){if(this._parts.urn)return void 0===a?"":this;if(void 0===a||a===!0){if(!this._parts.path||"/"===this._parts.path)return"";var c,d,g=this.filename(),h=g.lastIndexOf(".");return-1===h?"":(c=g.substring(h+1),d=/^[a-z0-9%]+$/i.test(c)?c:"",a?e.decodePathSegment(d):d)}"."===a.charAt(0)&&(a=a.substring(1));var i,j=this.suffix();if(j)i=a?new RegExp(f(j)+"$"):new RegExp(f("."+j)+"$");else{if(!a)return this;this._parts.path+="."+e.recodePath(a)}return i&&(a=e.recodePath(a),this._parts.path=this._parts.path.replace(i,a)),this.build(!b),this},q.segment=function(a,b,c){var d=this._parts.urn?":":"/",e=this.path(),f="/"===e.substring(0,1),g=e.split(d);if(void 0!==a&&"number"!=typeof a&&(c=b,b=a,a=void 0),void 0!==a&&"number"!=typeof a)throw new Error('Bad segment "'+a+'", must be 0-based integer');if(f&&g.shift(),0>a&&(a=Math.max(g.length+a,0)),void 0===b)return void 0===a?g:g[a];if(null===a||void 0===g[a])if(h(b)){g=[];for(var i=0,j=b.length;j>i;i++)(b[i].length||g.length&&g[g.length-1].length)&&(g.length&&!g[g.length-1].length&&g.pop(),g.push(b[i]))}else(b||"string"==typeof b)&&(""===g[g.length-1]?g[g.length-1]=b:g.push(b));else b?g[a]=b:g.splice(a,1);return f&&g.unshift(""),this.path(g.join(d),c)},q.segmentCoded=function(a,b,c){var d,f,g;if("number"!=typeof a&&(c=b,b=a,a=void 0),void 0===b){if(d=this.segment(a,b,c),h(d))for(f=0,g=d.length;g>f;f++)d[f]=e.decode(d[f]);else d=void 0!==d?e.decode(d):void 0;return d}if(h(b))for(f=0,g=b.length;g>f;f++)b[f]=e.decode(b[f]);else b="string"==typeof b||b instanceof String?e.encode(b):b;return this.segment(a,b,c)};var y=q.query;return q.query=function(a,b){if(a===!0)return e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("function"==typeof a){var c=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace),d=a.call(this,c);return this._parts.query=e.buildQuery(d||c,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this}return void 0!==a&&"string"!=typeof a?(this._parts.query=e.buildQuery(a,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),this.build(!b),this):y.call(this,a,b)},q.setQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);if("string"==typeof a||a instanceof String)d[a]=void 0!==b?b:null;else{if("object"!=typeof a)throw new TypeError("URI.addQuery() accepts an object, string as the name parameter");for(var f in a)r.call(a,f)&&(d[f]=a[f])}return this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},q.addQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.addQuery(d,a,void 0===b?null:b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},q.removeQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.removeQuery(d,a,b),this._parts.query=e.buildQuery(d,this._parts.duplicateQueryParameters,this._parts.escapeQuerySpace),"string"!=typeof a&&(c=b),this.build(!c),this},q.hasQuery=function(a,b,c){var d=e.parseQuery(this._parts.query,this._parts.escapeQuerySpace);return e.hasQuery(d,a,b,c)},q.setSearch=q.setQuery,q.addSearch=q.addQuery,q.removeSearch=q.removeQuery,q.hasSearch=q.hasQuery,q.normalize=function(){return this._parts.urn?this.normalizeProtocol(!1).normalizeQuery(!1).normalizeFragment(!1).build():this.normalizeProtocol(!1).normalizeHostname(!1).normalizePort(!1).normalizePath(!1).normalizeQuery(!1).normalizeFragment(!1).build()},q.normalizeProtocol=function(a){return"string"==typeof this._parts.protocol&&(this._parts.protocol=this._parts.protocol.toLowerCase(),this.build(!a)),this},q.normalizeHostname=function(c){return this._parts.hostname&&(this.is("IDN")&&a?this._parts.hostname=a.toASCII(this._parts.hostname):this.is("IPv6")&&b&&(this._parts.hostname=b.best(this._parts.hostname)),this._parts.hostname=this._parts.hostname.toLowerCase(),this.build(!c)),this},q.normalizePort=function(a){return"string"==typeof this._parts.protocol&&this._parts.port===e.defaultPorts[this._parts.protocol]&&(this._parts.port=null,this.build(!a)),this},q.normalizePath=function(a){if(this._parts.urn)return this;if(!this._parts.path||"/"===this._parts.path)return this;var b,c,d,f=this._parts.path,g="";for("/"!==f.charAt(0)&&(b=!0,f="/"+f),f=f.replace(/(\/(\.\/)+)|(\/\.$)/g,"/").replace(/\/{2,}/g,"/"),b&&(g=f.substring(1).match(/^(\.\.\/)+/)||"",g&&(g=g[0]));;){if(c=f.indexOf("/.."),-1===c)break;0!==c?(d=f.substring(0,c).lastIndexOf("/"),-1===d&&(d=c),f=f.substring(0,d)+f.substring(c+3)):f=f.substring(3)}return b&&this.is("relative")&&(f=g+f.substring(1)),f=e.recodePath(f),this._parts.path=f,this.build(!a),this},q.normalizePathname=q.normalizePath,q.normalizeQuery=function(a){return"string"==typeof this._parts.query&&(this._parts.query.length?this.query(e.parseQuery(this._parts.query,this._parts.escapeQuerySpace)):this._parts.query=null,this.build(!a)),this},q.normalizeFragment=function(a){return this._parts.fragment||(this._parts.fragment=null,this.build(!a)),this},q.normalizeSearch=q.normalizeQuery,q.normalizeHash=q.normalizeFragment,q.iso8859=function(){var a=e.encode,b=e.decode;return e.encode=escape,e.decode=decodeURIComponent,this.normalize(),e.encode=a,e.decode=b,this},q.unicode=function(){var a=e.encode,b=e.decode;return e.encode=m,e.decode=unescape,this.normalize(),e.encode=a,e.decode=b,this},q.readable=function(){var b=this.clone();b.username("").password("").normalize();var c="";if(b._parts.protocol&&(c+=b._parts.protocol+"://"),b._parts.hostname&&(b.is("punycode")&&a?(c+=a.toUnicode(b._parts.hostname),b._parts.port&&(c+=":"+b._parts.port)):c+=b.host()),b._parts.hostname&&b._parts.path&&"/"!==b._parts.path.charAt(0)&&(c+="/"),c+=b.path(!0),b._parts.query){for(var d="",f=0,g=b._parts.query.split("&"),h=g.length;h>f;f++){var i=(g[f]||"").split("=");d+="&"+e.decodeQuery(i[0],this._parts.escapeQuerySpace).replace(/&/g,"%26"),void 0!==i[1]&&(d+="="+e.decodeQuery(i[1],this._parts.escapeQuerySpace).replace(/&/g,"%26"))}c+="?"+d.substring(1)}return c+=e.decodeQuery(b.hash(),!0)},q.absoluteTo=function(a){var b,c,d,f=this.clone(),g=["protocol","username","password","hostname","port"];if(this._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(a instanceof e||(a=new e(a)),f._parts.protocol||(f._parts.protocol=a._parts.protocol),this._parts.hostname)return f;for(c=0;d=g[c];c++)f._parts[d]=a._parts[d];return f._parts.path?".."===f._parts.path.substring(-2)&&(f._parts.path+="/"):(f._parts.path=a._parts.path,f._parts.query||(f._parts.query=a._parts.query)),"/"!==f.path().charAt(0)&&(b=a.directory(),f._parts.path=(b?b+"/":"")+f._parts.path,f.normalizePath()),f.build(),f},q.relativeTo=function(a){var b,c,d,f,g,h=this.clone().normalize();if(h._parts.urn)throw new Error("URNs do not have any generally defined hierarchical components");if(a=new e(a).normalize(),b=h._parts,c=a._parts,f=h.path(),g=a.path(),"/"!==f.charAt(0))throw new Error("URI is already relative");if("/"!==g.charAt(0))throw new Error("Cannot calculate a URI relative to another relative URI");if(b.protocol===c.protocol&&(b.protocol=null),b.username!==c.username||b.password!==c.password)return h.build();if(null!==b.protocol||null!==b.username||null!==b.password)return h.build();if(b.hostname!==c.hostname||b.port!==c.port)return h.build();if(b.hostname=null,b.port=null,f===g)return b.path="",h.build();if(d=e.commonPath(h.path(),a.path()),!d)return h.build();var i=c.path.substring(d.length).replace(/[^\/]*$/,"").replace(/.*?\//g,"../");return b.path=i+b.path.substring(d.length),h.build()},q.equals=function(a){var b,c,d,f=this.clone(),g=new e(a),i={},j={},l={};if(f.normalize(),g.normalize(),f.toString()===g.toString())return!0;if(b=f.query(),c=g.query(),f.query(""),g.query(""),f.toString()!==g.toString())return!1;if(b.length!==c.length)return!1;i=e.parseQuery(b,this._parts.escapeQuerySpace),j=e.parseQuery(c,this._parts.escapeQuerySpace);for(d in i)if(r.call(i,d)){if(h(i[d])){if(!k(i[d],j[d]))return!1}else if(i[d]!==j[d])return!1;l[d]=!0}for(d in j)if(r.call(j,d)&&!l[d])return!1;return!0},q.duplicateQueryParameters=function(a){return this._parts.duplicateQueryParameters=!!a,this},q.escapeQuerySpace=function(a){return this._parts.escapeQuerySpace=!!a,this},e}),function(a){var b,c,d,e;!function(){var a={},f={};b=function(b,c,d){a[b]={deps:c,callback:d}},e=d=c=function(b){function d(a){if("."!==a.charAt(0))return a;for(var c=a.split("/"),d=b.split("/").slice(0,-1),e=0,f=c.length;f>e;e++){var g=c[e];if(".."===g)d.pop();else{if("."===g)continue;d.push(g)}}return d.join("/")}if(e._eak_seen=a,f[b])return f[b];if(f[b]={},!a[b])throw new Error("Could not find module "+b);for(var g,h=a[b],i=h.deps,j=h.callback,k=[],l=0,m=i.length;m>l;l++)"exports"===i[l]?k.push(g={}):k.push(c(d(i[l])));var n=j.apply(this,k);return f[b]=g||n}}(),b("rsvp/all",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.all(a,b)}}),b("rsvp/all_settled",["./promise","./utils","exports"],function(a,b,c){"use strict";function d(a){return{state:"fulfilled",value:a}}function e(a){return{state:"rejected",reason:a}}var f=a["default"],g=b.isArray,h=b.isNonThenable;c["default"]=function(a,b){return new f(function(b,c){function i(a){return function(b){k(a,d(b))}}function j(a){return function(b){k(a,e(b))}}function k(a,c){n[a]=c,0===--m&&b(n)}if(!g(a))throw new TypeError("You must pass an array to allSettled.");var l,m=a.length;if(0===m)return void b([]);for(var n=new Array(m),o=0;o<a.length;o++)l=a[o],h(l)?k(o,d(l)):f.cast(l).then(i(o),j(o))},b)}}),b("rsvp/asap",["exports"],function(a){"use strict";function b(){return function(){process.nextTick(e)}}function c(){var a=0,b=new h(e),c=document.createTextNode("");return b.observe(c,{characterData:!0}),function(){c.data=a=++a%2}}function d(){return function(){setTimeout(e,1)}}function e(){for(var a=0;a<i.length;a++){var b=i[a],c=b[0],d=b[1];c(d)}i=[]}a["default"]=function(a,b){var c=i.push([a,b]);1===c&&f()};var f,g="undefined"!=typeof window?window:{},h=g.MutationObserver||g.WebKitMutationObserver,i=[];
f="undefined"!=typeof process&&"[object process]"==={}.toString.call(process)?b():h?c():d()}),b("rsvp/config",["./events","exports"],function(a,b){"use strict";function c(a,b){return"onerror"===a?void e.on("error",b):2!==arguments.length?e[a]:void(e[a]=b)}var d=a["default"],e={instrument:!1};d.mixin(e),b.config=e,b.configure=c}),b("rsvp/defer",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a){var b={};return b.promise=new c(function(a,c){b.resolve=a,b.reject=c},a),b}}),b("rsvp/events",["exports"],function(a){"use strict";var b=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},c=function(a){var b=a._promiseCallbacks;return b||(b=a._promiseCallbacks={}),b};a["default"]={mixin:function(a){return a.on=this.on,a.off=this.off,a.trigger=this.trigger,a._promiseCallbacks=void 0,a},on:function(a,d){var e,f=c(this);e=f[a],e||(e=f[a]=[]),-1===b(e,d)&&e.push(d)},off:function(a,d){var e,f,g=c(this);return d?(e=g[a],f=b(e,d),void(-1!==f&&e.splice(f,1))):void(g[a]=[])},trigger:function(a,b){var d,e,f=c(this);if(d=f[a])for(var g=0;g<d.length;g++)(e=d[g])(b)}}}),b("rsvp/filter",["./all","./map","./utils","exports"],function(a,b,c,d){"use strict";function e(a,b,c){if(!i(a))throw new TypeError("You must pass an array to filter.");if(!h(b))throw new TypeError("You must pass a function to filter's second argument.");return f(a,c).then(function(d){return g(a,b,c).then(function(a){var b,c=d.length,e=[];for(b=0;c>b;b++)a[b]&&e.push(d[b]);return e})})}var f=a["default"],g=b["default"],h=c.isFunction,i=c.isArray;d["default"]=e}),b("rsvp/hash",["./promise","./utils","exports"],function(a,b,c){"use strict";var d=a["default"],e=b.isNonThenable,f=b.keysOf;c["default"]=function(a,b){return new d(function(b,c){function g(a){return function(c){k[a]=c,0===--m&&b(k)}}function h(a){m=0,c(a)}var i,j,k={},l=f(a),m=l.length;if(0===m)return void b(k);for(var n=0;n<l.length;n++)j=l[n],i=a[j],e(i)?(k[j]=i,0===--m&&b(k)):d.cast(i).then(g(j),h)})}}),b("rsvp/instrument",["./config","./utils","exports"],function(a,b,c){"use strict";var d=a.config,e=b.now;c["default"]=function(a,b,c){try{d.trigger(a,{guid:b._guidKey+b._id,eventName:a,detail:b._detail,childGuid:c&&b._guidKey+c._id,label:b._label,timeStamp:e(),stack:new Error(b._label).stack})}catch(f){setTimeout(function(){throw f},0)}}}),b("rsvp/map",["./promise","./all","./utils","exports"],function(a,b,c,d){"use strict";var e=(a["default"],b["default"]),f=c.isArray,g=c.isFunction;d["default"]=function(a,b,c){if(!f(a))throw new TypeError("You must pass an array to map.");if(!g(b))throw new TypeError("You must pass a function to map's second argument.");return e(a,c).then(function(a){var d,f=a.length,g=[];for(d=0;f>d;d++)g.push(b(a[d]));return e(g,c)})}}),b("rsvp/node",["./promise","exports"],function(a,b){"use strict";function c(a,b){return function(c,d){c?b(c):a(arguments.length>2?e.call(arguments,1):d)}}var d=a["default"],e=Array.prototype.slice;b["default"]=function(a,b){return function(){var f=e.call(arguments),g=this||b;return new d(function(b,e){d.all(f).then(function(d){try{d.push(c(b,e)),a.apply(g,d)}catch(f){e(f)}})})}}}),b("rsvp/promise",["./config","./events","./instrument","./utils","./promise/cast","./promise/all","./promise/race","./promise/resolve","./promise/reject","exports"],function(a,b,c,d,e,f,g,h,i,j){"use strict";function k(){}function l(a,b){if(!z(a))throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");if(!(this instanceof l))throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");this._id=H++,this._label=b,this._subscribers=[],w.instrument&&x("created",this),k!==a&&m(a,this)}function m(a,b){function c(a){r(b,a)}function d(a){t(b,a)}try{a(c,d)}catch(e){d(e)}}function n(a,b,c,d){var e=a._subscribers,f=e.length;e[f]=b,e[f+K]=c,e[f+L]=d}function o(a,b){var c,d,e=a._subscribers,f=a._detail;w.instrument&&x(b===K?"fulfilled":"rejected",a);for(var g=0;g<e.length;g+=3)c=e[g],d=e[g+b],p(b,c,d,f);a._subscribers=null}function p(a,b,c,d){var e,f,g,h,i=z(c);if(i)try{e=c(d),g=!0}catch(j){h=!0,f=j}else e=d,g=!0;q(b,e)||(i&&g?r(b,e):h?t(b,f):a===K?r(b,e):a===L&&t(b,e))}function q(a,b){var c,d=null;try{if(a===b)throw new TypeError("A promises callback cannot return that same promise.");if(y(b)&&(d=b.then,z(d)))return d.call(b,function(d){return c?!0:(c=!0,void(b!==d?r(a,d):s(a,d)))},function(b){return c?!0:(c=!0,void t(a,b))},"derived from: "+(a._label||" unknown promise")),!0}catch(e){return c?!0:(t(a,e),!0)}return!1}function r(a,b){a===b?s(a,b):q(a,b)||s(a,b)}function s(a,b){a._state===I&&(a._state=J,a._detail=b,w.async(u,a))}function t(a,b){a._state===I&&(a._state=J,a._detail=b,w.async(v,a))}function u(a){o(a,a._state=K)}function v(a){a._onerror&&a._onerror(a._detail),o(a,a._state=L)}var w=a.config,x=(b["default"],c["default"]),y=d.objectOrFunction,z=d.isFunction,A=d.now,B=e["default"],C=f["default"],D=g["default"],E=h["default"],F=i["default"],G="rsvp_"+A()+"-",H=0;j["default"]=l,l.cast=B,l.all=C,l.race=D,l.resolve=E,l.reject=F;var I=void 0,J=0,K=1,L=2;l.prototype={constructor:l,_id:void 0,_guidKey:G,_label:void 0,_state:void 0,_detail:void 0,_subscribers:void 0,_onerror:function(a){w.trigger("error",a)},then:function(a,b,c){var d=this;this._onerror=null;var e=new this.constructor(k,c);if(this._state){var f=arguments;w.async(function(){p(d._state,e,f[d._state-1],d._detail)})}else n(this,e,a,b);return w.instrument&&x("chained",d,e),e},"catch":function(a,b){return this.then(null,a,b)},"finally":function(a,b){var c=this.constructor;return this.then(function(b){return c.cast(a()).then(function(){return b})},function(b){return c.cast(a()).then(function(){throw b})},b)}}}),b("rsvp/promise/all",["../utils","exports"],function(a,b){"use strict";var c=a.isArray,d=a.isNonThenable;b["default"]=function(a,b){var e=this;return new e(function(b,f){function g(a){return function(c){k[a]=c,0===--j&&b(k)}}function h(a){j=0,f(a)}if(!c(a))throw new TypeError("You must pass an array to all.");var i,j=a.length,k=new Array(j);if(0===j)return void b(k);for(var l=0;l<a.length;l++)i=a[l],d(i)?(k[l]=i,0===--j&&b(k)):e.cast(i).then(g(l),h)},b)}}),b("rsvp/promise/cast",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return a&&"object"==typeof a&&a.constructor===c?a:new c(function(b){b(a)},b)}}),b("rsvp/promise/race",["../utils","exports"],function(a,b){"use strict";var c=a.isArray,d=(a.isFunction,a.isNonThenable);b["default"]=function(a,b){var e,f=this;return new f(function(b,g){function h(a){j&&(j=!1,b(a))}function i(a){j&&(j=!1,g(a))}if(!c(a))throw new TypeError("You must pass an array to race.");for(var j=!0,k=0;k<a.length;k++){if(e=a[k],d(e))return j=!1,void b(e);f.cast(e).then(h,i)}},b)}}),b("rsvp/promise/reject",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return new c(function(b,c){c(a)},b)}}),b("rsvp/promise/resolve",["exports"],function(a){"use strict";a["default"]=function(a,b){var c=this;return new c(function(b,c){b(a)},b)}}),b("rsvp/race",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.race(a,b)}}),b("rsvp/reject",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.reject(a,b)}}),b("rsvp/resolve",["./promise","exports"],function(a,b){"use strict";var c=a["default"];b["default"]=function(a,b){return c.resolve(a,b)}}),b("rsvp/rethrow",["exports"],function(a){"use strict";a["default"]=function(a){throw setTimeout(function(){throw a}),a}}),b("rsvp/utils",["exports"],function(a){"use strict";function b(a){return"function"==typeof a||"object"==typeof a&&null!==a}function c(a){return"function"==typeof a}function d(a){return!b(a)}function e(a){return"[object Array]"===Object.prototype.toString.call(a)}a.objectOrFunction=b,a.isFunction=c,a.isNonThenable=d,a.isArray=e;var f=Date.now||function(){return(new Date).getTime()};a.now=f;var g=Object.keys||function(a){var b=[];for(var c in a)b.push(c);return b};a.keysOf=g}),b("rsvp",["./rsvp/promise","./rsvp/events","./rsvp/node","./rsvp/all","./rsvp/all_settled","./rsvp/race","./rsvp/hash","./rsvp/rethrow","./rsvp/defer","./rsvp/config","./rsvp/map","./rsvp/resolve","./rsvp/reject","./rsvp/asap","./rsvp/filter","exports"],function(a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p){"use strict";function q(a,b){C.async(a,b)}function r(){C.on.apply(C,arguments)}function s(){C.off.apply(C,arguments)}var t=a["default"],u=b["default"],v=c["default"],w=d["default"],x=e["default"],y=f["default"],z=g["default"],A=h["default"],B=i["default"],C=j.config,D=j.configure,E=k["default"],F=l["default"],G=m["default"],H=n["default"],I=o["default"];if(C.async=H,"undefined"!=typeof window&&"object"==typeof window.__PROMISE_INSTRUMENTATION__){var J=window.__PROMISE_INSTRUMENTATION__;D("instrument",!0);for(var K in J)J.hasOwnProperty(K)&&r(K,J[K])}p.Promise=t,p.EventTarget=u,p.all=w,p.allSettled=x,p.race=y,p.hash=z,p.rethrow=A,p.defer=B,p.denodeify=v,p.configure=D,p.on=r,p.off=s,p.resolve=F,p.reject=G,p.async=q,p.map=E,p.filter=I}),a.LTApi.Utils.RSVP=c("rsvp")}(window),function(a){function b(a,b,c){switch(arguments.length){case 2:return null!=a?a:b;case 3:return null!=a?a:null!=b?b:c;default:throw new Error("Implement me")}}function c(a,b){return za.call(a,b)}function d(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function e(a){ta.suppressDeprecationWarnings===!1&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+a)}function f(a,b){var c=!0;return m(function(){return c&&(e(a),c=!1),b.apply(this,arguments)},b)}function g(a,b){qb[a]||(e(b),qb[a]=!0)}function h(a,b){return function(c){return p(a.call(this,c),b)}}function i(a,b){return function(c){return this.localeData().ordinal(a.call(this,c),b)}}function j(){}function k(a,b){b!==!1&&F(a),n(this,a),this._d=new Date(+a._d)}function l(a){var b=y(a),c=b.year||0,d=b.quarter||0,e=b.month||0,f=b.week||0,g=b.day||0,h=b.hour||0,i=b.minute||0,j=b.second||0,k=b.millisecond||0;this._milliseconds=+k+1e3*j+6e4*i+36e5*h,this._days=+g+7*f,this._months=+e+3*d+12*c,this._data={},this._locale=ta.localeData(),this._bubble()}function m(a,b){for(var d in b)c(b,d)&&(a[d]=b[d]);return c(b,"toString")&&(a.toString=b.toString),c(b,"valueOf")&&(a.valueOf=b.valueOf),a}function n(a,b){var c,d,e;if("undefined"!=typeof b._isAMomentObject&&(a._isAMomentObject=b._isAMomentObject),"undefined"!=typeof b._i&&(a._i=b._i),"undefined"!=typeof b._f&&(a._f=b._f),"undefined"!=typeof b._l&&(a._l=b._l),"undefined"!=typeof b._strict&&(a._strict=b._strict),"undefined"!=typeof b._tzm&&(a._tzm=b._tzm),"undefined"!=typeof b._isUTC&&(a._isUTC=b._isUTC),"undefined"!=typeof b._offset&&(a._offset=b._offset),"undefined"!=typeof b._pf&&(a._pf=b._pf),"undefined"!=typeof b._locale&&(a._locale=b._locale),Ia.length>0)for(c in Ia)d=Ia[c],e=b[d],"undefined"!=typeof e&&(a[d]=e);return a}function o(a){return 0>a?Math.ceil(a):Math.floor(a)}function p(a,b,c){for(var d=""+Math.abs(a),e=a>=0;d.length<b;)d="0"+d;return(e?c?"+":"":"-")+d}function q(a,b){var c={milliseconds:0,months:0};return c.months=b.month()-a.month()+12*(b.year()-a.year()),a.clone().add(c.months,"M").isAfter(b)&&--c.months,c.milliseconds=+b-+a.clone().add(c.months,"M"),c}function r(a,b){var c;return b=K(b,a),a.isBefore(b)?c=q(a,b):(c=q(b,a),c.milliseconds=-c.milliseconds,c.months=-c.months),c}function s(a,b){return function(c,d){var e,f;return null===d||isNaN(+d)||(g(b,"moment()."+b+"(period, number) is deprecated. Please use moment()."+b+"(number, period)."),f=c,c=d,d=f),c="string"==typeof c?+c:c,e=ta.duration(c,d),t(this,e,a),this}}function t(a,b,c,d){var e=b._milliseconds,f=b._days,g=b._months;d=null==d?!0:d,e&&a._d.setTime(+a._d+e*c),f&&na(a,"Date",ma(a,"Date")+f*c),g&&la(a,ma(a,"Month")+g*c),d&&ta.updateOffset(a,f||g)}function u(a){return"[object Array]"===Object.prototype.toString.call(a)}function v(a){return"[object Date]"===Object.prototype.toString.call(a)||a instanceof Date}function w(a,b,c){var d,e=Math.min(a.length,b.length),f=Math.abs(a.length-b.length),g=0;for(d=0;e>d;d++)(c&&a[d]!==b[d]||!c&&A(a[d])!==A(b[d]))&&g++;return g+f}function x(a){if(a){var b=a.toLowerCase().replace(/(.)s$/,"$1");a=jb[a]||kb[b]||b}return a}function y(a){var b,d,e={};for(d in a)c(a,d)&&(b=x(d),b&&(e[b]=a[d]));return e}function z(b){var c,d;if(0===b.indexOf("week"))c=7,d="day";else{if(0!==b.indexOf("month"))return;c=12,d="month"}ta[b]=function(e,f){var g,h,i=ta._locale[b],j=[];if("number"==typeof e&&(f=e,e=a),h=function(a){var b=ta().utc().set(d,a);return i.call(ta._locale,b,e||"")},null!=f)return h(f);for(g=0;c>g;g++)j.push(h(g));return j}}function A(a){var b=+a,c=0;return 0!==b&&isFinite(b)&&(c=b>=0?Math.floor(b):Math.ceil(b)),c}function B(a,b){return new Date(Date.UTC(a,b+1,0)).getUTCDate()}function C(a,b,c){return ha(ta([a,11,31+b-c]),b,c).week}function D(a){return E(a)?366:365}function E(a){return a%4===0&&a%100!==0||a%400===0}function F(a){var b;a._a&&-2===a._pf.overflow&&(b=a._a[Ba]<0||a._a[Ba]>11?Ba:a._a[Ca]<1||a._a[Ca]>B(a._a[Aa],a._a[Ba])?Ca:a._a[Da]<0||a._a[Da]>23?Da:a._a[Ea]<0||a._a[Ea]>59?Ea:a._a[Fa]<0||a._a[Fa]>59?Fa:a._a[Ga]<0||a._a[Ga]>999?Ga:-1,a._pf._overflowDayOfYear&&(Aa>b||b>Ca)&&(b=Ca),a._pf.overflow=b)}function G(a){return null==a._isValid&&(a._isValid=!isNaN(a._d.getTime())&&a._pf.overflow<0&&!a._pf.empty&&!a._pf.invalidMonth&&!a._pf.nullInput&&!a._pf.invalidFormat&&!a._pf.userInvalidated,a._strict&&(a._isValid=a._isValid&&0===a._pf.charsLeftOver&&0===a._pf.unusedTokens.length)),a._isValid}function H(a){return a?a.toLowerCase().replace("_","-"):a}function I(a){for(var b,c,d,e,f=0;f<a.length;){for(e=H(a[f]).split("-"),b=e.length,c=H(a[f+1]),c=c?c.split("-"):null;b>0;){if(d=J(e.slice(0,b).join("-")))return d;if(c&&c.length>=b&&w(e,c,!0)>=b-1)break;b--}f++}return null}function J(a){var b=null;if(!Ha[a]&&Ja)try{b=ta.locale(),require("./locale/"+a),ta.locale(b)}catch(c){}return Ha[a]}function K(a,b){return b._isUTC?ta(a).zone(b._offset||0):ta(a).local()}function L(a){return a.match(/\[[\s\S]/)?a.replace(/^\[|\]$/g,""):a.replace(/\\/g,"")}function M(a){var b,c,d=a.match(Na);for(b=0,c=d.length;c>b;b++)pb[d[b]]?d[b]=pb[d[b]]:d[b]=L(d[b]);return function(e){var f="";for(b=0;c>b;b++)f+=d[b]instanceof Function?d[b].call(e,a):d[b];return f}}function N(a,b){return a.isValid()?(b=O(b,a.localeData()),lb[b]||(lb[b]=M(b)),lb[b](a)):a.localeData().invalidDate()}function O(a,b){function c(a){return b.longDateFormat(a)||a}var d=5;for(Oa.lastIndex=0;d>=0&&Oa.test(a);)a=a.replace(Oa,c),Oa.lastIndex=0,d-=1;return a}function P(a,b){var c,d=b._strict;switch(a){case"Q":return Za;case"DDDD":return _a;case"YYYY":case"GGGG":case"gggg":return d?ab:Ra;case"Y":case"G":case"g":return cb;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return d?bb:Sa;case"S":if(d)return Za;case"SS":if(d)return $a;case"SSS":if(d)return _a;case"DDD":return Qa;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Ua;case"a":case"A":return b._locale._meridiemParse;case"X":return Xa;case"Z":case"ZZ":return Va;case"T":return Wa;case"SSSS":return Ta;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return d?$a:Pa;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return Pa;case"Do":return Ya;default:return c=new RegExp(Y(X(a.replace("\\","")),"i"))}}function Q(a){a=a||"";var b=a.match(Va)||[],c=b[b.length-1]||[],d=(c+"").match(hb)||["-",0,0],e=+(60*d[1])+A(d[2]);return"+"===d[0]?-e:e}function R(a,b,c){var d,e=c._a;switch(a){case"Q":null!=b&&(e[Ba]=3*(A(b)-1));break;case"M":case"MM":null!=b&&(e[Ba]=A(b)-1);break;case"MMM":case"MMMM":d=c._locale.monthsParse(b),null!=d?e[Ba]=d:c._pf.invalidMonth=b;break;case"D":case"DD":null!=b&&(e[Ca]=A(b));break;case"Do":null!=b&&(e[Ca]=A(parseInt(b,10)));break;case"DDD":case"DDDD":null!=b&&(c._dayOfYear=A(b));break;case"YY":e[Aa]=ta.parseTwoDigitYear(b);break;case"YYYY":case"YYYYY":case"YYYYYY":e[Aa]=A(b);break;case"a":case"A":c._isPm=c._locale.isPM(b);break;case"H":case"HH":case"h":case"hh":e[Da]=A(b);break;case"m":case"mm":e[Ea]=A(b);break;case"s":case"ss":e[Fa]=A(b);break;case"S":case"SS":case"SSS":case"SSSS":e[Ga]=A(1e3*("0."+b));break;case"X":c._d=new Date(1e3*parseFloat(b));break;case"Z":case"ZZ":c._useUTC=!0,c._tzm=Q(b);break;case"dd":case"ddd":case"dddd":d=c._locale.weekdaysParse(b),null!=d?(c._w=c._w||{},c._w.d=d):c._pf.invalidWeekday=b;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":a=a.substr(0,1);case"gggg":case"GGGG":case"GGGGG":a=a.substr(0,2),b&&(c._w=c._w||{},c._w[a]=A(b));break;case"gg":case"GG":c._w=c._w||{},c._w[a]=ta.parseTwoDigitYear(b)}}function S(a){var c,d,e,f,g,h,i;c=a._w,null!=c.GG||null!=c.W||null!=c.E?(g=1,h=4,d=b(c.GG,a._a[Aa],ha(ta(),1,4).year),e=b(c.W,1),f=b(c.E,1)):(g=a._locale._week.dow,h=a._locale._week.doy,d=b(c.gg,a._a[Aa],ha(ta(),g,h).year),e=b(c.w,1),null!=c.d?(f=c.d,g>f&&++e):f=null!=c.e?c.e+g:g),i=ia(d,e,f,h,g),a._a[Aa]=i.year,a._dayOfYear=i.dayOfYear}function T(a){var c,d,e,f,g=[];if(!a._d){for(e=V(a),a._w&&null==a._a[Ca]&&null==a._a[Ba]&&S(a),a._dayOfYear&&(f=b(a._a[Aa],e[Aa]),a._dayOfYear>D(f)&&(a._pf._overflowDayOfYear=!0),d=da(f,0,a._dayOfYear),a._a[Ba]=d.getUTCMonth(),a._a[Ca]=d.getUTCDate()),c=0;3>c&&null==a._a[c];++c)a._a[c]=g[c]=e[c];for(;7>c;c++)a._a[c]=g[c]=null==a._a[c]?2===c?1:0:a._a[c];a._d=(a._useUTC?da:ca).apply(null,g),null!=a._tzm&&a._d.setUTCMinutes(a._d.getUTCMinutes()+a._tzm)}}function U(a){var b;a._d||(b=y(a._i),a._a=[b.year,b.month,b.day,b.hour,b.minute,b.second,b.millisecond],T(a))}function V(a){var b=new Date;return a._useUTC?[b.getUTCFullYear(),b.getUTCMonth(),b.getUTCDate()]:[b.getFullYear(),b.getMonth(),b.getDate()]}function W(a){if(a._f===ta.ISO_8601)return void $(a);a._a=[],a._pf.empty=!0;var b,c,d,e,f,g=""+a._i,h=g.length,i=0;for(d=O(a._f,a._locale).match(Na)||[],b=0;b<d.length;b++)e=d[b],c=(g.match(P(e,a))||[])[0],c&&(f=g.substr(0,g.indexOf(c)),f.length>0&&a._pf.unusedInput.push(f),g=g.slice(g.indexOf(c)+c.length),i+=c.length),pb[e]?(c?a._pf.empty=!1:a._pf.unusedTokens.push(e),R(e,c,a)):a._strict&&!c&&a._pf.unusedTokens.push(e);a._pf.charsLeftOver=h-i,g.length>0&&a._pf.unusedInput.push(g),a._isPm&&a._a[Da]<12&&(a._a[Da]+=12),a._isPm===!1&&12===a._a[Da]&&(a._a[Da]=0),T(a),F(a)}function X(a){return a.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(a,b,c,d,e){return b||c||d||e})}function Y(a){return a.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function Z(a){var b,c,e,f,g;if(0===a._f.length)return a._pf.invalidFormat=!0,void(a._d=new Date(NaN));for(f=0;f<a._f.length;f++)g=0,b=n({},a),null!=a._useUTC&&(b._useUTC=a._useUTC),b._pf=d(),b._f=a._f[f],W(b),G(b)&&(g+=b._pf.charsLeftOver,g+=10*b._pf.unusedTokens.length,b._pf.score=g,(null==e||e>g)&&(e=g,c=b));m(a,c||b)}function $(a){var b,c,d=a._i,e=db.exec(d);if(e){for(a._pf.iso=!0,b=0,c=fb.length;c>b;b++)if(fb[b][1].exec(d)){a._f=fb[b][0]+(e[6]||" ");break}for(b=0,c=gb.length;c>b;b++)if(gb[b][1].exec(d)){a._f+=gb[b][0];break}d.match(Va)&&(a._f+="Z"),W(a)}else a._isValid=!1}function _(a){$(a),a._isValid===!1&&(delete a._isValid,ta.createFromInputFallback(a))}function aa(a,b){var c,d=[];for(c=0;c<a.length;++c)d.push(b(a[c],c));return d}function ba(b){var c,d=b._i;d===a?b._d=new Date:v(d)?b._d=new Date(+d):null!==(c=Ka.exec(d))?b._d=new Date(+c[1]):"string"==typeof d?_(b):u(d)?(b._a=aa(d.slice(0),function(a){return parseInt(a,10)}),T(b)):"object"==typeof d?U(b):"number"==typeof d?b._d=new Date(d):ta.createFromInputFallback(b)}function ca(a,b,c,d,e,f,g){var h=new Date(a,b,c,d,e,f,g);return 1970>a&&h.setFullYear(a),h}function da(a){var b=new Date(Date.UTC.apply(null,arguments));return 1970>a&&b.setUTCFullYear(a),b}function ea(a,b){if("string"==typeof a)if(isNaN(a)){if(a=b.weekdaysParse(a),"number"!=typeof a)return null}else a=parseInt(a,10);return a}function fa(a,b,c,d,e){return e.relativeTime(b||1,!!c,a,d)}function ga(a,b,c){var d=ta.duration(a).abs(),e=ya(d.as("s")),f=ya(d.as("m")),g=ya(d.as("h")),h=ya(d.as("d")),i=ya(d.as("M")),j=ya(d.as("y")),k=e<mb.s&&["s",e]||1===f&&["m"]||f<mb.m&&["mm",f]||1===g&&["h"]||g<mb.h&&["hh",g]||1===h&&["d"]||h<mb.d&&["dd",h]||1===i&&["M"]||i<mb.M&&["MM",i]||1===j&&["y"]||["yy",j];return k[2]=b,k[3]=+a>0,k[4]=c,fa.apply({},k)}function ha(a,b,c){var d,e=c-b,f=c-a.day();return f>e&&(f-=7),e-7>f&&(f+=7),d=ta(a).add(f,"d"),{week:Math.ceil(d.dayOfYear()/7),year:d.year()}}function ia(a,b,c,d,e){var f,g,h=da(a,0,1).getUTCDay();return h=0===h?7:h,c=null!=c?c:e,f=e-h+(h>d?7:0)-(e>h?7:0),g=7*(b-1)+(c-e)+f+1,{year:g>0?a:a-1,dayOfYear:g>0?g:D(a-1)+g}}function ja(b){var c=b._i,d=b._f;return b._locale=b._locale||ta.localeData(b._l),null===c||d===a&&""===c?ta.invalid({nullInput:!0}):("string"==typeof c&&(b._i=c=b._locale.preparse(c)),ta.isMoment(c)?new k(c,!0):(d?u(d)?Z(b):W(b):ba(b),new k(b)))}function ka(a,b){var c,d;if(1===b.length&&u(b[0])&&(b=b[0]),!b.length)return ta();for(c=b[0],d=1;d<b.length;++d)b[d][a](c)&&(c=b[d]);return c}function la(a,b){var c;return"string"==typeof b&&(b=a.localeData().monthsParse(b),"number"!=typeof b)?a:(c=Math.min(a.date(),B(a.year(),b)),a._d["set"+(a._isUTC?"UTC":"")+"Month"](b,c),a)}function ma(a,b){return a._d["get"+(a._isUTC?"UTC":"")+b]()}function na(a,b,c){return"Month"===b?la(a,c):a._d["set"+(a._isUTC?"UTC":"")+b](c)}function oa(a,b){return function(c){return null!=c?(na(this,a,c),ta.updateOffset(this,b),this):ma(this,a)}}function pa(a){return 400*a/146097}function qa(a){return 146097*a/400}function ra(a){ta.duration.fn[a]=function(){return this._data[a]}}function sa(a){"undefined"==typeof ender&&(ua=xa.moment,a?xa.moment=f("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ta):LTApi.moment=ta)}for(var ta,ua,va,wa="2.8.3",xa="undefined"!=typeof global?global:this,ya=Math.round,za=Object.prototype.hasOwnProperty,Aa=0,Ba=1,Ca=2,Da=3,Ea=4,Fa=5,Ga=6,Ha={},Ia=[],Ja="undefined"!=typeof module&&module.exports,Ka=/^\/?Date\((\-?\d+)/i,La=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Ma=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Na=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|X|zz?|ZZ?|.)/g,Oa=/(\[[^\[]*\])|(\\)?(LT|LL?L?L?|l{1,4})/g,Pa=/\d\d?/,Qa=/\d{1,3}/,Ra=/\d{1,4}/,Sa=/[+\-]?\d{1,6}/,Ta=/\d+/,Ua=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,Va=/Z|[\+\-]\d\d:?\d\d/gi,Wa=/T/i,Xa=/[\+\-]?\d+(\.\d{1,3})?/,Ya=/\d{1,2}/,Za=/\d/,$a=/\d\d/,_a=/\d{3}/,ab=/\d{4}/,bb=/[+-]?\d{6}/,cb=/[+-]?\d+/,db=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,eb="YYYY-MM-DDTHH:mm:ssZ",fb=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],gb=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],hb=/([\+\-]|\d\d)/gi,ib=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),jb={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},kb={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lb={},mb={s:45,m:45,h:22,d:26,M:11},nb="DDD w W M D d".split(" "),ob="M D H h m s w W".split(" "),pb={M:function(){return this.month()+1},MMM:function(a){return this.localeData().monthsShort(this,a)},MMMM:function(a){return this.localeData().months(this,a)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(a){return this.localeData().weekdaysMin(this,a)},ddd:function(a){return this.localeData().weekdaysShort(this,a)},dddd:function(a){return this.localeData().weekdays(this,a)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return p(this.year()%100,2)},YYYY:function(){return p(this.year(),4)},YYYYY:function(){return p(this.year(),5)},YYYYYY:function(){var a=this.year(),b=a>=0?"+":"-";return b+p(Math.abs(a),6)},gg:function(){return p(this.weekYear()%100,2)},gggg:function(){return p(this.weekYear(),4)},ggggg:function(){return p(this.weekYear(),5)},GG:function(){return p(this.isoWeekYear()%100,2)},GGGG:function(){return p(this.isoWeekYear(),4)},GGGGG:function(){return p(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return A(this.milliseconds()/100)},SS:function(){return p(A(this.milliseconds()/10),2)},SSS:function(){return p(this.milliseconds(),3)},SSSS:function(){return p(this.milliseconds(),3)},Z:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+p(A(a/60),2)+":"+p(A(a)%60,2)},ZZ:function(){var a=-this.zone(),b="+";return 0>a&&(a=-a,b="-"),b+p(A(a/60),2)+p(A(a)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},X:function(){return this.unix()},Q:function(){return this.quarter()}},qb={},rb=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"];nb.length;)va=nb.pop(),pb[va+"o"]=i(pb[va],va);for(;ob.length;)va=ob.pop(),pb[va+va]=h(pb[va],2);pb.DDDD=h(pb.DDD,3),m(j.prototype,{set:function(a){var b,c;for(c in a)b=a[c],"function"==typeof b?this[c]=b:this["_"+c]=b},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(a){return this._months[a.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(a){return this._monthsShort[a.month()]},monthsParse:function(a){var b,c,d;for(this._monthsParse||(this._monthsParse=[]),b=0;12>b;b++)if(this._monthsParse[b]||(c=ta.utc([2e3,b]),d="^"+this.months(c,"")+"|^"+this.monthsShort(c,""),this._monthsParse[b]=new RegExp(d.replace(".",""),"i")),this._monthsParse[b].test(a))return b},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(a){return this._weekdays[a.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(a){return this._weekdaysShort[a.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(a){return this._weekdaysMin[a.day()]},weekdaysParse:function(a){var b,c,d;for(this._weekdaysParse||(this._weekdaysParse=[]),b=0;7>b;b++)if(this._weekdaysParse[b]||(c=ta([2e3,1]).day(b),d="^"+this.weekdays(c,"")+"|^"+this.weekdaysShort(c,"")+"|^"+this.weekdaysMin(c,""),this._weekdaysParse[b]=new RegExp(d.replace(".",""),"i")),this._weekdaysParse[b].test(a))return b},_longDateFormat:{LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(a){var b=this._longDateFormat[a];return!b&&this._longDateFormat[a.toUpperCase()]&&(b=this._longDateFormat[a.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(a){return a.slice(1)}),this._longDateFormat[a]=b),b},isPM:function(a){return"p"===(a+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(a,b,c){return a>11?c?"pm":"PM":c?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(a,b){var c=this._calendar[a];return"function"==typeof c?c.apply(b):c},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(a,b,c,d){var e=this._relativeTime[c];return"function"==typeof e?e(a,b,c,d):e.replace(/%d/i,a)},pastFuture:function(a,b){var c=this._relativeTime[a>0?"future":"past"];return"function"==typeof c?c(b):c.replace(/%s/i,b)},ordinal:function(a){return this._ordinal.replace("%d",a)},_ordinal:"%d",preparse:function(a){return a},postformat:function(a){return a},week:function(a){return ha(a,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),ta=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._i=b,g._f=c,g._l=e,g._strict=f,g._isUTC=!1,g._pf=d(),ja(g)},ta.suppressDeprecationWarnings=!1,ta.createFromInputFallback=f("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(a){a._d=new Date(a._i)}),ta.min=function(){var a=[].slice.call(arguments,0);return ka("isBefore",a)},ta.max=function(){var a=[].slice.call(arguments,0);return ka("isAfter",a)},ta.utc=function(b,c,e,f){var g;return"boolean"==typeof e&&(f=e,e=a),g={},g._isAMomentObject=!0,g._useUTC=!0,g._isUTC=!0,g._l=e,g._i=b,g._f=c,g._strict=f,g._pf=d(),ja(g).utc()},ta.unix=function(a){return ta(1e3*a)},ta.duration=function(a,b){var d,e,f,g,h=a,i=null;return ta.isDuration(a)?h={ms:a._milliseconds,d:a._days,M:a._months}:"number"==typeof a?(h={},b?h[b]=a:h.milliseconds=a):(i=La.exec(a))?(d="-"===i[1]?-1:1,h={y:0,d:A(i[Ca])*d,h:A(i[Da])*d,m:A(i[Ea])*d,s:A(i[Fa])*d,ms:A(i[Ga])*d}):(i=Ma.exec(a))?(d="-"===i[1]?-1:1,f=function(a){var b=a&&parseFloat(a.replace(",","."));return(isNaN(b)?0:b)*d},h={y:f(i[2]),M:f(i[3]),d:f(i[4]),h:f(i[5]),m:f(i[6]),s:f(i[7]),w:f(i[8])}):"object"==typeof h&&("from"in h||"to"in h)&&(g=r(ta(h.from),ta(h.to)),h={},h.ms=g.milliseconds,h.M=g.months),e=new l(h),ta.isDuration(a)&&c(a,"_locale")&&(e._locale=a._locale),e},ta.version=wa,ta.defaultFormat=eb,ta.ISO_8601=function(){},ta.momentProperties=Ia,ta.updateOffset=function(){},ta.relativeTimeThreshold=function(b,c){return mb[b]===a?!1:c===a?mb[b]:(mb[b]=c,!0)},ta.lang=f("moment.lang is deprecated. Use moment.locale instead.",function(a,b){return ta.locale(a,b)}),ta.locale=function(a,b){var c;return a&&(c="undefined"!=typeof b?ta.defineLocale(a,b):ta.localeData(a),c&&(ta.duration._locale=ta._locale=c)),ta._locale._abbr},ta.defineLocale=function(a,b){return null!==b?(b.abbr=a,Ha[a]||(Ha[a]=new j),Ha[a].set(b),ta.locale(a),Ha[a]):(delete Ha[a],null)},ta.langData=f("moment.langData is deprecated. Use moment.localeData instead.",function(a){return ta.localeData(a)}),ta.localeData=function(a){var b;if(a&&a._locale&&a._locale._abbr&&(a=a._locale._abbr),!a)return ta._locale;if(!u(a)){if(b=J(a))return b;a=[a]}return I(a)},ta.isMoment=function(a){return a instanceof k||null!=a&&c(a,"_isAMomentObject")},ta.isDuration=function(a){return a instanceof l};for(va=rb.length-1;va>=0;--va)z(rb[va]);ta.normalizeUnits=function(a){return x(a)},ta.invalid=function(a){var b=ta.utc(NaN);return null!=a?m(b._pf,a):b._pf.userInvalidated=!0,b},ta.parseZone=function(){return ta.apply(null,arguments).parseZone()},ta.parseTwoDigitYear=function(a){return A(a)+(A(a)>68?1900:2e3)},m(ta.fn=k.prototype,{clone:function(){return ta(this)},valueOf:function(){return+this._d+6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var a=ta(this).utc();return 0<a.year()&&a.year()<=9999?N(a,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):N(a,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]");
},toArray:function(){var a=this;return[a.year(),a.month(),a.date(),a.hours(),a.minutes(),a.seconds(),a.milliseconds()]},isValid:function(){return G(this)},isDSTShifted:function(){return this._a?this.isValid()&&w(this._a,(this._isUTC?ta.utc(this._a):ta(this._a)).toArray())>0:!1},parsingFlags:function(){return m({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(a){return this.zone(0,a)},local:function(a){return this._isUTC&&(this.zone(0,a),this._isUTC=!1,a&&this.add(this._dateTzOffset(),"m")),this},format:function(a){var b=N(this,a||ta.defaultFormat);return this.localeData().postformat(b)},add:s(1,"add"),subtract:s(-1,"subtract"),diff:function(a,b,c){var d,e,f,g=K(a,this),h=6e4*(this.zone()-g.zone());return b=x(b),"year"===b||"month"===b?(d=432e5*(this.daysInMonth()+g.daysInMonth()),e=12*(this.year()-g.year())+(this.month()-g.month()),f=this-ta(this).startOf("month")-(g-ta(g).startOf("month")),f-=6e4*(this.zone()-ta(this).startOf("month").zone()-(g.zone()-ta(g).startOf("month").zone())),e+=f/d,"year"===b&&(e/=12)):(d=this-g,e="second"===b?d/1e3:"minute"===b?d/6e4:"hour"===b?d/36e5:"day"===b?(d-h)/864e5:"week"===b?(d-h)/6048e5:d),c?e:o(e)},from:function(a,b){return ta.duration({to:this,from:a}).locale(this.locale()).humanize(!b)},fromNow:function(a){return this.from(ta(),a)},calendar:function(a){var b=a||ta(),c=K(b,this).startOf("day"),d=this.diff(c,"days",!0),e=-6>d?"sameElse":-1>d?"lastWeek":0>d?"lastDay":1>d?"sameDay":2>d?"nextDay":7>d?"nextWeek":"sameElse";return this.format(this.localeData().calendar(e,this))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.zone()<this.clone().month(0).zone()||this.zone()<this.clone().month(5).zone()},day:function(a){var b=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=a?(a=ea(a,this.localeData()),this.add(a-b,"d")):b},month:oa("Month",!0),startOf:function(a){switch(a=x(a)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===a?this.weekday(0):"isoWeek"===a&&this.isoWeekday(1),"quarter"===a&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(a){return a=x(a),this.startOf(a).add(1,"isoWeek"===a?"week":a).subtract(1,"ms")},isAfter:function(a,b){return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+this>+a):+this.clone().startOf(b)>+ta(a).startOf(b)},isBefore:function(a,b){return b=x("undefined"!=typeof b?b:"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+a>+this):+this.clone().startOf(b)<+ta(a).startOf(b)},isSame:function(a,b){return b=x(b||"millisecond"),"millisecond"===b?(a=ta.isMoment(a)?a:ta(a),+this===+a):+this.clone().startOf(b)===+K(a,this).startOf(b)},min:f("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(a){return a=ta.apply(null,arguments),this>a?this:a}),max:f("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(a){return a=ta.apply(null,arguments),a>this?this:a}),zone:function(a,b){var c,d=this._offset||0;return null==a?this._isUTC?d:this._dateTzOffset():("string"==typeof a&&(a=Q(a)),Math.abs(a)<16&&(a=60*a),!this._isUTC&&b&&(c=this._dateTzOffset()),this._offset=a,this._isUTC=!0,null!=c&&this.subtract(c,"m"),d!==a&&(!b||this._changeInProgress?t(this,ta.duration(d-a,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ta.updateOffset(this,!0),this._changeInProgress=null)),this)},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.zone(this._tzm):"string"==typeof this._i&&this.zone(this._i),this},hasAlignedHourOffset:function(a){return a=a?ta(a).zone():0,(this.zone()-a)%60===0},daysInMonth:function(){return B(this.year(),this.month())},dayOfYear:function(a){var b=ya((ta(this).startOf("day")-ta(this).startOf("year"))/864e5)+1;return null==a?b:this.add(a-b,"d")},quarter:function(a){return null==a?Math.ceil((this.month()+1)/3):this.month(3*(a-1)+this.month()%3)},weekYear:function(a){var b=ha(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==a?b:this.add(a-b,"y")},isoWeekYear:function(a){var b=ha(this,1,4).year;return null==a?b:this.add(a-b,"y")},week:function(a){var b=this.localeData().week(this);return null==a?b:this.add(7*(a-b),"d")},isoWeek:function(a){var b=ha(this,1,4).week;return null==a?b:this.add(7*(a-b),"d")},weekday:function(a){var b=(this.day()+7-this.localeData()._week.dow)%7;return null==a?b:this.add(a-b,"d")},isoWeekday:function(a){return null==a?this.day()||7:this.day(this.day()%7?a:a-7)},isoWeeksInYear:function(){return C(this.year(),1,4)},weeksInYear:function(){var a=this.localeData()._week;return C(this.year(),a.dow,a.doy)},get:function(a){return a=x(a),this[a]()},set:function(a,b){return a=x(a),"function"==typeof this[a]&&this[a](b),this},locale:function(b){var c;return b===a?this._locale._abbr:(c=ta.localeData(b),null!=c&&(this._locale=c),this)},lang:f("moment().lang() is deprecated. Use moment().localeData() instead.",function(b){return b===a?this.localeData():this.locale(b)}),localeData:function(){return this._locale},_dateTzOffset:function(){return 15*Math.round(this._d.getTimezoneOffset()/15)}}),ta.fn.millisecond=ta.fn.milliseconds=oa("Milliseconds",!1),ta.fn.second=ta.fn.seconds=oa("Seconds",!1),ta.fn.minute=ta.fn.minutes=oa("Minutes",!1),ta.fn.hour=ta.fn.hours=oa("Hours",!0),ta.fn.date=oa("Date",!0),ta.fn.dates=f("dates accessor is deprecated. Use date instead.",oa("Date",!0)),ta.fn.year=oa("FullYear",!0),ta.fn.years=f("years accessor is deprecated. Use year instead.",oa("FullYear",!0)),ta.fn.days=ta.fn.day,ta.fn.months=ta.fn.month,ta.fn.weeks=ta.fn.week,ta.fn.isoWeeks=ta.fn.isoWeek,ta.fn.quarters=ta.fn.quarter,ta.fn.toJSON=ta.fn.toISOString,m(ta.duration.fn=l.prototype,{_bubble:function(){var a,b,c,d=this._milliseconds,e=this._days,f=this._months,g=this._data,h=0;g.milliseconds=d%1e3,a=o(d/1e3),g.seconds=a%60,b=o(a/60),g.minutes=b%60,c=o(b/60),g.hours=c%24,e+=o(c/24),h=o(pa(e)),e-=o(qa(h)),f+=o(e/30),e%=30,h+=o(f/12),f%=12,g.days=e,g.months=f,g.years=h},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return o(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*A(this._months/12)},humanize:function(a){var b=ga(this,!a,this.localeData());return a&&(b=this.localeData().pastFuture(+this,b)),this.localeData().postformat(b)},add:function(a,b){var c=ta.duration(a,b);return this._milliseconds+=c._milliseconds,this._days+=c._days,this._months+=c._months,this._bubble(),this},subtract:function(a,b){var c=ta.duration(a,b);return this._milliseconds-=c._milliseconds,this._days-=c._days,this._months-=c._months,this._bubble(),this},get:function(a){return a=x(a),this[a.toLowerCase()+"s"]()},as:function(a){var b,c;if(a=x(a),"month"===a||"year"===a)return b=this._days+this._milliseconds/864e5,c=this._months+12*pa(b),"month"===a?c:c/12;switch(b=this._days+qa(this._months/12),a){case"week":return b/7+this._milliseconds/6048e5;case"day":return b+this._milliseconds/864e5;case"hour":return 24*b+this._milliseconds/36e5;case"minute":return 24*b*60+this._milliseconds/6e4;case"second":return 24*b*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*b*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+a)}},lang:ta.fn.lang,locale:ta.fn.locale,toIsoString:f("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var a=Math.abs(this.years()),b=Math.abs(this.months()),c=Math.abs(this.days()),d=Math.abs(this.hours()),e=Math.abs(this.minutes()),f=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(a?a+"Y":"")+(b?b+"M":"")+(c?c+"D":"")+(d||e||f?"T":"")+(d?d+"H":"")+(e?e+"M":"")+(f?f+"S":""):"P0D"},localeData:function(){return this._locale}}),ta.duration.fn.toString=ta.duration.fn.toISOString;for(va in ib)c(ib,va)&&ra(va.toLowerCase());ta.duration.fn.asMilliseconds=function(){return this.as("ms")},ta.duration.fn.asSeconds=function(){return this.as("s")},ta.duration.fn.asMinutes=function(){return this.as("m")},ta.duration.fn.asHours=function(){return this.as("h")},ta.duration.fn.asDays=function(){return this.as("d")},ta.duration.fn.asWeeks=function(){return this.as("weeks")},ta.duration.fn.asMonths=function(){return this.as("M")},ta.duration.fn.asYears=function(){return this.as("y")},ta.locale("en",{ordinal:function(a){var b=a%10,c=1===A(a%100/10)?"th":1===b?"st":2===b?"nd":3===b?"rd":"th";return a+c}}),Ja?module.exports=ta:"function"==typeof define&&define.amd?(define("moment",function(a,b,c){return c.config&&c.config()&&c.config().noGlobal===!0&&(xa.moment=ua),ta}),sa(!0)):sa()}.call(this),function(a,b,d){LTApi.moment.locale("ltw_ru_alt");var e="function"==typeof LTApi.moment,f=!!a.addEventListener,g=a.setTimeout,h=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/.test(navigator.userAgent),i=function(a,b,c,d){var e="click"==b&&LTApi.Utils.is_mobile();f?(b=e?"touchstart":b,a.addEventListener(b,c,!!d)):(b=e?"ontouchstart":b,a.attachEvent("on"+b,c))},j=function(a,b,c,d){f?a.removeEventListener(b,c,!!d):a.detachEvent("on"+b,c)},k=function(a,b){return!!(v(a,b)>=0)},l=function(a){return a.trim?a.trim():a.replace(/^\s+|\s+$/g,"")},m=function(a,b){return new RegExp("\\b"+b+"\\b","i").test(a.className)},n=function(a,b){m(a,b)||(a.className=""===a.className?b:a.className+" "+b)},o=function(a,b){a.className=l((" "+a.className+" ").replace(" "+b+" "," "))},p=function(a){return/Array/.test(Object.prototype.toString.call(a))},q=function(a){return/Date/.test(Object.prototype.toString.call(a))&&!isNaN(a.getTime())},r=function(a){return a%4===0&&a%100!==0||a%400===0},s=function(a,b){return[31,r(a)?29:28,31,30,31,30,31,31,30,31,30,31][b]},t=function(a,b){return a.getTime()===b.getTime()},u=function(a,b,c){var e,f;for(e in b)f=a[e]!==d,f&&"object"==typeof b[e]&&b[e].nodeName===d?q(b[e])?c&&(a[e]=new Date(b[e].getTime())):p(b[e])?c&&(a[e]=b[e].slice(0)):a[e]=u({},b[e],c):(c||!f)&&(a[e]=b[e]);return a},v=function(a,b){if(Array.prototype.indexOf)return Array.prototype.indexOf.call(a,b);for(var c=a.length;--c>-1;)if(a[c]==b)return c;return-1},w=function(a,b,c,d,e,f){var g=LTApi.moment(a);g.subtract({d:3});var h=[g.add({d:1}).format("DDMM"),g.add({d:1}).format("DDMM"),g.add({d:1}).format("DDMM"),g.add({d:1}).format("DDMM"),g.add({d:1}).format("DDMM")],i=LTApi.moment(b).format("DDMM");if(!f)return!1;if((diff=v(h,i))>=0){var j="";switch(diff){case 4:j="2-above";break;case 3:j="1-above";break;case 1:j="1-behind";break;case 0:j="2-behind"}return j}return!1},x={field:null,readOnly:!1,customClass:"",bound:d,format:"YYYY-MM-DD",defaultDate:null,setDefaultDate:!1,firstDay:0,minDate:null,maxDate:null,yearRange:10,disabledDates:[],momentLang:"en",rightSide:!1,flexDates:!1,minYear:0,maxYear:9999,minMonth:d,maxMonth:d,isRTL:!1,numberOfMonths:1,container:d,3:!1,i18n:{months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],weekdays:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],weekdaysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"]},onSelect:null,onOpen:null,onClose:null,onFlexChange:null},y=function(a,b,c){for(b+=a.firstDay;b>=7;)b-=7;return c?a.i18n.weekdaysShort[b]:a.i18n.weekdays[b]},z=function(a,b,c,d,e,f,g){var h=[],i="",j="";return d&&(h.push("is-disabled"),i="disabled"),g&&h.push("is-other-month"),c&&h.push("is-today"),b&&h.push("is-selected"),e&&h.push("is-weekend"),f&&h.push("is-flex flex-"+f),j='<td data-day="'+a+'" class="'+h.join(" ")+'">',j+='<button class="pika-button" type="button" '+i+">"+a+"</button>",j+="</td>"},A=function(a,b){return"<tr>"+(b?a.reverse():a).join("")+"</tr>"},B=function(a){return"<tbody>"+a.join("")+"</tbody>"},C=function(a){var b,c=[];for(b=0;7>b;b++)c.push('<th scope="col"><abbr title="'+y(a,b)+'">'+y(a,b,!0)+"</abbr></th>");return"<thead>"+(a.isRTL?c.reverse():c).join("")+"</thead>"},D=function(a){var b,c,d,e=a._o,f=a._m,g=a._y,h=g===e.minYear,i=g===e.maxYear,j='<div class="pika-title">',k=!0,l=!0;for(d=[],b=0;12>b;b++)d.push('<option value="'+b+'"'+(b===f?" selected":"")+(h&&b<e.minMonth||i&&b>e.maxMonth?"disabled":"")+">"+e.i18n.months[b]+"</option>");for(j+='<div class="pika-label pika-label-month">',j+=e.i18n.months[f],j+='<select class="pika-select pika-select-month">',j+=d.join(""),j+="</select></div>",p(e.yearRange)?(b=e.yearRange[0],c=e.yearRange[1]+1):(b=g-e.yearRange,c=1+g+e.yearRange),d=[];c>b&&b<=e.maxYear;b++)b>=e.minYear&&d.push('<option value="'+b+'"'+(b===g?" selected":"")+">"+b+"</option>");return j+='<div class="pika-label pika-label-year">'+g+'<select class="pika-select pika-select-year">'+d.join("")+"</select></div>",h&&(0===f||e.minMonth>=f)&&(k=!1),i&&(11===f||e.maxMonth<=f)&&(l=!1),j+='<button class="pika-prev'+(k?"":" is-disabled")+'" type="button">Previous Month</button>',j+='<button class="pika-next'+(l?"":" is-disabled")+'" type="button">Next Month</button>',j+="</div>"},E=function(a){var b="";return a.flexDates?(b="<tfoot><tr><td class='pika-flex' colspan='7'>",b+="<label><input type='checkbox' "+(a.isFlexDatesSelected?"checked='checked'":"")+" name='pikaFlexDates'>",b+="±2 дня <span>от даты начала</span></label>",b+="</td></tr></tfoot>"):b},F=function(a,b){return'<table cellpadding="0" cellspacing="0" class="pika-table">'+C(a)+B(b)+E(a)+"</table>"},G=function(d){var h=this,j=h.config(d);h._onMouseDown=function(b){if(h._v){b=b||a.event;var c=b.target||b.srcElement;if(c){if(LTApi.Utils.is_mobile()&&(b.preventDefault(),b.stopPropagation()),!m(c,"is-disabled")&&!m(c,"is-other-month")){if(m(c,"pika-button")&&!m(c,"is-empty")&&!c.disabled)return h.setDate(new Date(h._y,h._m,parseInt(c.innerHTML,10))),void(j.bound&&g(function(){h.hide()},100));m(c,"pika-prev")?h.prevMonth():m(c,"pika-next")&&h.nextMonth()}if(m(c,"pika-select"))h._c=!0;else{if(!b.preventDefault)return b.returnValue=!1;b.preventDefault()}}}},h._onChange=function(b){b=b||a.event;var c=b.target||b.srcElement;c&&(m(c,"pika-select-month")?h.gotoMonth(c.value):m(c,"pika-select-year")&&h.gotoYear(c.value))},h._onInputChange=function(a){if(e)h.setDate(LTApi.moment(j.field.value,j.format).locale(j.momentLang).toDate());else{var b=new Date(Date.parse(j.field.value));h.setDate(q(b)?b:null)}h._v||h.show()},h._onInputFocus=function(a){h.show()},h._onInputClick=function(a){h.show()},h._onInputBlur=function(a){h._c||(h._b=g(function(){h.hide()},50)),h._c=!1},h._onFlexToggle=function(b){b=b||a.event;var c=LTApi.Utils.$(b.target||b.srcElement);(c.is(".pika-flex")||c.closest(".pika-flex").size())&&(b.preventDefault(),b.stopPropagation(),input=c.closest(".pika-flex").find("input[type=checkbox]"),input_dom=input.get(0),input_dom.checked=!(input_dom.checked?!0:!1),j.isFlexDatesSelected=input_dom.checked,h.show(!0),"function"==typeof j.onFlexChange&&j.onFlexChange.call(h,j.isFlexDatesSelected),setTimeout(function(){input.trigger("change")}))},h._onClick=function(b){b=b||a.event;var c=b.target||b.srcElement,d=c,e=LTApi.Utils.$(c).is(".pika-flex label")||LTApi.Utils.$(c).is(".pika-flex input");if(c){!f&&m(c,"pika-select")&&(c.onchange||(c.setAttribute("onchange","return;"),i(c,"change",h._onChange)));do if(m(d,"pika-single"))return;while(d=d.parentNode);h._v&&c!==j.field&&!e&&h.hide()}},is_mobile=LTApi.Utils.is_mobile(),event_name=is_mobile?"touchstart":"mousedown",h.el=b.createElement("div"),h.el.className="lt-pika-single pika-single "+j.customClass+" "+(j.isRTL?" is-rtl":""),i(h.el,event_name,h._onMouseDown,!0),i(h.el,"change",h._onChange),j.flexDates&&i(h.el,event_name,h._onFlexToggle,!0),j.field&&(j.bound?(c=j.container)?c.appendChild(h.el):b.body.appendChild(h.el):j.field.parentNode.insertBefore(h.el,j.field.nextSibling),j.readOnly?j.field.readOnly=!0:i(j.field,"change",h._onInputChange),j.defaultDate||(e&&j.field.value?j.defaultDate=LTApi.moment(j.field.value,j.format).locale(j.momentLang).toDate():j.defaultDate=new Date(Date.parse(j.field.value)),j.setDefaultDate=!0));var k=j.defaultDate;q(k)?j.setDefaultDate?h.setDate(k):h.gotoDate(k):h.gotoDate(new Date),j.bound?(this.hide(),h.el.className+=" is-bound",i(j.field,"click",h._onInputClick),i(j.field,"focus",h._onInputFocus),i(j.field,"blur",h._onInputBlur)):this.show()};G.prototype={config:function(a){this._o||(this._o=u({},x,!0));var b=u(this._o,a,!0);b.isRTL=!!b.isRTL,b.field=b.field&&b.field.nodeName?b.field:null,b.bound=!!(b.bound!==d?b.field&&b.bound:b.field);var c=parseInt(b.numberOfMonths,10)||1;if(b.numberOfMonths=c>4?4:c,q(b.minDate)||(b.minDate=!1),q(b.maxDate)||(b.maxDate=!1),b.minDate&&b.maxDate&&b.maxDate<b.minDate&&(b.maxDate=b.minDate=!1),b.minDate&&(b.minYear=b.minDate.getFullYear(),b.minMonth=b.minDate.getMonth()),b.maxDate&&(b.maxYear=b.maxDate.getFullYear(),b.maxMonth=b.maxDate.getMonth()),p(b.yearRange)){var e=(new Date).getFullYear()-10;b.yearRange[0]=parseInt(b.yearRange[0],10)||e,b.yearRange[1]=parseInt(b.yearRange[1],10)||e}else b.yearRange=Math.abs(parseInt(b.yearRange,10))||x.yearRange,b.yearRange>100&&(b.yearRange=100);return b},toString:function(a){return q(this._d)?e?LTApi.moment(this._d).locale(this._o.momentLang).format(a||this._o.format):this._d.toDateString():""},getMoment:function(){return e?LTApi.moment(this._d):null},getDate:function(){return q(this._d)?new Date(this._d.getTime()):null},isFlex:function(){return this._o.isFlexDatesSelected},setDate:function(a){if(!a)return this._d=null,this.draw();if("string"==typeof a&&(a=new Date(Date.parse(a))),q(a)){var b=this._o.minDate,c=this._o.maxDate;q(b)&&b>a?a=b:q(c)&&a>c&&(a=c),this._d=new Date(a.getTime()),this._d.setHours(0,0,0,0),this.gotoDate(this._d),this._o.field&&(this._o.field.value=this.toString()),"function"==typeof this._o.onSelect&&this._o.onSelect.call(this,this.getDate())}},gotoDate:function(a){q(a)&&(this._y=a.getFullYear(),this._m=a.getMonth(),this.draw())},gotoToday:function(){this.gotoDate(new Date)},gotoMonth:function(a){isNaN(a=parseInt(a,10))||(this._m=0>a?0:a>11?11:a,this.draw())},nextMonth:function(){++this._m>11&&(this._m=0,this._y++),this.draw()},prevMonth:function(){--this._m<0&&(this._m=11,this._y--),this.draw()},gotoYear:function(a){isNaN(a)||(this._y=parseInt(a,10),this.draw())},draw:function(a){if(this._v||a){var b=this._o,c=b.minYear,d=b.maxYear,e=b.minMonth,f=b.maxMonth;if(this._y<=c&&(this._y=c,!isNaN(e)&&this._m<e&&(this._m=e)),this._y>=d&&(this._y=d,!isNaN(f)&&this._m>f&&(this._m=f)),this.el.innerHTML=D(this)+this.render(this._y,this._m),b.bound){for(var h=b.field,i=h.offsetLeft,j=h.offsetTop+h.offsetHeight;h=h.offsetParent;)i+=h.offsetLeft,j+=h.offsetTop;j=LTApi.Utils.$(b.field).offset().top+LTApi.Utils.$(b.field).outerHeight(!1),b.rightSide&&(i=LTApi.Utils.$(b.field).outerWidth(!1)+LTApi.Utils.$(b.field).offset().left-LTApi.Utils.$(this.el).width()),b.centered&&(half_width=LTApi.Utils.$(b.field).outerWidth(!1)/2,i=i+half_width-LTApi.Utils.$(this.el).outerWidth(!1)/2),this.el.style.cssText="position:absolute;left:"+i+"px;top:"+j+"px;",g(function(){b.field.focus()},1)}}},render:function(a,b){var c=this._o,d=new Date,e=s(a,b),f=new Date(a,b,1).getDay(),g=[],h=[];d.setHours(0,0,0,0),c.firstDay>0&&(f-=c.firstDay,0>f&&(f+=7));for(var i=e+f,j=i;j>7;)j-=7;i+=7-j;for(var l=0,m=0;i>l;l++){var n=new Date(a,b,1+(l-f)),o=c.disabledDates,p=k(o,n)||k(o,n+""),r=c.minDate&&n<c.minDate||c.maxDate&&n>c.maxDate||p,u=q(this._d)?t(n,this._d):!1,v=t(n,d),x=b!=n.getMonth(),y=Math.abs(n.getDay())%6==0,B=w(this._d,n,b,x,u,c.isFlexDatesSelected);h.push(z(n.getDate(),u,v,r,y,B,x)),7===++m&&(g.push(A(h,c.isRTL)),h=[],m=0)}return F(c,g)},isVisible:function(){return this._v},show:function(a){this._v&&a!==!0||(this._o.bound&&(h?i(b,"click",this._onMouseDown):i(b,"click",this._onClick)),o(this.el,"is-hidden"),this._v=!0,this.draw(),"function"==typeof this._o.onOpen&&this._o.onOpen.call(this))},hide:function(){var a=this._v;a!==!1&&(this._o.bound&&(h?j(b,"click",this._onMouseDown):j(b,"click",this._onClick)),this.el.style.cssText="",n(this.el,"is-hidden"),this._v=!1,a!==d&&"function"==typeof this._o.onClose&&this._o.onClose.call(this))},destroy:function(){this.hide(),j(this.el,"mousedown",this._onMouseDown,!0),j(this.el,"change",this._onChange),this._o.field&&(j(this._o.field,"change",this._onInputChange),this._o.bound&&(j(this._o.field,"click",this._onInputClick),j(this._o.field,"focus",this._onInputFocus),j(this._o.field,"blur",this._onInputBlur))),this.el.parentNode&&this.el.parentNode.removeChild(this.el)}},LTApi.Utils.Pikaday=G}(window,window.document),function(a,b){"function"==typeof define&&define.amd?define([],b):"object"==typeof exports?module.exports=b():a.Handlebars=a.Handlebars||b()}(LTApi,function(){var a=function(){"use strict";function a(a){this.string=a}var b;return a.prototype.toString=function(){return""+this.string},b=a}(),b=function(a){"use strict";function b(a){return i[a]}function c(a){for(var b=1;b<arguments.length;b++)for(var c in arguments[b])Object.prototype.hasOwnProperty.call(arguments[b],c)&&(a[c]=arguments[b][c]);return a}function d(a){return a instanceof h?a.toString():null==a?"":a?(a=""+a,k.test(a)?a.replace(j,b):a):a+""}function e(a){return a||0===a?n(a)&&0===a.length?!0:!1:!0}function f(a,b){return(a?a+".":"")+b}var g={},h=a,i={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},j=/[&<>"'`]/g,k=/[&<>"'`]/;g.extend=c;var l=Object.prototype.toString;g.toString=l;var m=function(a){return"function"==typeof a};m(/x/)&&(m=function(a){return"function"==typeof a&&"[object Function]"===l.call(a)});var m;g.isFunction=m;var n=Array.isArray||function(a){return a&&"object"==typeof a?"[object Array]"===l.call(a):!1};return g.isArray=n,g.escapeExpression=d,g.isEmpty=e,g.appendContextPath=f,g}(a),c=function(){"use strict";function a(a,b){var d;b&&b.firstLine&&(d=b.firstLine,a+=" - "+d+":"+b.firstColumn);for(var e=Error.prototype.constructor.call(this,a),f=0;f<c.length;f++)this[c[f]]=e[c[f]];d&&(this.lineNumber=d,this.column=b.firstColumn)}var b,c=["description","fileName","lineNumber","message","name","number","stack"];return a.prototype=new Error,b=a}(),d=function(a,b){"use strict";function c(a,b){this.helpers=a||{},this.partials=b||{},d(this)}function d(a){a.registerHelper("helperMissing",function(){if(1===arguments.length)return void 0;throw new g("Missing helper: '"+arguments[arguments.length-1].name+"'")}),a.registerHelper("blockHelperMissing",function(b,c){var d=c.inverse,e=c.fn;if(b===!0)return e(this);if(b===!1||null==b)return d(this);if(k(b))return b.length>0?(c.ids&&(c.ids=[c.name]),a.helpers.each(b,c)):d(this);if(c.data&&c.ids){var g=q(c.data);g.contextPath=f.appendContextPath(c.data.contextPath,c.name),c={data:g}}return e(b,c)}),a.registerHelper("each",function(a,b){if(!b)throw new g("Must pass iterator to #each");var c,d,e=b.fn,h=b.inverse,i=0,j="";if(b.data&&b.ids&&(d=f.appendContextPath(b.data.contextPath,b.ids[0])+"."),l(a)&&(a=a.call(this)),b.data&&(c=q(b.data)),a&&"object"==typeof a)if(k(a))for(var m=a.length;m>i;i++)c&&(c.index=i,c.first=0===i,c.last=i===a.length-1,d&&(c.contextPath=d+i)),j+=e(a[i],{data:c});else for(var n in a)a.hasOwnProperty(n)&&(c&&(c.key=n,c.index=i,c.first=0===i,d&&(c.contextPath=d+n)),j+=e(a[n],{data:c}),i++);return 0===i&&(j=h(this)),j}),a.registerHelper("if",function(a,b){return l(a)&&(a=a.call(this)),!b.hash.includeZero&&!a||f.isEmpty(a)?b.inverse(this):b.fn(this)}),a.registerHelper("unless",function(b,c){return a.helpers["if"].call(this,b,{fn:c.inverse,inverse:c.fn,hash:c.hash})}),a.registerHelper("with",function(a,b){l(a)&&(a=a.call(this));var c=b.fn;if(f.isEmpty(a))return b.inverse(this);if(b.data&&b.ids){var d=q(b.data);d.contextPath=f.appendContextPath(b.data.contextPath,b.ids[0]),b={data:d}}return c(a,b)}),a.registerHelper("log",function(b,c){var d=c.data&&null!=c.data.level?parseInt(c.data.level,10):1;a.log(d,b)}),a.registerHelper("lookup",function(a,b){return a&&a[b]})}var e={},f=a,g=b,h="2.0.0";e.VERSION=h;var i=6;e.COMPILER_REVISION=i;var j={1:"<= 1.0.rc.2",2:"== 1.0.0-rc.3",3:"== 1.0.0-rc.4",4:"== 1.x.x",5:"== 2.0.0-alpha.x",6:">= 2.0.0-beta.1"};e.REVISION_CHANGES=j;var k=f.isArray,l=f.isFunction,m=f.toString,n="[object Object]";e.HandlebarsEnvironment=c,c.prototype={constructor:c,logger:o,log:p,registerHelper:function(a,b){if(m.call(a)===n){if(b)throw new g("Arg not supported with multiple helpers");f.extend(this.helpers,a)}else this.helpers[a]=b},unregisterHelper:function(a){delete this.helpers[a]},registerPartial:function(a,b){m.call(a)===n?f.extend(this.partials,a):this.partials[a]=b},unregisterPartial:function(a){delete this.partials[a]}};var o={methodMap:{0:"debug",1:"info",2:"warn",3:"error"},DEBUG:0,INFO:1,WARN:2,ERROR:3,level:3,log:function(a,b){if(o.level<=a){var c=o.methodMap[a];"undefined"!=typeof console&&console[c]&&console[c].call(console,b)}}};e.logger=o;var p=o.log;e.log=p;var q=function(a){var b=f.extend({},a);return b._parent=a,b};return e.createFrame=q,e}(b,c),e=function(a,b,c){"use strict";function d(a){var b=a&&a[0]||1,c=m;if(b!==c){if(c>b){var d=n[c],e=n[b];throw new l("Template was precompiled with an older version of Handlebars than the current runtime. Please update your precompiler to a newer version ("+d+") or downgrade your runtime to an older version ("+e+").")}throw new l("Template was precompiled with a newer version of Handlebars than the current runtime. Please update your runtime to a newer version ("+a[1]+").")}}function e(a,b){if(!b)throw new l("No environment passed to template");if(!a||!a.main)throw new l("Unknown template object: "+typeof a);b.VM.checkRevision(a.compiler);var c=function(c,d,e,f,g,h,i,j,m){g&&(f=k.extend({},f,g));var n=b.VM.invokePartial.call(this,c,e,f,h,i,j,m);if(null==n&&b.compile){var o={helpers:h,partials:i,data:j,depths:m};i[e]=b.compile(c,{data:void 0!==j,compat:a.compat},b),n=i[e](f,o)}if(null!=n){if(d){for(var p=n.split("\n"),q=0,r=p.length;r>q&&(p[q]||q+1!==r);q++)p[q]=d+p[q];n=p.join("\n")}return n}throw new l("The partial "+e+" could not be compiled when running in runtime-only mode")},d={lookup:function(a,b){for(var c=a.length,d=0;c>d;d++)if(a[d]&&null!=a[d][b])return a[d][b]},lambda:function(a,b){return"function"==typeof a?a.call(b):a},escapeExpression:k.escapeExpression,invokePartial:c,fn:function(b){return a[b]},programs:[],program:function(a,b,c){var d=this.programs[a],e=this.fn(a);return b||c?d=f(this,a,e,b,c):d||(d=this.programs[a]=f(this,a,e)),d},data:function(a,b){for(;a&&b--;)a=a._parent;return a},merge:function(a,b){var c=a||b;return a&&b&&a!==b&&(c=k.extend({},b,a)),c},noop:b.VM.noop,compilerInfo:a.compiler},e=function(b,c){c=c||{};var f=c.data;e._setup(c),!c.partial&&a.useData&&(f=i(b,f));var g;return a.useDepths&&(g=c.depths?[b].concat(c.depths):[b]),a.main.call(d,b,d.helpers,d.partials,f,g)};return e.isTop=!0,e._setup=function(c){c.partial?(d.helpers=c.helpers,d.partials=c.partials):(d.helpers=d.merge(c.helpers,b.helpers),a.usePartial&&(d.partials=d.merge(c.partials,b.partials)))},e._child=function(b,c,e){if(a.useDepths&&!e)throw new l("must pass parent depths");return f(d,b,a[b],c,e)},e}function f(a,b,c,d,e){var f=function(b,f){return f=f||{},c.call(a,b,a.helpers,a.partials,f.data||d,e&&[b].concat(e))};return f.program=b,f.depth=e?e.length:0,f}function g(a,b,c,d,e,f,g){var h={partial:!0,helpers:d,partials:e,data:f,depths:g};if(void 0===a)throw new l("The partial "+b+" could not be found");return a instanceof Function?a(c,h):void 0}function h(){return""}function i(a,b){return b&&"root"in b||(b=b?o(b):{},b.root=a),b}var j={},k=a,l=b,m=c.COMPILER_REVISION,n=c.REVISION_CHANGES,o=c.createFrame;return j.checkRevision=d,j.template=e,j.program=f,j.invokePartial=g,j.noop=h,j}(b,c,d),f=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c,j=d,k=e,l=function(){var a=new g.HandlebarsEnvironment;return j.extend(a,g),a.SafeString=h,a.Exception=i,a.Utils=j,a.escapeExpression=j.escapeExpression,a.VM=k,a.template=function(b){return k.template(b,a)},a},m=l();return m.create=l,m["default"]=m,f=m}(d,a,c,b,e),g=function(a){"use strict";function b(a){a=a||{},this.firstLine=a.first_line,this.firstColumn=a.first_column,this.lastColumn=a.last_column,this.lastLine=a.last_line}var c,d=a,e={ProgramNode:function(a,c,d){b.call(this,d),this.type="program",this.statements=a,this.strip=c},MustacheNode:function(a,c,d,f,g){if(b.call(this,g),this.type="mustache",this.strip=f,null!=d&&d.charAt){var h=d.charAt(3)||d.charAt(2);this.escaped="{"!==h&&"&"!==h}else this.escaped=!!d;a instanceof e.SexprNode?this.sexpr=a:this.sexpr=new e.SexprNode(a,c),this.id=this.sexpr.id,this.params=this.sexpr.params,this.hash=this.sexpr.hash,this.eligibleHelper=this.sexpr.eligibleHelper,this.isHelper=this.sexpr.isHelper},SexprNode:function(a,c,d){b.call(this,d),this.type="sexpr",this.hash=c;var e=this.id=a[0],f=this.params=a.slice(1);this.isHelper=!(!f.length&&!c),this.eligibleHelper=this.isHelper||e.isSimple},PartialNode:function(a,c,d,e,f){b.call(this,f),this.type="partial",this.partialName=a,this.context=c,this.hash=d,this.strip=e,this.strip.inlineStandalone=!0},BlockNode:function(a,c,d,e,f){b.call(this,f),this.type="block",this.mustache=a,this.program=c,this.inverse=d,this.strip=e,d&&!c&&(this.isInverse=!0)},RawBlockNode:function(a,c,f,g){if(b.call(this,g),a.sexpr.id.original!==f)throw new d(a.sexpr.id.original+" doesn't match "+f,this);c=new e.ContentNode(c,g),this.type="block",this.mustache=a,this.program=new e.ProgramNode([c],{},g)},ContentNode:function(a,c){b.call(this,c),this.type="content",this.original=this.string=a},HashNode:function(a,c){b.call(this,c),this.type="hash",this.pairs=a},IdNode:function(a,c){b.call(this,c),this.type="ID";for(var e="",f=[],g=0,h="",i=0,j=a.length;j>i;i++){var k=a[i].part;if(e+=(a[i].separator||"")+k,".."===k||"."===k||"this"===k){if(f.length>0)throw new d("Invalid path: "+e,this);".."===k?(g++,h+="../"):this.isScoped=!0}else f.push(k)}this.original=e,this.parts=f,this.string=f.join("."),this.depth=g,this.idName=h+this.string,this.isSimple=1===a.length&&!this.isScoped&&0===g,this.stringModeValue=this.string},PartialNameNode:function(a,c){b.call(this,c),this.type="PARTIAL_NAME",this.name=a.original},DataNode:function(a,c){b.call(this,c),this.type="DATA",this.id=a,this.stringModeValue=a.stringModeValue,this.idName="@"+a.stringModeValue},StringNode:function(a,c){b.call(this,c),this.type="STRING",this.original=this.string=this.stringModeValue=a},NumberNode:function(a,c){b.call(this,c),this.type="NUMBER",this.original=this.number=a,this.stringModeValue=Number(a)},BooleanNode:function(a,c){b.call(this,c),this.type="BOOLEAN",this.bool=a,this.stringModeValue="true"===a},CommentNode:function(a,c){b.call(this,c),this.type="comment",this.comment=a,this.strip={inlineStandalone:!0}}};return c=e}(c),h=function(){"use strict";var a,b=function(){function a(){this.yy={}}var b={trace:function(){},yy:{},symbols_:{error:2,root:3,program:4,EOF:5,program_repetition0:6,statement:7,mustache:8,block:9,rawBlock:10,partial:11,CONTENT:12,COMMENT:13,openRawBlock:14,END_RAW_BLOCK:15,OPEN_RAW_BLOCK:16,sexpr:17,CLOSE_RAW_BLOCK:18,openBlock:19,block_option0:20,closeBlock:21,openInverse:22,block_option1:23,OPEN_BLOCK:24,CLOSE:25,OPEN_INVERSE:26,inverseAndProgram:27,INVERSE:28,OPEN_ENDBLOCK:29,path:30,OPEN:31,OPEN_UNESCAPED:32,CLOSE_UNESCAPED:33,OPEN_PARTIAL:34,partialName:35,
param:36,partial_option0:37,partial_option1:38,sexpr_repetition0:39,sexpr_option0:40,dataName:41,STRING:42,NUMBER:43,BOOLEAN:44,OPEN_SEXPR:45,CLOSE_SEXPR:46,hash:47,hash_repetition_plus0:48,hashSegment:49,ID:50,EQUALS:51,DATA:52,pathSegments:53,SEP:54,$accept:0,$end:1},terminals_:{2:"error",5:"EOF",12:"CONTENT",13:"COMMENT",15:"END_RAW_BLOCK",16:"OPEN_RAW_BLOCK",18:"CLOSE_RAW_BLOCK",24:"OPEN_BLOCK",25:"CLOSE",26:"OPEN_INVERSE",28:"INVERSE",29:"OPEN_ENDBLOCK",31:"OPEN",32:"OPEN_UNESCAPED",33:"CLOSE_UNESCAPED",34:"OPEN_PARTIAL",42:"STRING",43:"NUMBER",44:"BOOLEAN",45:"OPEN_SEXPR",46:"CLOSE_SEXPR",50:"ID",51:"EQUALS",52:"DATA",54:"SEP"},productions_:[0,[3,2],[4,1],[7,1],[7,1],[7,1],[7,1],[7,1],[7,1],[10,3],[14,3],[9,4],[9,4],[19,3],[22,3],[27,2],[21,3],[8,3],[8,3],[11,5],[11,4],[17,3],[17,1],[36,1],[36,1],[36,1],[36,1],[36,1],[36,3],[47,1],[49,3],[35,1],[35,1],[35,1],[41,2],[30,1],[53,3],[53,1],[6,0],[6,2],[20,0],[20,1],[23,0],[23,1],[37,0],[37,1],[38,0],[38,1],[39,0],[39,2],[40,0],[40,1],[48,1],[48,2]],performAction:function(a,b,c,d,e,f,g){var h=f.length-1;switch(e){case 1:return d.prepareProgram(f[h-1].statements,!0),f[h-1];case 2:this.$=new d.ProgramNode(d.prepareProgram(f[h]),{},this._$);break;case 3:this.$=f[h];break;case 4:this.$=f[h];break;case 5:this.$=f[h];break;case 6:this.$=f[h];break;case 7:this.$=new d.ContentNode(f[h],this._$);break;case 8:this.$=new d.CommentNode(f[h],this._$);break;case 9:this.$=new d.RawBlockNode(f[h-2],f[h-1],f[h],this._$);break;case 10:this.$=new d.MustacheNode(f[h-1],null,"","",this._$);break;case 11:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!1,this._$);break;case 12:this.$=d.prepareBlock(f[h-3],f[h-2],f[h-1],f[h],!0,this._$);break;case 13:this.$=new d.MustacheNode(f[h-1],null,f[h-2],d.stripFlags(f[h-2],f[h]),this._$);break;case 14:this.$=new d.MustacheNode(f[h-1],null,f[h-2],d.stripFlags(f[h-2],f[h]),this._$);break;case 15:this.$={strip:d.stripFlags(f[h-1],f[h-1]),program:f[h]};break;case 16:this.$={path:f[h-1],strip:d.stripFlags(f[h-2],f[h])};break;case 17:this.$=new d.MustacheNode(f[h-1],null,f[h-2],d.stripFlags(f[h-2],f[h]),this._$);break;case 18:this.$=new d.MustacheNode(f[h-1],null,f[h-2],d.stripFlags(f[h-2],f[h]),this._$);break;case 19:this.$=new d.PartialNode(f[h-3],f[h-2],f[h-1],d.stripFlags(f[h-4],f[h]),this._$);break;case 20:this.$=new d.PartialNode(f[h-2],void 0,f[h-1],d.stripFlags(f[h-3],f[h]),this._$);break;case 21:this.$=new d.SexprNode([f[h-2]].concat(f[h-1]),f[h],this._$);break;case 22:this.$=new d.SexprNode([f[h]],null,this._$);break;case 23:this.$=f[h];break;case 24:this.$=new d.StringNode(f[h],this._$);break;case 25:this.$=new d.NumberNode(f[h],this._$);break;case 26:this.$=new d.BooleanNode(f[h],this._$);break;case 27:this.$=f[h];break;case 28:f[h-1].isHelper=!0,this.$=f[h-1];break;case 29:this.$=new d.HashNode(f[h],this._$);break;case 30:this.$=[f[h-2],f[h]];break;case 31:this.$=new d.PartialNameNode(f[h],this._$);break;case 32:this.$=new d.PartialNameNode(new d.StringNode(f[h],this._$),this._$);break;case 33:this.$=new d.PartialNameNode(new d.NumberNode(f[h],this._$));break;case 34:this.$=new d.DataNode(f[h],this._$);break;case 35:this.$=new d.IdNode(f[h],this._$);break;case 36:f[h-2].push({part:f[h],separator:f[h-1]}),this.$=f[h-2];break;case 37:this.$=[{part:f[h]}];break;case 38:this.$=[];break;case 39:f[h-1].push(f[h]);break;case 48:this.$=[];break;case 49:f[h-1].push(f[h]);break;case 52:this.$=[f[h]];break;case 53:f[h-1].push(f[h])}},table:[{3:1,4:2,5:[2,38],6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],31:[2,38],32:[2,38],34:[2,38]},{1:[3]},{5:[1,4]},{5:[2,2],7:5,8:6,9:7,10:8,11:9,12:[1,10],13:[1,11],14:16,16:[1,20],19:14,22:15,24:[1,18],26:[1,19],28:[2,2],29:[2,2],31:[1,12],32:[1,13],34:[1,17]},{1:[2,1]},{5:[2,39],12:[2,39],13:[2,39],16:[2,39],24:[2,39],26:[2,39],28:[2,39],29:[2,39],31:[2,39],32:[2,39],34:[2,39]},{5:[2,3],12:[2,3],13:[2,3],16:[2,3],24:[2,3],26:[2,3],28:[2,3],29:[2,3],31:[2,3],32:[2,3],34:[2,3]},{5:[2,4],12:[2,4],13:[2,4],16:[2,4],24:[2,4],26:[2,4],28:[2,4],29:[2,4],31:[2,4],32:[2,4],34:[2,4]},{5:[2,5],12:[2,5],13:[2,5],16:[2,5],24:[2,5],26:[2,5],28:[2,5],29:[2,5],31:[2,5],32:[2,5],34:[2,5]},{5:[2,6],12:[2,6],13:[2,6],16:[2,6],24:[2,6],26:[2,6],28:[2,6],29:[2,6],31:[2,6],32:[2,6],34:[2,6]},{5:[2,7],12:[2,7],13:[2,7],16:[2,7],24:[2,7],26:[2,7],28:[2,7],29:[2,7],31:[2,7],32:[2,7],34:[2,7]},{5:[2,8],12:[2,8],13:[2,8],16:[2,8],24:[2,8],26:[2,8],28:[2,8],29:[2,8],31:[2,8],32:[2,8],34:[2,8]},{17:21,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:27,30:22,41:23,50:[1,26],52:[1,25],53:24},{4:28,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{4:29,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],28:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{12:[1,30]},{30:32,35:31,42:[1,33],43:[1,34],50:[1,26],53:24},{17:35,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:36,30:22,41:23,50:[1,26],52:[1,25],53:24},{17:37,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[1,38]},{18:[2,48],25:[2,48],33:[2,48],39:39,42:[2,48],43:[2,48],44:[2,48],45:[2,48],46:[2,48],50:[2,48],52:[2,48]},{18:[2,22],25:[2,22],33:[2,22],46:[2,22]},{18:[2,35],25:[2,35],33:[2,35],42:[2,35],43:[2,35],44:[2,35],45:[2,35],46:[2,35],50:[2,35],52:[2,35],54:[1,40]},{30:41,50:[1,26],53:24},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],52:[2,37],54:[2,37]},{33:[1,42]},{20:43,27:44,28:[1,45],29:[2,40]},{23:46,27:47,28:[1,45],29:[2,42]},{15:[1,48]},{25:[2,46],30:51,36:49,38:50,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],47:57,48:58,49:60,50:[1,59],52:[1,25],53:24},{25:[2,31],42:[2,31],43:[2,31],44:[2,31],45:[2,31],50:[2,31],52:[2,31]},{25:[2,32],42:[2,32],43:[2,32],44:[2,32],45:[2,32],50:[2,32],52:[2,32]},{25:[2,33],42:[2,33],43:[2,33],44:[2,33],45:[2,33],50:[2,33],52:[2,33]},{25:[1,61]},{25:[1,62]},{18:[1,63]},{5:[2,17],12:[2,17],13:[2,17],16:[2,17],24:[2,17],26:[2,17],28:[2,17],29:[2,17],31:[2,17],32:[2,17],34:[2,17]},{18:[2,50],25:[2,50],30:51,33:[2,50],36:65,40:64,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],46:[2,50],47:66,48:58,49:60,50:[1,59],52:[1,25],53:24},{50:[1,67]},{18:[2,34],25:[2,34],33:[2,34],42:[2,34],43:[2,34],44:[2,34],45:[2,34],46:[2,34],50:[2,34],52:[2,34]},{5:[2,18],12:[2,18],13:[2,18],16:[2,18],24:[2,18],26:[2,18],28:[2,18],29:[2,18],31:[2,18],32:[2,18],34:[2,18]},{21:68,29:[1,69]},{29:[2,41]},{4:70,6:3,12:[2,38],13:[2,38],16:[2,38],24:[2,38],26:[2,38],29:[2,38],31:[2,38],32:[2,38],34:[2,38]},{21:71,29:[1,69]},{29:[2,43]},{5:[2,9],12:[2,9],13:[2,9],16:[2,9],24:[2,9],26:[2,9],28:[2,9],29:[2,9],31:[2,9],32:[2,9],34:[2,9]},{25:[2,44],37:72,47:73,48:58,49:60,50:[1,74]},{25:[1,75]},{18:[2,23],25:[2,23],33:[2,23],42:[2,23],43:[2,23],44:[2,23],45:[2,23],46:[2,23],50:[2,23],52:[2,23]},{18:[2,24],25:[2,24],33:[2,24],42:[2,24],43:[2,24],44:[2,24],45:[2,24],46:[2,24],50:[2,24],52:[2,24]},{18:[2,25],25:[2,25],33:[2,25],42:[2,25],43:[2,25],44:[2,25],45:[2,25],46:[2,25],50:[2,25],52:[2,25]},{18:[2,26],25:[2,26],33:[2,26],42:[2,26],43:[2,26],44:[2,26],45:[2,26],46:[2,26],50:[2,26],52:[2,26]},{18:[2,27],25:[2,27],33:[2,27],42:[2,27],43:[2,27],44:[2,27],45:[2,27],46:[2,27],50:[2,27],52:[2,27]},{17:76,30:22,41:23,50:[1,26],52:[1,25],53:24},{25:[2,47]},{18:[2,29],25:[2,29],33:[2,29],46:[2,29],49:77,50:[1,74]},{18:[2,37],25:[2,37],33:[2,37],42:[2,37],43:[2,37],44:[2,37],45:[2,37],46:[2,37],50:[2,37],51:[1,78],52:[2,37],54:[2,37]},{18:[2,52],25:[2,52],33:[2,52],46:[2,52],50:[2,52]},{12:[2,13],13:[2,13],16:[2,13],24:[2,13],26:[2,13],28:[2,13],29:[2,13],31:[2,13],32:[2,13],34:[2,13]},{12:[2,14],13:[2,14],16:[2,14],24:[2,14],26:[2,14],28:[2,14],29:[2,14],31:[2,14],32:[2,14],34:[2,14]},{12:[2,10]},{18:[2,21],25:[2,21],33:[2,21],46:[2,21]},{18:[2,49],25:[2,49],33:[2,49],42:[2,49],43:[2,49],44:[2,49],45:[2,49],46:[2,49],50:[2,49],52:[2,49]},{18:[2,51],25:[2,51],33:[2,51],46:[2,51]},{18:[2,36],25:[2,36],33:[2,36],42:[2,36],43:[2,36],44:[2,36],45:[2,36],46:[2,36],50:[2,36],52:[2,36],54:[2,36]},{5:[2,11],12:[2,11],13:[2,11],16:[2,11],24:[2,11],26:[2,11],28:[2,11],29:[2,11],31:[2,11],32:[2,11],34:[2,11]},{30:79,50:[1,26],53:24},{29:[2,15]},{5:[2,12],12:[2,12],13:[2,12],16:[2,12],24:[2,12],26:[2,12],28:[2,12],29:[2,12],31:[2,12],32:[2,12],34:[2,12]},{25:[1,80]},{25:[2,45]},{51:[1,78]},{5:[2,20],12:[2,20],13:[2,20],16:[2,20],24:[2,20],26:[2,20],28:[2,20],29:[2,20],31:[2,20],32:[2,20],34:[2,20]},{46:[1,81]},{18:[2,53],25:[2,53],33:[2,53],46:[2,53],50:[2,53]},{30:51,36:82,41:55,42:[1,52],43:[1,53],44:[1,54],45:[1,56],50:[1,26],52:[1,25],53:24},{25:[1,83]},{5:[2,19],12:[2,19],13:[2,19],16:[2,19],24:[2,19],26:[2,19],28:[2,19],29:[2,19],31:[2,19],32:[2,19],34:[2,19]},{18:[2,28],25:[2,28],33:[2,28],42:[2,28],43:[2,28],44:[2,28],45:[2,28],46:[2,28],50:[2,28],52:[2,28]},{18:[2,30],25:[2,30],33:[2,30],46:[2,30],50:[2,30]},{5:[2,16],12:[2,16],13:[2,16],16:[2,16],24:[2,16],26:[2,16],28:[2,16],29:[2,16],31:[2,16],32:[2,16],34:[2,16]}],defaultActions:{4:[2,1],44:[2,41],47:[2,43],57:[2,47],63:[2,10],70:[2,15],73:[2,45]},parseError:function(a,b){throw new Error(a)},parse:function(a){function b(){var a;return a=c.lexer.lex()||1,"number"!=typeof a&&(a=c.symbols_[a]||a),a}var c=this,d=[0],e=[null],f=[],g=this.table,h="",i=0,j=0,k=0;this.lexer.setInput(a),this.lexer.yy=this.yy,this.yy.lexer=this.lexer,this.yy.parser=this,"undefined"==typeof this.lexer.yylloc&&(this.lexer.yylloc={});var l=this.lexer.yylloc;f.push(l);var m=this.lexer.options&&this.lexer.options.ranges;"function"==typeof this.yy.parseError&&(this.parseError=this.yy.parseError);for(var n,o,p,q,r,s,t,u,v,w={};;){if(p=d[d.length-1],this.defaultActions[p]?q=this.defaultActions[p]:((null===n||"undefined"==typeof n)&&(n=b()),q=g[p]&&g[p][n]),"undefined"==typeof q||!q.length||!q[0]){var x="";if(!k){v=[];for(s in g[p])this.terminals_[s]&&s>2&&v.push("'"+this.terminals_[s]+"'");x=this.lexer.showPosition?"Parse error on line "+(i+1)+":\n"+this.lexer.showPosition()+"\nExpecting "+v.join(", ")+", got '"+(this.terminals_[n]||n)+"'":"Parse error on line "+(i+1)+": Unexpected "+(1==n?"end of input":"'"+(this.terminals_[n]||n)+"'"),this.parseError(x,{text:this.lexer.match,token:this.terminals_[n]||n,line:this.lexer.yylineno,loc:l,expected:v})}}if(q[0]instanceof Array&&q.length>1)throw new Error("Parse Error: multiple actions possible at state: "+p+", token: "+n);switch(q[0]){case 1:d.push(n),e.push(this.lexer.yytext),f.push(this.lexer.yylloc),d.push(q[1]),n=null,o?(n=o,o=null):(j=this.lexer.yyleng,h=this.lexer.yytext,i=this.lexer.yylineno,l=this.lexer.yylloc,k>0&&k--);break;case 2:if(t=this.productions_[q[1]][1],w.$=e[e.length-t],w._$={first_line:f[f.length-(t||1)].first_line,last_line:f[f.length-1].last_line,first_column:f[f.length-(t||1)].first_column,last_column:f[f.length-1].last_column},m&&(w._$.range=[f[f.length-(t||1)].range[0],f[f.length-1].range[1]]),r=this.performAction.call(w,h,j,i,this.yy,q[1],e,f),"undefined"!=typeof r)return r;t&&(d=d.slice(0,-1*t*2),e=e.slice(0,-1*t),f=f.slice(0,-1*t)),d.push(this.productions_[q[1]][0]),e.push(w.$),f.push(w._$),u=g[d[d.length-2]][d[d.length-1]],d.push(u);break;case 3:return!0}}return!0}},c=function(){var a={EOF:1,parseError:function(a,b){if(!this.yy.parser)throw new Error(a);this.yy.parser.parseError(a,b)},setInput:function(a){return this._input=a,this._more=this._less=this.done=!1,this.yylineno=this.yyleng=0,this.yytext=this.matched=this.match="",this.conditionStack=["INITIAL"],this.yylloc={first_line:1,first_column:0,last_line:1,last_column:0},this.options.ranges&&(this.yylloc.range=[0,0]),this.offset=0,this},input:function(){var a=this._input[0];this.yytext+=a,this.yyleng++,this.offset++,this.match+=a,this.matched+=a;var b=a.match(/(?:\r\n?|\n).*/g);return b?(this.yylineno++,this.yylloc.last_line++):this.yylloc.last_column++,this.options.ranges&&this.yylloc.range[1]++,this._input=this._input.slice(1),a},unput:function(a){var b=a.length,c=a.split(/(?:\r\n?|\n)/g);this._input=a+this._input,this.yytext=this.yytext.substr(0,this.yytext.length-b-1),this.offset-=b;var d=this.match.split(/(?:\r\n?|\n)/g);this.match=this.match.substr(0,this.match.length-1),this.matched=this.matched.substr(0,this.matched.length-1),c.length-1&&(this.yylineno-=c.length-1);var e=this.yylloc.range;return this.yylloc={first_line:this.yylloc.first_line,last_line:this.yylineno+1,first_column:this.yylloc.first_column,last_column:c?(c.length===d.length?this.yylloc.first_column:0)+d[d.length-c.length].length-c[0].length:this.yylloc.first_column-b},this.options.ranges&&(this.yylloc.range=[e[0],e[0]+this.yyleng-b]),this},more:function(){return this._more=!0,this},less:function(a){this.unput(this.match.slice(a))},pastInput:function(){var a=this.matched.substr(0,this.matched.length-this.match.length);return(a.length>20?"...":"")+a.substr(-20).replace(/\n/g,"")},upcomingInput:function(){var a=this.match;return a.length<20&&(a+=this._input.substr(0,20-a.length)),(a.substr(0,20)+(a.length>20?"...":"")).replace(/\n/g,"")},showPosition:function(){var a=this.pastInput(),b=new Array(a.length+1).join("-");return a+this.upcomingInput()+"\n"+b+"^"},next:function(){if(this.done)return this.EOF;this._input||(this.done=!0);var a,b,c,d,e;this._more||(this.yytext="",this.match="");for(var f=this._currentRules(),g=0;g<f.length&&(c=this._input.match(this.rules[f[g]]),!c||b&&!(c[0].length>b[0].length)||(b=c,d=g,this.options.flex));g++);return b?(e=b[0].match(/(?:\r\n?|\n).*/g),e&&(this.yylineno+=e.length),this.yylloc={first_line:this.yylloc.last_line,last_line:this.yylineno+1,first_column:this.yylloc.last_column,last_column:e?e[e.length-1].length-e[e.length-1].match(/\r?\n?/)[0].length:this.yylloc.last_column+b[0].length},this.yytext+=b[0],this.match+=b[0],this.matches=b,this.yyleng=this.yytext.length,this.options.ranges&&(this.yylloc.range=[this.offset,this.offset+=this.yyleng]),this._more=!1,this._input=this._input.slice(b[0].length),this.matched+=b[0],a=this.performAction.call(this,this.yy,this,f[d],this.conditionStack[this.conditionStack.length-1]),this.done&&this._input&&(this.done=!1),a?a:void 0):""===this._input?this.EOF:this.parseError("Lexical error on line "+(this.yylineno+1)+". Unrecognized text.\n"+this.showPosition(),{text:"",token:null,line:this.yylineno})},lex:function(){var a=this.next();return"undefined"!=typeof a?a:this.lex()},begin:function(a){this.conditionStack.push(a)},popState:function(){return this.conditionStack.pop()},_currentRules:function(){return this.conditions[this.conditionStack[this.conditionStack.length-1]].rules},topState:function(){return this.conditionStack[this.conditionStack.length-2]},pushState:function(a){this.begin(a)}};return a.options={},a.performAction=function(a,b,c,d){function e(a,c){return b.yytext=b.yytext.substr(a,b.yyleng-c)}switch(c){case 0:if("\\\\"===b.yytext.slice(-2)?(e(0,1),this.begin("mu")):"\\"===b.yytext.slice(-1)?(e(0,1),this.begin("emu")):this.begin("mu"),b.yytext)return 12;break;case 1:return 12;case 2:return this.popState(),12;case 3:return b.yytext=b.yytext.substr(5,b.yyleng-9),this.popState(),15;case 4:return 12;case 5:return e(0,4),this.popState(),13;case 6:return 45;case 7:return 46;case 8:return 16;case 9:return this.popState(),this.begin("raw"),18;case 10:return 34;case 11:return 24;case 12:return 29;case 13:return this.popState(),28;case 14:return this.popState(),28;case 15:return 26;case 16:return 26;case 17:return 32;case 18:return 31;case 19:this.popState(),this.begin("com");break;case 20:return e(3,5),this.popState(),13;case 21:return 31;case 22:return 51;case 23:return 50;case 24:return 50;case 25:return 54;case 26:break;case 27:return this.popState(),33;case 28:return this.popState(),25;case 29:return b.yytext=e(1,2).replace(/\\"/g,'"'),42;case 30:return b.yytext=e(1,2).replace(/\\'/g,"'"),42;case 31:return 52;case 32:return 44;case 33:return 44;case 34:return 43;case 35:return 50;case 36:return b.yytext=e(1,2),50;case 37:return"INVALID";case 38:return 5}},a.rules=[/^(?:[^\x00]*?(?=(\{\{)))/,/^(?:[^\x00]+)/,/^(?:[^\x00]{2,}?(?=(\{\{|\\\{\{|\\\\\{\{|$)))/,/^(?:\{\{\{\{\/[^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=[=}\s\/.])\}\}\}\})/,/^(?:[^\x00]*?(?=(\{\{\{\{\/)))/,/^(?:[\s\S]*?--\}\})/,/^(?:\()/,/^(?:\))/,/^(?:\{\{\{\{)/,/^(?:\}\}\}\})/,/^(?:\{\{(~)?>)/,/^(?:\{\{(~)?#)/,/^(?:\{\{(~)?\/)/,/^(?:\{\{(~)?\^\s*(~)?\}\})/,/^(?:\{\{(~)?\s*else\s*(~)?\}\})/,/^(?:\{\{(~)?\^)/,/^(?:\{\{(~)?\s*else\b)/,/^(?:\{\{(~)?\{)/,/^(?:\{\{(~)?&)/,/^(?:\{\{!--)/,/^(?:\{\{![\s\S]*?\}\})/,/^(?:\{\{(~)?)/,/^(?:=)/,/^(?:\.\.)/,/^(?:\.(?=([=~}\s\/.)])))/,/^(?:[\/.])/,/^(?:\s+)/,/^(?:\}(~)?\}\})/,/^(?:(~)?\}\})/,/^(?:"(\\["]|[^"])*")/,/^(?:'(\\[']|[^'])*')/,/^(?:@)/,/^(?:true(?=([~}\s)])))/,/^(?:false(?=([~}\s)])))/,/^(?:-?[0-9]+(?:\.[0-9]+)?(?=([~}\s)])))/,/^(?:([^\s!"#%-,\.\/;->@\[-\^`\{-~]+(?=([=~}\s\/.)]))))/,/^(?:\[[^\]]*\])/,/^(?:.)/,/^(?:$)/],a.conditions={mu:{rules:[6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38],inclusive:!1},emu:{rules:[2],inclusive:!1},com:{rules:[5],inclusive:!1},raw:{rules:[3,4],inclusive:!1},INITIAL:{rules:[0,1,38],inclusive:!0}},a}();return b.lexer=c,a.prototype=b,b.Parser=a,new a}();return a=b}(),i=function(a){"use strict";function b(a,b){return{left:"~"===a.charAt(2),right:"~"===b.charAt(b.length-3)}}function c(a,b,c,d,i,k){if(a.sexpr.id.original!==d.path.original)throw new j(a.sexpr.id.original+" doesn't match "+d.path.original,a);var l=c&&c.program,m={left:a.strip.left,right:d.strip.right,openStandalone:f(b.statements),closeStandalone:e((l||b).statements)};if(a.strip.right&&g(b.statements,null,!0),l){var n=c.strip;n.left&&h(b.statements,null,!0),n.right&&g(l.statements,null,!0),d.strip.left&&h(l.statements,null,!0),e(b.statements)&&f(l.statements)&&(h(b.statements),g(l.statements))}else d.strip.left&&h(b.statements,null,!0);return i?new this.BlockNode(a,l,b,m,k):new this.BlockNode(a,b,l,m,k)}function d(a,b){for(var c=0,d=a.length;d>c;c++){var i=a[c],j=i.strip;if(j){var k=e(a,c,b,"partial"===i.type),l=f(a,c,b),m=j.openStandalone&&k,n=j.closeStandalone&&l,o=j.inlineStandalone&&k&&l;j.right&&g(a,c,!0),j.left&&h(a,c,!0),o&&(g(a,c),h(a,c)&&"partial"===i.type&&(i.indent=/([ \t]+$)/.exec(a[c-1].original)?RegExp.$1:"")),m&&(g((i.program||i.inverse).statements),h(a,c)),n&&(g(a,c),h((i.inverse||i.program).statements))}}return a}function e(a,b,c){void 0===b&&(b=a.length);var d=a[b-1],e=a[b-2];return d?"content"===d.type?(e||!c?/\r?\n\s*?$/:/(^|\r?\n)\s*?$/).test(d.original):void 0:c}function f(a,b,c){void 0===b&&(b=-1);var d=a[b+1],e=a[b+2];return d?"content"===d.type?(e||!c?/^\s*?\r?\n/:/^\s*?(\r?\n|$)/).test(d.original):void 0:c}function g(a,b,c){var d=a[null==b?0:b+1];if(d&&"content"===d.type&&(c||!d.rightStripped)){var e=d.string;d.string=d.string.replace(c?/^\s+/:/^[ \t]*\r?\n?/,""),d.rightStripped=d.string!==e}}function h(a,b,c){var d=a[null==b?a.length-1:b-1];if(d&&"content"===d.type&&(c||!d.leftStripped)){var e=d.string;return d.string=d.string.replace(c?/\s+$/:/[ \t]+$/,""),d.leftStripped=d.string!==e,d.leftStripped}}var i={},j=a;return i.stripFlags=b,i.prepareBlock=c,i.prepareProgram=d,i}(c),j=function(a,b,c,d){"use strict";function e(a){return a.constructor===h.ProgramNode?a:(g.yy=k,g.parse(a))}var f={},g=a,h=b,i=c,j=d.extend;f.parser=g;var k={};return j(k,i,h),f.parse=e,f}(h,g,i,b),k=function(a,b){"use strict";function c(){}function d(a,b,c){if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new h("You must pass a string or Handlebars AST to Handlebars.precompile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var d=c.parse(a),e=(new c.Compiler).compile(d,b);return(new c.JavaScriptCompiler).compile(e,b)}function e(a,b,c){function d(){var d=c.parse(a),e=(new c.Compiler).compile(d,b),f=(new c.JavaScriptCompiler).compile(e,b,void 0,!0);return c.template(f)}if(null==a||"string"!=typeof a&&a.constructor!==c.AST.ProgramNode)throw new h("You must pass a string or Handlebars AST to Handlebars.compile. You passed "+a);b=b||{},"data"in b||(b.data=!0),b.compat&&(b.useDepths=!0);var e,f=function(a,b){return e||(e=d()),e.call(this,a,b)};return f._setup=function(a){return e||(e=d()),e._setup(a)},f._child=function(a,b,c){return e||(e=d()),e._child(a,b,c)},f}function f(a,b){if(a===b)return!0;if(i(a)&&i(b)&&a.length===b.length){for(var c=0;c<a.length;c++)if(!f(a[c],b[c]))return!1;return!0}}var g={},h=a,i=b.isArray,j=[].slice;return g.Compiler=c,c.prototype={compiler:c,equals:function(a){var b=this.opcodes.length;if(a.opcodes.length!==b)return!1;for(var c=0;b>c;c++){var d=this.opcodes[c],e=a.opcodes[c];if(d.opcode!==e.opcode||!f(d.args,e.args))return!1}for(b=this.children.length,c=0;b>c;c++)if(!this.children[c].equals(a.children[c]))return!1;return!0},guid:0,compile:function(a,b){this.opcodes=[],this.children=[],this.depths={list:[]},this.options=b,this.stringParams=b.stringParams,this.trackIds=b.trackIds;var c=this.options.knownHelpers;if(this.options.knownHelpers={helperMissing:!0,blockHelperMissing:!0,each:!0,"if":!0,unless:!0,"with":!0,log:!0,lookup:!0},c)for(var d in c)this.options.knownHelpers[d]=c[d];return this.accept(a)},accept:function(a){return this[a.type](a)},program:function(a){for(var b=a.statements,c=0,d=b.length;d>c;c++)this.accept(b[c]);return this.isSimple=1===d,this.depths.list=this.depths.list.sort(function(a,b){return a-b}),this},compileProgram:function(a){var b,c=(new this.compiler).compile(a,this.options),d=this.guid++;this.usePartial=this.usePartial||c.usePartial,this.children[d]=c;for(var e=0,f=c.depths.list.length;f>e;e++)b=c.depths.list[e],2>b||this.addDepth(b-1);return d},block:function(a){var b=a.mustache,c=a.program,d=a.inverse;c&&(c=this.compileProgram(c)),d&&(d=this.compileProgram(d));var e=b.sexpr,f=this.classifySexpr(e);"helper"===f?this.helperSexpr(e,c,d):"simple"===f?(this.simpleSexpr(e),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("blockValue",e.id.original)):(this.ambiguousSexpr(e,c,d),this.opcode("pushProgram",c),this.opcode("pushProgram",d),this.opcode("emptyHash"),this.opcode("ambiguousBlockValue")),this.opcode("append")},hash:function(a){var b,c,d=a.pairs;for(this.opcode("pushHash"),b=0,c=d.length;c>b;b++)this.pushParam(d[b][1]);for(;b--;)this.opcode("assignToHash",d[b][0]);this.opcode("popHash")},partial:function(a){var b=a.partialName;this.usePartial=!0,a.hash?this.accept(a.hash):this.opcode("push","undefined"),a.context?this.accept(a.context):(this.opcode("getContext",0),this.opcode("pushContext")),this.opcode("invokePartial",b.name,a.indent||""),this.opcode("append")},content:function(a){a.string&&this.opcode("appendContent",a.string)},mustache:function(a){this.sexpr(a.sexpr),a.escaped&&!this.options.noEscape?this.opcode("appendEscaped"):this.opcode("append")},ambiguousSexpr:function(a,b,c){var d=a.id,e=d.parts[0],f=null!=b||null!=c;this.opcode("getContext",d.depth),this.opcode("pushProgram",b),this.opcode("pushProgram",c),this.ID(d),this.opcode("invokeAmbiguous",e,f)},simpleSexpr:function(a){var b=a.id;"DATA"===b.type?this.DATA(b):b.parts.length?this.ID(b):(this.addDepth(b.depth),this.opcode("getContext",b.depth),this.opcode("pushContext")),this.opcode("resolvePossibleLambda")},helperSexpr:function(a,b,c){var d=this.setupFullMustacheParams(a,b,c),e=a.id,f=e.parts[0];if(this.options.knownHelpers[f])this.opcode("invokeKnownHelper",d.length,f);else{if(this.options.knownHelpersOnly)throw new h("You specified knownHelpersOnly, but used the unknown helper "+f,a);e.falsy=!0,this.ID(e),this.opcode("invokeHelper",d.length,e.original,e.isSimple)}},sexpr:function(a){var b=this.classifySexpr(a);"simple"===b?this.simpleSexpr(a):"helper"===b?this.helperSexpr(a):this.ambiguousSexpr(a)},ID:function(a){this.addDepth(a.depth),this.opcode("getContext",a.depth);var b=a.parts[0];b?this.opcode("lookupOnContext",a.parts,a.falsy,a.isScoped):this.opcode("pushContext")},DATA:function(a){this.options.data=!0,this.opcode("lookupData",a.id.depth,a.id.parts)},STRING:function(a){this.opcode("pushString",a.string)},NUMBER:function(a){this.opcode("pushLiteral",a.number)},BOOLEAN:function(a){this.opcode("pushLiteral",a.bool)},comment:function(){},opcode:function(a){this.opcodes.push({opcode:a,args:j.call(arguments,1)})},addDepth:function(a){0!==a&&(this.depths[a]||(this.depths[a]=!0,this.depths.list.push(a)))},classifySexpr:function(a){var b=a.isHelper,c=a.eligibleHelper,d=this.options;if(c&&!b){var e=a.id.parts[0];d.knownHelpers[e]?b=!0:d.knownHelpersOnly&&(c=!1)}return b?"helper":c?"ambiguous":"simple"},pushParams:function(a){for(var b=0,c=a.length;c>b;b++)this.pushParam(a[b])},pushParam:function(a){this.stringParams?(a.depth&&this.addDepth(a.depth),this.opcode("getContext",a.depth||0),this.opcode("pushStringParam",a.stringModeValue,a.type),"sexpr"===a.type&&this.sexpr(a)):(this.trackIds&&this.opcode("pushId",a.type,a.idName||a.stringModeValue),this.accept(a))},setupFullMustacheParams:function(a,b,c){var d=a.params;return this.pushParams(d),this.opcode("pushProgram",b),this.opcode("pushProgram",c),a.hash?this.hash(a.hash):this.opcode("emptyHash"),d}},g.precompile=d,g.compile=e,g}(c,b),l=function(a,b){"use strict";function c(a){this.value=a}function d(){}var e,f=a.COMPILER_REVISION,g=a.REVISION_CHANGES,h=b;d.prototype={nameLookup:function(a,b){return d.isValidJavaScriptVariableName(b)?a+"."+b:a+"['"+b+"']"},depthedLookup:function(a){return this.aliases.lookup="this.lookup",'lookup(depths, "'+a+'")'},compilerInfo:function(){var a=f,b=g[a];return[a,b]},appendToBuffer:function(a){return this.environment.isSimple?"return "+a+";":{appendToBuffer:!0,content:a,toString:function(){return"buffer += "+a+";"}}},initializeBuffer:function(){return this.quotedString("")},namespace:"Handlebars",compile:function(a,b,c,d){this.environment=a,this.options=b,this.stringParams=this.options.stringParams,this.trackIds=this.options.trackIds,this.precompile=!d,this.name=this.environment.name,this.isChild=!!c,this.context=c||{programs:[],environments:[]},this.preamble(),this.stackSlot=0,this.stackVars=[],this.aliases={},this.registers={list:[]},this.hashes=[],this.compileStack=[],this.inlineStack=[],this.compileChildren(a,b),this.useDepths=this.useDepths||a.depths.list.length||this.options.compat;var e,f,g,i=a.opcodes;for(f=0,g=i.length;g>f;f++)e=i[f],this[e.opcode].apply(this,e.args);if(this.pushSource(""),this.stackSlot||this.inlineStack.length||this.compileStack.length)throw new h("Compile completed with content left on stack");var j=this.createFunctionContext(d);if(this.isChild)return j;var k={compiler:this.compilerInfo(),main:j},l=this.context.programs;for(f=0,g=l.length;g>f;f++)l[f]&&(k[f]=l[f]);return this.environment.usePartial&&(k.usePartial=!0),this.options.data&&(k.useData=!0),this.useDepths&&(k.useDepths=!0),this.options.compat&&(k.compat=!0),d||(k.compiler=JSON.stringify(k.compiler),k=this.objectLiteral(k)),k},preamble:function(){this.lastContext=0,this.source=[]},createFunctionContext:function(a){var b="",c=this.stackVars.concat(this.registers.list);c.length>0&&(b+=", "+c.join(", "));for(var d in this.aliases)this.aliases.hasOwnProperty(d)&&(b+=", "+d+"="+this.aliases[d]);var e=["depth0","helpers","partials","data"];this.useDepths&&e.push("depths");var f=this.mergeSource(b);return a?(e.push(f),Function.apply(this,e)):"function("+e.join(",")+") {\n  "+f+"}"},mergeSource:function(a){for(var b,c,d="",e=!this.forceBuffer,f=0,g=this.source.length;g>f;f++){var h=this.source[f];h.appendToBuffer?b=b?b+"\n    + "+h.content:h.content:(b&&(d?d+="buffer += "+b+";\n  ":(c=!0,d=b+";\n  "),b=void 0),d+=h+"\n  ",this.environment.isSimple||(e=!1))}return e?(b||!d)&&(d+="return "+(b||'""')+";\n"):(a+=", buffer = "+(c?"":this.initializeBuffer()),d+=b?"return buffer + "+b+";\n":"return buffer;\n"),a&&(d="var "+a.substring(2)+(c?"":";\n  ")+d),d},blockValue:function(a){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var b=[this.contextName(0)];this.setupParams(a,0,b);var c=this.popStack();b.splice(1,0,c),this.push("blockHelperMissing.call("+b.join(", ")+")")},ambiguousBlockValue:function(){this.aliases.blockHelperMissing="helpers.blockHelperMissing";var a=[this.contextName(0)];this.setupParams("",0,a,!0),this.flushInline();var b=this.topStack();a.splice(1,0,b),this.pushSource("if (!"+this.lastHelper+") { "+b+" = blockHelperMissing.call("+a.join(", ")+"); }")},appendContent:function(a){this.pendingContent&&(a=this.pendingContent+a),this.pendingContent=a},append:function(){this.flushInline();var a=this.popStack();this.pushSource("if ("+a+" != null) { "+this.appendToBuffer(a)+" }"),this.environment.isSimple&&this.pushSource("else { "+this.appendToBuffer("''")+" }")},appendEscaped:function(){this.aliases.escapeExpression="this.escapeExpression",this.pushSource(this.appendToBuffer("escapeExpression("+this.popStack()+")"))},getContext:function(a){this.lastContext=a},pushContext:function(){this.pushStackLiteral(this.contextName(this.lastContext))},lookupOnContext:function(a,b,c){var d=0,e=a.length;for(c||!this.options.compat||this.lastContext?this.pushContext():this.push(this.depthedLookup(a[d++]));e>d;d++)this.replaceStack(function(c){var e=this.nameLookup(c,a[d],"context");return b?" && "+e:" != null ? "+e+" : "+c})},lookupData:function(a,b){a?this.pushStackLiteral("this.data(data, "+a+")"):this.pushStackLiteral("data");for(var c=b.length,d=0;c>d;d++)this.replaceStack(function(a){return" && "+this.nameLookup(a,b[d],"data")})},resolvePossibleLambda:function(){this.aliases.lambda="this.lambda",this.push("lambda("+this.popStack()+", "+this.contextName(0)+")")},pushStringParam:function(a,b){this.pushContext(),this.pushString(b),"sexpr"!==b&&("string"==typeof a?this.pushString(a):this.pushStackLiteral(a))},emptyHash:function(){this.pushStackLiteral("{}"),this.trackIds&&this.push("{}"),this.stringParams&&(this.push("{}"),this.push("{}"))},pushHash:function(){this.hash&&this.hashes.push(this.hash),this.hash={values:[],types:[],contexts:[],ids:[]}},popHash:function(){var a=this.hash;this.hash=this.hashes.pop(),this.trackIds&&this.push("{"+a.ids.join(",")+"}"),this.stringParams&&(this.push("{"+a.contexts.join(",")+"}"),this.push("{"+a.types.join(",")+"}")),this.push("{\n    "+a.values.join(",\n    ")+"\n  }")},pushString:function(a){this.pushStackLiteral(this.quotedString(a))},push:function(a){return this.inlineStack.push(a),a},pushLiteral:function(a){this.pushStackLiteral(a)},pushProgram:function(a){null!=a?this.pushStackLiteral(this.programExpression(a)):this.pushStackLiteral(null)},invokeHelper:function(a,b,c){this.aliases.helperMissing="helpers.helperMissing";var d=this.popStack(),e=this.setupHelper(a,b),f=(c?e.name+" || ":"")+d+" || helperMissing";this.push("(("+f+").call("+e.callParams+"))")},invokeKnownHelper:function(a,b){var c=this.setupHelper(a,b);this.push(c.name+".call("+c.callParams+")")},invokeAmbiguous:function(a,b){this.aliases.functionType='"function"',this.aliases.helperMissing="helpers.helperMissing",this.useRegister("helper");var c=this.popStack();this.emptyHash();var d=this.setupHelper(0,a,b),e=this.lastHelper=this.nameLookup("helpers",a,"helper");this.push("((helper = (helper = "+e+" || "+c+") != null ? helper : helperMissing"+(d.paramsInit?"),("+d.paramsInit:"")+"),(typeof helper === functionType ? helper.call("+d.callParams+") : helper))")},invokePartial:function(a,b){var c=[this.nameLookup("partials",a,"partial"),"'"+b+"'","'"+a+"'",this.popStack(),this.popStack(),"helpers","partials"];this.options.data?c.push("data"):this.options.compat&&c.push("undefined"),this.options.compat&&c.push("depths"),this.push("this.invokePartial("+c.join(", ")+")")},assignToHash:function(a){var b,c,d,e=this.popStack();this.trackIds&&(d=this.popStack()),this.stringParams&&(c=this.popStack(),b=this.popStack());var f=this.hash;b&&f.contexts.push("'"+a+"': "+b),c&&f.types.push("'"+a+"': "+c),d&&f.ids.push("'"+a+"': "+d),f.values.push("'"+a+"': ("+e+")")},pushId:function(a,b){"ID"===a||"DATA"===a?this.pushString(b):"sexpr"===a?this.pushStackLiteral("true"):this.pushStackLiteral("null")},compiler:d,compileChildren:function(a,b){for(var c,d,e=a.children,f=0,g=e.length;g>f;f++){
c=e[f],d=new this.compiler;var h=this.matchExistingProgram(c);null==h?(this.context.programs.push(""),h=this.context.programs.length,c.index=h,c.name="program"+h,this.context.programs[h]=d.compile(c,b,this.context,!this.precompile),this.context.environments[h]=c,this.useDepths=this.useDepths||d.useDepths):(c.index=h,c.name="program"+h)}},matchExistingProgram:function(a){for(var b=0,c=this.context.environments.length;c>b;b++){var d=this.context.environments[b];if(d&&d.equals(a))return b}},programExpression:function(a){var b=this.environment.children[a],c=(b.depths.list,this.useDepths),d=[b.index,"data"];return c&&d.push("depths"),"this.program("+d.join(", ")+")"},useRegister:function(a){this.registers[a]||(this.registers[a]=!0,this.registers.list.push(a))},pushStackLiteral:function(a){return this.push(new c(a))},pushSource:function(a){this.pendingContent&&(this.source.push(this.appendToBuffer(this.quotedString(this.pendingContent))),this.pendingContent=void 0),a&&this.source.push(a)},pushStack:function(a){this.flushInline();var b=this.incrStack();return this.pushSource(b+" = "+a+";"),this.compileStack.push(b),b},replaceStack:function(a){var b,d,e,f="";this.isInline();if(!this.isInline())throw new h("replaceStack on non-inline");var g=this.popStack(!0);if(g instanceof c)f=b=g.value,e=!0;else{d=!this.stackSlot;var i=d?this.incrStack():this.topStackName();f="("+this.push(i)+" = "+g+")",b=this.topStack()}var j=a.call(this,b);e||this.popStack(),d&&this.stackSlot--,this.push("("+f+j+")")},incrStack:function(){return this.stackSlot++,this.stackSlot>this.stackVars.length&&this.stackVars.push("stack"+this.stackSlot),this.topStackName()},topStackName:function(){return"stack"+this.stackSlot},flushInline:function(){var a=this.inlineStack;if(a.length){this.inlineStack=[];for(var b=0,d=a.length;d>b;b++){var e=a[b];e instanceof c?this.compileStack.push(e):this.pushStack(e)}}},isInline:function(){return this.inlineStack.length},popStack:function(a){var b=this.isInline(),d=(b?this.inlineStack:this.compileStack).pop();if(!a&&d instanceof c)return d.value;if(!b){if(!this.stackSlot)throw new h("Invalid stack pop");this.stackSlot--}return d},topStack:function(){var a=this.isInline()?this.inlineStack:this.compileStack,b=a[a.length-1];return b instanceof c?b.value:b},contextName:function(a){return this.useDepths&&a?"depths["+a+"]":"depth"+a},quotedString:function(a){return'"'+a.replace(/\\/g,"\\\\").replace(/"/g,'\\"').replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+'"'},objectLiteral:function(a){var b=[];for(var c in a)a.hasOwnProperty(c)&&b.push(this.quotedString(c)+":"+a[c]);return"{"+b.join(",")+"}"},setupHelper:function(a,b,c){var d=[],e=this.setupParams(b,a,d,c),f=this.nameLookup("helpers",b,"helper");return{params:d,paramsInit:e,name:f,callParams:[this.contextName(0)].concat(d).join(", ")}},setupOptions:function(a,b,c){var d,e,f,g={},h=[],i=[],j=[];g.name=this.quotedString(a),g.hash=this.popStack(),this.trackIds&&(g.hashIds=this.popStack()),this.stringParams&&(g.hashTypes=this.popStack(),g.hashContexts=this.popStack()),e=this.popStack(),f=this.popStack(),(f||e)&&(f||(f="this.noop"),e||(e="this.noop"),g.fn=f,g.inverse=e);for(var k=b;k--;)d=this.popStack(),c[k]=d,this.trackIds&&(j[k]=this.popStack()),this.stringParams&&(i[k]=this.popStack(),h[k]=this.popStack());return this.trackIds&&(g.ids="["+j.join(",")+"]"),this.stringParams&&(g.types="["+i.join(",")+"]",g.contexts="["+h.join(",")+"]"),this.options.data&&(g.data="data"),g},setupParams:function(a,b,c,d){var e=this.objectLiteral(this.setupOptions(a,b,c));return d?(this.useRegister("options"),c.push("options"),"options="+e):(c.push(e),"")}};for(var i="break else new var case finally return void catch for switch while continue function this with default if throw delete in try do instanceof typeof abstract enum int short boolean export interface static byte extends long super char final native synchronized class float package throws const goto private transient debugger implements protected volatile double import public let yield".split(" "),j=d.RESERVED_WORDS={},k=0,l=i.length;l>k;k++)j[i[k]]=!0;return d.isValidJavaScriptVariableName=function(a){return!d.RESERVED_WORDS[a]&&/^[a-zA-Z_$][0-9a-zA-Z_$]*$/.test(a)},e=d}(d,c),m=function(a,b,c,d,e){"use strict";var f,g=a,h=b,i=c.parser,j=c.parse,k=d.Compiler,l=d.compile,m=d.precompile,n=e,o=g.create,p=function(){var a=o();return a.compile=function(b,c){return l(b,c,a)},a.precompile=function(b,c){return m(b,c,a)},a.AST=h,a.Compiler=k,a.JavaScriptCompiler=n,a.Parser=i,a.parse=j,a};return g=p(),g.create=p,g["default"]=g,f=g}(f,g,j,k,l);return m}),function(){function a(a){var d=b[a]={},e=a.match(c)||[];return LTApi.Utils.each(e,function(a){d[a]=!0}),d}var b={},c=/\S+/g;LTApi.Callbacks=function(c){c="string"==typeof c?b[c]||a(c):LTApi.Utils.extend({},c);var d,e,f,g,h,i,j=[],k=!c.once&&[],l=function(a){for(d=c.memory&&a,e=!0,i=g||0,g=0,h=j.length,f=!0;j&&h>i;i++)if(j[i].apply(a[0],a[1])===!1&&c.stopOnFalse){d=!1;break}f=!1,j&&(k?k.length&&l(k.shift()):d?j=[]:m.disable())},m={add:function(){if(j){var a=j.length;!function b(a){LTApi.Utils.each(a,function(a){type=LTApi.Utils.type(a),"function"===type?c.unique&&m.has(a)||j.push(a):a&&a.length&&"string"!==type&&b(a)})}(arguments),f?h=j.length:d&&(g=a,l(d))}return this},remove:function(){return j&&LTApi.Utils.each(arguments,function(a){for(var b;(b=LTApi.Utils.indexOf(j,a,b))>-1;)j.splice(b,1),f&&(h>=b&&h--,i>=b&&i--)}),this},has:function(a){return a?LTApi.Utils.indexOf(j,a)>-1:!(!j||!j.length)},empty:function(){return j&&(j=[],h=0),this},disable:function(){return j=k=d=void 0,this},disabled:function(){return!j},lock:function(){return k=void 0,d||m.disable(),this},locked:function(){return!k},fireWith:function(a,b){return!j||e&&!k||(b=b||[],b=[a,b.slice?b.slice():b],f?k.push(b):l(b)),this},fire:function(){return m.fireWith(this,arguments),this},fired:function(){return!!e}};return m}}(),function(){LTApi.Utils.BROWSER_TEST=function(a,b){var c,d,e,f,g,h,i,j,k,l;return k="unknown",l="X",f=function(a,b){var c;for(c=0;c<b.length;)a=a.replace(b[c][0],b[c][1]),c+=1;return a},d=function(a,b,c,d){var e,g;return g={name:f((b.exec(a)||[k,k])[1],c)},g[g.name]=!0,g.version=g.opera?window.opera.version():(d.exec(a)||[l,l,l,l])[3],/safari/.test(g.name)&&g.version>400?g.version="2.0":"presto"===g.name&&(g.version=LTApi.Utils.browser.version>9.27?"futhark":"linear_b"),g.versionNumber=parseFloat(g.version,10)||0,e=g.versionNumber<100&&g.versionNumber>9?2:1,g.versionX=g.version!==l?g.version.substr(0,e):l,g.className=g.name+g.versionX,g.mobile=null!=/(modile|ipad|iphone|android|blackberry|playbook|bb10)/.exec(a),g},j=function(a,b,c){var d;return d={name:(c.exec(b)||[k])[0].replace("sunos","solaris")},d.language=navigator.language,d},a=(/Opera|Navigator|Minefield|KHTML|Chrome/.test(a)?f(a,[[/(Firefox|MSIE|KHTML,\slike\sGecko|Konqueror)/,""],["CriOS","Chrome Safari","Chrome"],["KHTML","Konqueror"],["Minefield","Firefox"],["Navigator","Netscape"]]):a).toLowerCase(),c=d(a,/(camino|crios|chrome|firefox|netscape|konqueror|lynx|msie|opera|safari)/,[],/(camino|chrome|firefox|netscape|netscape6|opera|version|konqueror|lynx|msie|safari)(\/|\s)([a-z0-9\.\+]*?)(\;|dev|rel|\s|$)/),e=d(a,/(gecko|konqueror|msie|opera|webkit)/,[["konqueror","khtml"],["msie","trident"],["opera","presto"]],/(crios|applewebkit|rv|konqueror|msie)(\:|\/|\s)([a-z0-9\.]*?)(\;|\)|\s)/),h=/(win|mac|android|linux|sunos|solaris|iphone|ipad)/,i=navigator.platform.toLowerCase(),g=j(a,i,h),LTApi.Utils.os=g,LTApi.Utils.browser=c,{os:g,browser:c}}}.call(this),function(){var a,b,c,d,e,f,g,h=[].slice,i=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};a=LTApi.Utils,f=function(a,b){return LTApi.Utils[a]=b},b=function(a,b){return LTApi.Utils[a]=LTApi.Utils[b]},d=function(a,b,c){var d;return null==(d=LTApi.Utils)[a]&&(d[a]={}),LTApi.Utils[a][b]=c},e=function(b,c,d){return a.is("native",b.prototype[c])||b.prototype[c]?void 0:b.prototype[c]=d},c=function(a){return LTApi.Utils.CONFIG[a]},g={},f("ErrorHandler",function(b){var c,d,e,f,g,h;return null!=window.console&&null!=console.log?(c=null!=(d=null!=(e=b.message)?e:b)?d:"Unknown error occurred",h=null!=(f=null!=(g=b.stack)?g:b)?f:"no stack trace",a.is("object",c)&&(c=JSON.stringify(c,null,"  ")),c!==h?console.log(c+": "+h):console.log(c)):void 0}),f("is_mobile",function(){var b,c,d;return d=navigator.userAgent,b=["Android","webOS","iPhone","iPad","iPod","BlackBerry","Windows Phone"],c=b.map(function(a){return new RegExp(a).test(d)}),a.any(c,!0)}),f("tpl_loader",function(b){if(null==b)throw"Can't register templates for "+b;return function(c,d){var e,f;if(e=a.normalize_slashes(b+"/"+c),null!=(f=a.TEMPLATES[e])&&f instanceof Function)return null==d?f:f(d);throw"Can't find template \""+c+'" at path "'+b+'"'}}),f("i18n_base",function(a){var b,c,d,e;return null!=(d=g[a])?d:(e=a.replace(/[^a-z0-9\_\.]/gi,"").replace(/\.+/,"."),c=this.locale[this.config.language],b=new Function("locale","try{return locale."+e+"}catch(e){return 'translation_missing:"+a+"'}"),g[a]=b(c))}),f("promise",function(b,c){return null==c&&(c=!0),c?new LTApi.Utils.RSVP.Promise(b)["catch"](a.ErrorHandler):new LTApi.Utils.RSVP.Promise(b)}),d("promise","all",function(b){return new a.RSVP.all(b)}),f("version_match",function(a){var b;return((null!=a&&null!=(b=a.fn)?b.jquery:void 0)||0)>=c("actual_jq_version")}),f("normalize_slashes",function(a,b){return null==b&&(b=!0),a=a.replace(/([\/]+)/g,"/"),b&&(a=a.replace(/^\/|\/$/g,"")),a}),f("assign",function(a,b){return a.replace(/\{([^\}]+)\}/gi,function(a,c){return b[c]})}),f("is_blank",function(b){return!a.trim(b).length}),b("isBlank","is_blank"),f("downcase",function(a){return a.toLowerCase()}),f("upcase",function(a){return a.toUpperCase()}),f("guid",function(){var a;return a=function(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)},a()+a()+"-"+a()+"-"+a()+"-"+a()+"-"+a()+a()+a()}),f("trimRight",function(a){return String(a).replace(/([\s]+)$/,"")}),f("trimLeft",function(a){return String(a).replace(/^([\s]+)/,"")}),f("trim",function(b){return a.trimRight(a.trimLeft(b))}),f("pad",function(a,b,c){var d,e;if(null==c&&(c="left"),d=b-a.length,!((d=b-a.length)>0))return a;switch(e=Array(d+1).join(" "),c){case"left":return e+a;case"right":return a+e}}),f("reverse",function(a){return a.split("").reverse().join("")}),f("nbsp",function(a){return a.replace(/\s/g,"&nbsp;")}),f("repeat",function(a,b){var c;for(c=[];a--;)c.push(b());return c}),f("pluralize",function(){var b,c,d;switch(b=arguments[0],d=2<=arguments.length?h.call(arguments,1):[],d=a.flatten([d]).slice(0,3),(c=function(a){return a%10===1&&a%100!==11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2})(b)){case 0:return d[0];case 1:return d[1];default:return d[2]}}),f("currency_format",function(a){return a}),f("to_currency",function(b,c){var d,e,f,g,h,i;return e=(null!=c?c.format:void 0)||"{n}",g=(null!=c?c.precision:void 0)||0,d=Number(b).toFixed(g).split("."),h=/^\-/.test(d[0])?"-":"",i=a.reverse(d[0]),null!=(i=i.match(/(\d{1,3})/gi))?(i=a.reverse(i.join(" ")),f=null!=d[1]?","+d[1]:"",h+i+f):"NaN"}),f("normalize_number",function(b,c,d){return null==c&&(c=0),null==d&&(d=100),a.min([a.max([c,b]),d])}),f("chunk",function(a,b){var c;return c=a.map(function(c,d){return d%b?[]:[a.slice(d,d+b)]}),[].concat.apply([],c)}),f("slice",function(a,b){return Array.prototype.slice.call(a,b)}),f("splice",function(a,b){return Array.prototype.splice.call(a,b)}),f("toArray",function(a){return Array.prototype.slice.call(a,0)}),f("closest_number",function(b,c){var d,e,f,g;return c=c.map(Number),g=Number(b),i.call(c,g)>=0?b:(d=c.map(function(a){return function(a){return Math.abs(a-g)}}(this)),f=c[d.indexOf(a.min(d))],e=Number(null!=f?f:g))}),f("indexOf",function(b,c,d){return null==d&&(d=0),b=a.slice(a.flatten([b]),d),b.reduce(function(a,b,d){return b===c?d:a},-1)}),f("inArray",function(b,c,d){var e;return null==d&&(d=0),e=a.slice(a.flatten([b]),d),~~e.indexOf(c)>=0}),f("add",function(b,c){return c=a.flatten([c]),b.push.apply(b,c),b}),f("unique",function(a,b){var c,d;return d=[],c=a.reduce(function(a,c){var e,f;return e=null!=(f="function"==typeof b?b(c):void 0)?f:c,i.call(d,e)<0&&(d.push(e),a.push(c)),a},[])}),b("uniq","unique"),f("flatten",function(b){return b.reduce(function(b,c){return a.is("array",c)?b.push.apply(b,a.flatten(c)):b.push(c),b},[])}),f("first",function(a,b){var c;return null==b&&(b=1),c=a.slice(0,Number(b)),arguments.length<2?c[0]:c}),f("last",function(a,b){var c;return null==b&&(b=1),c=a.slice(a.length-Number(b)),arguments.length<2?c[0]:c}),f("removeAtIndex",function(a,b,c){return null==c&&(c=1),a.splice(b,c),a}),f("remove",function(){var b,c;return b=arguments[0],c=2<=arguments.length?h.call(arguments,1):[],c=a.flatten([c]),c.forEach(function(c){return a.removeAtIndex(b,b.indexOf(c))}),b}),f("compact",function(b,c){return b.reduce(function(b){return function(b,d){return c===!0?d&&b.push(d):null==d||a.is("nan",d)||b.push(d),b}}(this),[])}),f("cloneArray",function(a){return a.slice(0)}),f("isEmpty",function(b){return 0===~~a.compact(a.cloneArray(b)).length}),f("sort",function(a,b){var c;return c=a.sort(function(a,c){return c>a?b?1:-1:a>c?b?-1:1:0})}),f("sortBy",function(b,c,d){var e;return null==d&&(d=!1),e=a.cloneArray(b).sort(function(b,e){var f,g;return a.is("string",c)?(f=b[c],g=e[c]):a.is("function",c)&&(f=c(b),g=c(e)),g>f?d?1:-1:f>g?d?-1:1:0})}),f("groupBy",function(b,c){return b.reduce(function(b,d){var e;return e=a.is("function",c)?c(d):d[c],null==b[e]&&(b[e]=[]),b[e].push(d),b},{})}),f("forEach",function(b,c){var d,e,f,g,h;for(g=[],d=e=0,f=b.length;f>e;d=++e)h=b[d],a.is("string",d)?g.push(void 0):g.push(c(h,d));return g}),b("each","forEach"),f("all",function(b,c){return b.map(function(b){return null==c?!!b:a.is("function",c)?!!c(b):b===c}).reduce(function(a,b){return a&&b},!0)}),f("any",function(b,c){return b.map(function(b){return null==c?!!b:a.is("function",c)?!!c(b):b===c}).reduce(function(a,b){return a=a||b},!1)}),f("sum",function(a){return a.reduce(function(a,b){return a+b},0)}),f("map",function(a,b){var c,d,e,f,g;for(f=[],g=d=0,e=a.length;e>d;g=++d)c=a[g],f.push(b(c,g));return f}),f("reduce",function(a,b,c){var d,e;return null==c&&(c=null),e=3===arguments.length,d=null!=c?c:null,a.forEach(function(c,f){return e?d=b(d,c,f,a):(e=!0,d=c)}),d}),f("find",function(b,c){if(null==c)throw new Error("Expression is not defined");return b.reduce(function(b,d){return null!=b?b:(a.is("function",c)?c(d)&&(b=d):a.is("array",c)?i.call(c,d)>=0&&(b=d):a.is("regexp",c)?c.test(d)&&(b=d):d===c&&(b=d),b)},null)}),f("filter",function(b,c){return b.reduce(function(b,d){return a.is("function",c)?c(d)&&b.push(d):a.is("array",c)?i.call(c,d)>=0&&b.push(d):d===c&&b.push(d),b},[])}),f("min",function(b,c){var d,e;return a.is("function",c)?(d=null,e=null,b.forEach(function(a){var b;return b=c(a),null==d||d>b?(d=b,e=a):void 0}),e):Math.min.apply(Math,b)}),f("max",function(b,c){var d,e;return a.is("function",c)?(d=null,e=null,b.forEach(function(a){var b;return b=c(a),null==d||b>d?(d=b,e=a):void 0}),e):Math.max.apply(Math,b)}),f("intersect",function(b,c){var d;return d=a.reduce(c,function(a,c){return i.call(b,c)>=0&&a.push(c),a},[])}),f("extract",function(b,c){var d;return d=Object.keys(c),Object.keys(b).reduce(function(e,f){return i.call(d,f)>=0&&(a.is("object",b[f])?e[f]=a.extract(b[f],c[f]):e[f]=b[f]),e},{})}),f("select",function(){var b,c,d;return c=arguments[0],b=2<=arguments.length?h.call(arguments,1):[],b=a.flatten([b]),d=a.reduce(b,function(a,b){return a[b]=c[b],a},{})}),f("type",function(b){return a.downcase(Object.prototype.toString.call(b)).replace(/\[object\s([^\]]+)\]/,"$1")}),f("is",function(b,c){var d,e,f;if(f=a.downcase(b).match(/([^\s]+)/g),f.length>1)return e=f.map(function(b){return a.is(b,c)}),a.any(e,!0);switch(d=a.type(c),b=a.first(f)){case"object":try{if(c&&c.constructor&&!a.ownProperty(c,"constructor")&&!a.ownProperty(c.constructor.prototype,"isPrototypeOf"))return!1}catch(g){return!1}return!c||"object"!==d||a.is("window",c)||c.nodeType?!1:!!c&&"object"===d&&"hasOwnProperty"in c;case"window":return null!=c&&c===c.window;case"number":return!a.is("nan",c)&&b===d;case"nan":return"NaN"===String(c);case"moment":return LTApi.moment.isMoment(c);case"blank":return a.is("string",c)&&a.isBlank(c);case"empty":return a.is("array",c)&&a.isEmpty(c);case"native":return/native code/gi.test(String(c));default:return b===d}}),f("not",function(b,c){return!a.is(b,c)}),f("clone",function(b,c){var d;return null==c&&(c=!0),d=Object.keys(b),a.reduce(d,function(d,e){return a.is("object",b[e])&&c?d[e]=a.clone(b[e]):a.is("array",b[e])&&c?d[e]=a.cloneArray(b[e]):d[e]=b[e],d},{})}),f("merge",function(){var b,c,d,e,f;return a.is("boolean",arguments[0])?(b=arguments[0],c=null!=(d=arguments[1])?d:{},f=a.slice(arguments,2)):(b=!1,c=null!=(e=arguments[0])?e:{},f=a.slice(arguments,1)),a.each(f,function(d){return null==d&&(d={}),a.is("object",d)?a.reduce(Object.keys(d),function(c,e){return b&&a.is("object",d[e])?c[e]=a.merge(b,c[e]||{},d[e]):b&&a.is("array",d[e])?c[e]=a.cloneArray(d[e]):c[e]=d[e],c},c):void 0}),c}),b("extend","merge"),f("select",function(){var b,c;return b=arguments[0],c=2<=arguments.length?h.call(arguments,1):[],c=a.flatten([c]),a.reduce(a.keys(b),function(a,d){return i.call(c,d)>=0&&(a[d]=b[d]),a},{})}),f("reject",function(){var b,c;return b=arguments[0],c=2<=arguments.length?h.call(arguments,1):[],c=a.flatten([c]),a.reduce(a.keys(b),function(a,d){return i.call(c,d)<0&&(a[d]=b[d]),a},{})}),f("keys",function(b,c){var d,e,f;e=[];for(d in b)try{if(f=b[d],!a.owns_property(b,d))continue;if(a.is("function",c)&&!c(d,f))continue;e.push(d)}catch(g){continue}return e}),f("values",function(b,c){var d,e,f;e=[];for(d in b)try{if(f=b[d],!a.owns_property(b,d))continue;if(a.is("function",c)&&!c(d,f))continue;e.push(f)}catch(g){continue}return e}),f("owns_property",function(a,b){return Object.prototype.hasOwnProperty.call(a,b)}),b("has","owns_property"),b("ownProperty","owns_property"),f("toQueryString",function(b,c){return null==c&&(c=""),a.keys(b).reduce(function(d,e){var f;return f=a.is_blank(c)?e:c+"["+e+"]",a.is("object",b[e])?d.push(a.toQueryString(b[e],f)):a.is("array",b[e])?d.push(b[e].map(function(a,b){return e+"["+b+"]="+a},[]).join("&")):d.push(f+"="+b[e]),d},[]).join("&")}),f("compactObject",function(b,c,d){var e;return null==c&&(c=!1),null==d&&(d=!1),b=a.clone(b,d),e=a.keys(b),e.forEach(function(e){var f,g;if(g=b[e],f=c?!g:null==g,d){if(a.is("object",g))return b[e]=a.compactObject(g,c,d);if(a.is("array",g))return b[e]=a.compact(g,c);if(f)return delete b[e]}else if(f)return delete b[e]}),b}),f("inspect",function(a){return null!=window.console&&null!=console.log?null!=window.JSON&&null!=JSON.stringify?console.log(JSON.stringify(a,null,"   ")):console.log(a):void 0}),f("data_attrs",function(b,c){var d;return null==c&&(c=""),d=a.keys(b).map(function(d){var e;return e=b[d],a.is("object",e)?c.length?a.data_attr(e,c+"-"+d):a.data_attr(e,d):c?"data-"+c+"-"+d+'="'+e+'"':"data-"+d+'="'+e+'"'}),d.join(" ")}),f("bind",function(){var a,b,c;return b=arguments[0],a=arguments[1],c=3<=arguments.length?h.call(arguments,2):[],function(){var d;return d=1<=arguments.length?h.call(arguments,0):[],d=c.concat(d),b.apply(a,d)}}),f("once",function(a){var b,c;return b=!1,c=void 0,function(){var d;return d=1<=arguments.length?h.call(arguments,0):[],b?c:(b=!0,c=a.apply(null,d))}}),f("every",function(a,b){var c,d;return null==b&&(b=100),c={caller:null,stopped:!1,fn:a,cancel:function(){return clearTimeout(this.caller),this.stopped=!0,this.caller=null,this.fn=null}},d=function(a){return a.stopped===!1&&null!=a.fn?(a.fn(),a.caller=setTimeout(function(){return d(a)},b)):clearTimeout(a.caller)},d(c),c}),f("enable_gpu",function(b){return a.$(b).each(function(b,c){var d,e,f;return e="translateZ(0)",f=["webkit","moz","ms","o"],d=f.reduce(function(a,b){return a["-"+b+"-transform"]=e,a},{transform:e}),a.$(c).css(d)})}),f("assert",function(a,b){if(!b)throw a||"Assertion failed"}),window.extensions={Function:{bind:function(){var b,c;return c=arguments[0],b=2<=arguments.length?h.call(arguments,1):[],a.bind.apply(a,[this,c].concat(h.call(b)))}},Array:{map:function(b){return a.map(this,b)},reduce:function(b,c){return a.reduce(this,b,c)},forEach:function(b){return a.forEach(this,b)},find:function(b){return a.find(this,b)},filter:function(b){return a.filter(this,b)},indexOf:function(b){return a.indexOf(this,b)}}},null==Object.clone&&(Object.clone=a.clone),null==Object.merge&&(Object.merge=a.merge),null==Object.select&&(Object.select=a.select),null==Object.reject&&(Object.reject=a.reject),null==Object.keys&&(Object.keys=a.keys),null==Object.values&&(Object.values=a.keys),a.BROWSER_TEST(navigator.userAgent),a.each(a.keys(extensions),function(b){var c,d,e;return c=!(!Object.defineProperty||a.browser.msie&&a.browser.versionNumber<9),e=a.keys(extensions[b]),d=window[b].prototype,a.each(e,function(c){return a.is("native",d[c])?void 0:d[c]=function(){return extensions[b][c].apply(this,arguments)}})})}.call(this),function(){var a,b;a=LTApi.Utils,b=function(b){return null==b&&(b=a.$),b.browser=a.browser,b.os=a.os,b.extend(!0,b.easing,LTApi.JqueryExtensions.easing),b.extend(!0,b.expr,LTApi.JqueryExtensions.expr),a.keys(LTApi.JqueryExtensions.fn).forEach(function(a){return b.fn[a]=LTApi.JqueryExtensions.fn[a]})},LTApi.Utils.$=window.jQuery,LTApi.Utils.load={ajax:function(b,c){return null==c&&(c=!1),a.cfg("interaction_match","jsonp")?(b.dataType="jsonp",b.scriptCharset="UTF-8",null!=b.xhrFields&&(b.xhrFields.withCredentials=null,delete b.xhrFields.withCredentials)):a.merge(!0,b,{crossDomain:!0,xhrFields:{withCredentials:!0},headers:{}}),null!=window.FormData&&b.data instanceof FormData&&(b.processData=!1,b.contentType=!1),(a.$||jQuery).ajax(b)},external:function(b,c){return a.promise(function(a,c){var d,e,f,g,h,i;switch(i=b.match(/js|css/g),b=b.replace(/http[s]?:/,location.protocol),d=!1,e=["load","error","readystatechange"],null!=i?i[0]:void 0){case"js":f=document.createElement("script"),f.src=b,f.type="text/javascript";break;case"css":f=document.createElement("link"),f.href=b,f.media="all",f.rel="stylesheet";break;default:return!1}return g=function(b){var c;return b=b||window.event,c=this.readyState,d||c&&"loaded"!==c&&"complete"!==c?void 0:(d=!0,null!=b&&a(b),f.onload=f.onreadystatechange=null)},f.onload=f.onreadystatechange=g,h=document.getElementsByTagName("head")[0],h.appendChild(f)})["catch"](this.ErrorHandler)},jquery:function(c){return null!=a.$&&a.is("function",c)&&a.version_match(a.$)?(b(a.$),"function"==typeof c?c(a.$):void 0):a.promise(function(d){return function(e){var f;return null!=a.$&&a.version_match(a.$)?(b(),e(a.$)):(null!=d.jquery_loader?f=d.jquery_loader:d.jquery_loader=a.promise(function(c){var e,f,g,h,i,j,k;return k=a.CONFIG.actual_jq_version,h=function(a){return a=null!=a?a.noConflict(!0):void 0,window.$=window.jQuery=a,a},f=LTApi.Handlebars.compile("{{scheme}}//ajax.googleapis.com/ajax/libs/jquery/{{version}}/jquery.min.js"),i=location.protocol,e=h(window.jQuery),g=(null!=e?e.fn.jquery:void 0)||0,null!=e&&a.version_match(e)?(a.$=h(e),b(),c(e)):(j=f({scheme:i,version:k}),d.external(j).then(function(){var d;return d=jQuery.noConflict(!0),a.$=d.noConflict(!0),b(),h(e),c(d)}))})["catch"](LTApi.Utils.ErrorHandler),d.jquery_loader.then(function(a){return"function"==typeof c&&c(a),e(a),a}))}}(this))["catch"](LTApi.Utils.ErrorHandler)}},LTApi.Utils.parse_date=function(b,c){var d,e,f;return null==c&&(c=!1),a.is("date",b)?b:LTApi.moment.isMoment(b)?b.toDate():(null!=(f=d=LTApi.moment(b,"DD.MM.YY"))&&"function"==typeof f.isValid?f.isValid():void 0)?c?null!=d?d.toDate():void 0:d:(d=null,e=["DD.MM.YY","DD.MM.YYYY","YYYY-MM-DD"],e.forEach(function(a){var c;if(null==d)return c=LTApi.moment(b,a),c.isValid()&&b.length===a.length?d=c:void 0}),c?null!=d&&"function"==typeof d.toDate?d.toDate():void 0:d)},LTApi.Utils.get_valid_date=function(b,c,d){var e,f;if(null==c&&(c="YYYY-MM-DD"),null==d&&(d=!1),null==b&&(e=LTApi.moment()),b instanceof Date)e=LTApi.moment(b);else if(a.is("moment",b))e=b;else{if(!a.is("string",b))throw"Invalid format for Date: "+b;e=(f=LTApi.moment(b,c)).format(c)===b?f:a.is_valid_date(b)?LTApi.moment(new Date(b)):LTApi.moment(b,c)}return d?e.toDate():e},LTApi.Utils.is_valid_date=function(a){return!isNaN(new Date(a).getTime())},LTApi.Utils.CACHE={cache_data:{},read:function(a,b){},write:function(a){},fetch:function(a,b){}},LTApi.Utils.LOGGER={now_date:function(){return"["+LTApi.moment().format("DD.MM.YYYY HH:mm:ss")+"] LTApi >>"},puts_message:function(b,c){return"development"===a.CONFIG.env?console.log(b,c):void 0},error:function(a){return this.puts_message(this.now_date()+" %c"+a,"color: red")},debug:function(a){return this.puts_message(this.now_date()+" %c"+a,"color: magenta;")},info:function(a){return this.puts_message(this.now_date()+" %c"+a,"color: blue")},warning:function(a){return this.puts_message(this.now_date()+" %c"+a,"color: orange")},structure:function(a){return this.puts_message(this.now_date()+" %c"+toJsonString(a),"color: cyan; background: #000; padding: 5px; display: block;")}}}.call(this),function(){var a,b,c=[].slice;a=LTApi.Utils,b=function(a,b){var c;switch((c=function(a){return a%10===1&&a%100!==11?0:a%10>=2&&4>=a%10&&(10>a%100||a%100>=20)?1:2})(a)){case 0:return b[0];case 1:return b[1];default:return b[2]}},function(d){return d.registerHelper("format_date",function(a,b){var c;return c=LTApi.moment(a).locale(b.hash.locale||!1),c.format(b.hash.format||"YYYY-MM-DD").toLowerCase()}),d.registerHelper("currency_format",function(a,b){var c,d,e,f,g,h,i;for(d="",i=Math.ceil(a).toString().split("").reverse(),c=b.hash.cur||"",h=[],e=0,f=void 0;f=i[e];)g=e+1,h.push(f),g%3===0&&h.push(" "),e++;switch(c){case"rur":d="руб.";break;case"eur":d="€";break;case"us":d="$";break;default:d="",c=""}return h=h.reverse().join(""),"eur"===c||"us"===c?h=d+" "+h:h+=" "+d,h}),d.registerHelper("decline",function(a,c){var d;return d=c.hash.v.split(","),a=Math.abs(a),b(a,d)}),d.registerHelper("pluralize",function(a,c){var d;return d=c.hash.v.split(","),a=Math.abs(a),b(a,d)}),d.registerHelper("date",function(b){var c;return c="DD.MM.YY",a.is("Date",b)?LTApi.moment(b).format(c):a.is("String",b)?LTApi.moment(b).format(c):LTApi.moment.isMoment(b)?b.format(c):"н/а"}),d.registerHelper("bool",function(a){return"<span>"+LTApi.Utils.locale[a.toString()]+"</span>"}),d.registerHelper("repeat",function(b,c){var d,e;return null==b&&(b=1),e=[],d=this,a.repeat(b,function(a){return e.push("function"==typeof c.fn?c.fn(d,{index:a}):void 0)}),e.join("")}),d.registerHelper("log",function(){var a,b,d;return a=2<=arguments.length?c.call(arguments,0,b=arguments.length-1):(b=0,[]),d=arguments[b++],console.log.apply(console,a)}),d.registerHelper("first",function(){var b,c,e,f,g,h,i;return f=arguments[0],2===arguments.length?(c=1,g=arguments[1]):3===arguments.length&&(c=arguments[1],g=arguments[2]),e=null!=(h=g.data)?h:{},b=function(b,c,d,f){var h;return e.index=d,e.first=0===d,e.last=d===f.length-1,h=a.merge({},this,c),b+=g.fn(h,e)}.bind(this),i=a.is("boolean",c)?a.reduce(f,b,""):a.reduce(a.first(f,c),b,""),new d.SafeString(i)}),d.registerHelper("content-tag",function(a,b,c){var e,f,g;return null==c?(c=b,b=c.hash):b=Object.merge(c.hash,b),g=document.createElement("div"),e=document.createElement(a),e.innerHTML=c.fn(this),g.appendChild(e),Object.keys(b).forEach(function(a){return e.setAttribute(a,b[a])}),f=g.innerHTML,g.removeChild(e),new d.SafeString(f)}),d.registerHelper("icon-button",function(a,b){var c,e,f;return e=b.hash.tag||"button",f=b.fn(this),c=LTApi.Utils.TEMPLATES["common/icon_button"]({attributes:Object.reject(b.hash,["tag"]),button_tag:e,icon_name:a,content:f}),new d.SafeString(c)}),d.registerHelper("nbsp",function(a){return new d.SafeString(a.replace(/\s/g,"&nbsp;"))}),d.registerHelper("lt_icon",function(a,b){var c,e;return a=String(a),e=b.hash.tag_name||"i",c="<"+e+' class="ltw-icon-'+a+'"></'+e+">",new d.SafeString(c)}),d.registerHelper("ifvalue",function(a,b){console.log("Helper",a,b.hash.value,b.hash.value===a),b.hash.value===a?b.fn(this):b.inverse(this)}),d.registerHelper("month_label",function(a){switch(a){case 1:return"январь";case 2:return"февраль";case 3:return"март";case 4:return"апрель";case 5:return"май";case 6:return"июнь";case 7:return"июль";case 8:return"август";case 9:return"сентябрь";case 10:return"октябрь";case 11:return"ноябрь";case 12:return"декабрь"}}),d.registerHelper("namespace",function(a,b){var c,e,f,g,h,i;return c=b.fn(this),g=(f=b.hash.except)?new RegExp("^"+f):null,h=(a+"_").replace(/^(_+)/,"").replace(/(_+)$/,"_"),e=c.replace(/^([\s]+)|([\s]+)$/,"").replace(/\>([\s\n]+)\</g,"><"),i=e.replace(/class="([^"]+)"/g,function(a,b){var c,d;return d=LTApi.Utils.trim(b).split(" "),c=d.map(function(a){return null!=g&&g.test(a)?a:h+a}).join(" "),'class="'+c+'"'}),new d.SafeString(i)})}.call(window,LTApi.Handlebars)}.call(this),function(){var a=[].slice;LTApi.Module=function(){function b(){this.__deprecated_keys={},this.__deprecation_warn={},this.handle_errors()}var c;return c=!1,b.prototype.u=LTApi.Utils,b.u=LTApi.Utils,b.prototype.handle_errors=function(){var b;return c=!0,b=function(){var b,c,d;return d=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],window.console&&(b=window.console[d])?b.apply(window.console,c):void 0}},b.prototype.normalize_config=function(a){return this.u.reduce(Object.keys(a),function(b){return function(c,d){var e;return b.u.is("object",a[d])?(e=b.normalize_config_key(d),null!=e&&(c[d]=b.normalize_config(a[d]))):(e=b.normalize_config_key(d),null!=e&&(c[e]=a[d])),c}}(this),{})},b.prototype.normalize_config_key=function(a){var b,c,d;return d=a,c=null,null!=(b=this.__deprecated_keys[a])&&(c=this.u.assign(this.__deprecation_warn[a]||"Key `{key} is deprecated.`",{key:a,alt_key:b}),d=b||null,this.deprecation(c)===(null!=c)),d},b.prototype.deprecate=function(a,b,c){return this.__deprecated_keys[a]=null!=c?c:!1,this.__deprecation_warn[a]=b},b.prototype.deprecation=function(a){return console.warn("DEPRECATION WARNING: "+a)},b.prototype.message=function(){var b,c,d;return d=arguments[0],c=2<=arguments.length?a.call(arguments,1):[],window.console&&(b=window.console[d])?b.apply(window.console,c):void 0},b.prototype.create_error_notifier=function(a){return this.error_notifier=new LTApi.Utils.ErrorNotifier(a)},b}()}.call(this),!function(a){this.LTApi=this.LTApi||{},this.LTApi.Utils=this.LTApi.Utils||{},this.LTApi.Utils.TEMPLATES=this.LTApi.Utils.TEMPLATES||{},a.registerPartial("feed",a.template({1:function(a,b,c,d){var e,f=this.lambda,g='<li class="lt_widget_price_feed_item"><div class="lt_widget_price_feed_content"><div class="lt_widget_price_feed_label">22 авг (пт)</div><div class="lt_widget_price_feed_value">36 500 ';return e=f(null!=(e=null!=a?a.i18n:a)?e.ruble_sign:e,a),null!=e&&(g+=e),g+"</div></div></li>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g='<div class="lt_widget_price_feed"><ul>';return e=(b.repeat||a&&a.repeat||f).call(a,5,{name:"repeat",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+"</ul></div>"},useData:!0})),a.registerPartial("prices",a.template({1:function(a,b,c,d,e){var f,g,h="function",i=b.helperMissing,j=this.escapeExpression,k=this.lambda,l='<li class="lt_hotel_widget_price ';return f=b["if"].call(a,null!=a?a.active:a,{name:"if",hash:{},fn:this.program(2,d,e),inverse:this.noop,data:d}),null!=f&&(l+=f),l+='" data-date="'+j((g=null!=(g=b.formatted_date||(null!=a?a.formatted_date:a))?g:i,typeof g===h?g.call(a,{name:"formatted_date",hash:{},data:d}):g))+'"><div class="lt_hotel_widget_price_wrapper"><div class="lt_hotel_widget_price_date">',f=b["if"].call(a,null!=e[1]?e[1].multiline:e[1],{name:"if",hash:{},fn:this.program(4,d,e),inverse:this.program(6,d,e),data:d}),null!=f&&(l+=f),l+='</div><div class="lt_hotel_widget_price_value"><span>от '+j((b.currency_format||a&&a.currency_format||i).call(a,null!=a?a.price:a,{
name:"currency_format",hash:{},data:d}))+" ",f=k(null!=(f=null!=e[1]?e[1].i18n:e[1])?f.ruble_sign:f,a),null!=f&&(l+=f),l+"</span></div></div></li>"},2:function(a,b,c,d){return"lt_hotel_widget_price_active"},4:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return" "+h((e=null!=(e=b.human_date_short||(null!=a?a.human_date_short:a))?e:g,typeof e===f?e.call(a,{name:"human_date_short",hash:{},data:d}):e))+" "},6:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return" "+h((e=null!=(e=b.human_date||(null!=a?a.human_date:a))?e:g,typeof e===f?e.call(a,{name:"human_date",hash:{},data:d}):e))+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d,e){var f,g="<ul>";return f=b.each.call(a,null!=a?a.dates:a,{name:"each",hash:{},fn:this.program(1,d,e),inverse:this.noop,data:d}),null!=f&&(g+=f),g+"</ul>"},useData:!0,useDepths:!0})),a.registerPartial("result",a.template({1:function(a,b,c,d){return"lt_widget_offer_best"},3:function(a,b,c,d){return'data-ltwtip-y="top"'},5:function(a,b,c,d){var e,f='<div class="lt_widget_offer_price lt_hotel_widget_line">';return e=b["if"].call(a,null!=a?a.is_admin:a,{name:"if",hash:{},fn:this.program(6,d),inverse:this.program(8,d),data:d}),null!=e&&(f+=e),f+"</div>"},6:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda,k='<a href="'+i((f=null!=(f=b.agent_booking_url||(null!=a?a.agent_booking_url:a))?f:h,typeof f===g?f.call(a,{name:"agent_booking_url",hash:{},data:d}):f))+'" target="_blank"><i class="ltw-icon-open"></i>'+i((b.currency_format||a&&a.currency_format||h).call(a,null!=a?a.price:a,{name:"currency_format",hash:{},data:d}))+" ";return e=j(null!=(e=null!=a?a.i18n:a)?e.ruble_sign:e,a),null!=e&&(k+=e),k+"</a>"},8:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression,h=this.lambda,i=" "+g((b.currency_format||a&&a.currency_format||f).call(a,null!=a?a.price:a,{name:"currency_format",hash:{},data:d}))+" ";return e=h(null!=(e=null!=a?a.i18n:a)?e.ruble_sign:e,a),null!=e&&(i+=e),i+" "},10:function(a,b,c,d){var e,f=" ";return e=b.unless.call(a,null!=a?a.price_on_button:a,{name:"unless",hash:{},fn:this.program(11,d),inverse:this.program(8,d),data:d}),null!=e&&(f+=e),f+" "},11:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return" "+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.open:e,a))+" "},13:function(a,b,c,d){return"lt_widget_extra_active"},15:function(a,b,c,d){return'<div class="lt_widget_offer_best_content"><i class="ltw-icon-checkmark"></i>Это лучшая цена</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda,k='<li data-id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+'" class="lt_hotel_widget_offer ';return e=b["if"].call(a,null!=a?a.best_price:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=' click_action" data-action="HotelPage.offer_register"><div class="lt_widget_offer_info lt_hotel_widget_line"><div class="lt_hotel_widget_line lt_widget_offer_operator lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.operator:e,a))+'</div><div class="lt_hotel_widget_offer_value"><span class="operator operator-'+i((f=null!=(f=b.operator||(null!=a?a.operator:a))?f:h,typeof f===g?f.call(a,{name:"operator",hash:{},data:d}):f))+'"><img src="'+i(j(null!=(e=null!=a?a.operator_logo:a)?e.src:e,a))+'" srcset="'+i(j(null!=(e=null!=a?a.operator_logo:a)?e.srcset:e,a))+'" width="90" height="23"></span></div></div><div class="lt_hotel_widget_line lt_widget_offer_room lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.room_type:e,a))+'</div><div class="lt_hotel_widget_offer_value" data-ltwtip-x="left" ',e=b["if"].call(a,null!=a?a.multiline:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=' data-ltwtip="'+i((f=null!=(f=b.room_type||(null!=a?a.room_type:a))?f:h,typeof f===g?f.call(a,{name:"room_type",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.room_type||(null!=a?a.room_type:a))?f:h,typeof f===g?f.call(a,{name:"room_type",hash:{},data:d}):f))+'</div></div><div class="lt_hotel_widget_line lt_widget_offer_start_date lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.start_date:e,a))+'</div><div class="lt_hotel_widget_offer_value">'+i((b.format_date||a&&a.format_date||h).call(a,null!=a?a.start_date:a,{name:"format_date",hash:{format:"DD.MM.YYYY"},data:d}))+'</div></div><div class="lt_hotel_widget_line lt_widget_offer_nights lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.nights:e,a))+'</div><div class="lt_hotel_widget_offer_value">'+i((f=null!=(f=b.nights_count||(null!=a?a.nights_count:a))?f:h,typeof f===g?f.call(a,{name:"nights_count",hash:{},data:d}):f))+'</div></div><div class="lt_hotel_widget_line lt_widget_offer_pansion lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.pansion:e,a))+'</div><div class="lt_hotel_widget_offer_value" ',e=b["if"].call(a,null!=a?a.multiline:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=' data-ltwtip="'+i(j(null!=(e=null!=a?a.pansion:a)?e.description_ru:e,a))+'">'+i(j(null!=(e=null!=a?a.pansion:a)?e.name:e,a))+'</div></div></div><div class="lt_widget_offer_buy lt_hotel_widget_line">',e=b.unless.call(a,null!=a?a.price_on_button:a,{name:"unless",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<div class="lt_widget_offer_package lt_hotel_widget_line">',e=(b["icon-button"]||a&&a["icon-button"]||h).call(a,"plane",{name:"icon-button",hash:{target:null!=a?a.link_target:a,"class":"lt_widget_offer_package_create",href:null!=a?a.page_url:a,tag:"a"},fn:this.program(10,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='</div></div><div class="lt_widget_offer_extras"><div class="lt_widget_extra lt_widget_instant_confirm ',e=b["if"].call(a,null!=(e=null!=a?a.extras:a)?e.instant_confirm:e,{name:"if",hash:{},fn:this.program(13,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='" data-ltwtip="'+i(j(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.instant_confirm:e)?e.description:e,a))+'" data-ltwtip-y="top"><div class="lt_widget_offer_extra_content"><i class="ltw-icon-bolt"></i><div class="lt_widget_extra_title">'+i(j(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.instant_confirm:e)?e.title:e,a))+'</div></div></div><div class="lt_widget_extra lt_widget_ebooking ',e=b["if"].call(a,null!=(e=null!=a?a.extras:a)?e.early_booking:e,{name:"if",hash:{},fn:this.program(13,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='" data-ltwtip="'+i(j(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.early_booking:e)?e.description:e,a))+'" ',e=b["if"].call(a,null!=a?a.multiline:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='><div class="lt_widget_offer_extra_content"><i class="ltw-icon-clock"></i><div class="lt_widget_extra_title">'+i(j(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.early_booking:e)?e.title:e,a))+"</div></div></div></div>",e=b["if"].call(a,null!=a?a.best_price:a,{name:"if",hash:{},fn:this.program(15,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+"</li>"},useData:!0})),a.registerPartial("submit",a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="lt_hotel_widget_button"><button class="lt_hotel_widget_submit lt_hotel_widget_submit_normal"><div class="lt_hotel_widget_submit_label">'+g(f(null!=(e=null!=a?a.i18n:a)?e.submit:e,a))+'</div><div class="lt_hotel_widget_submit_progress"><div class="lt_hotel_widget_submit_progress_bar_holder"><div class="lt_hotel_widget_submit_progress_bar"></div></div></div></button></div>'},useData:!0})),a.registerPartial("mobile_result",a.template({1:function(a,b,c,d){return"lt_widget_offer_best"},3:function(a,b,c,d){return'data-ltwtip-y="top"'},5:function(a,b,c,d){var e,f='<div class="lt_widget_offer_price lt_hotel_widget_line">';return e=b["if"].call(a,null!=a?a.is_admin:a,{name:"if",hash:{},fn:this.program(6,d),inverse:this.program(8,d),data:d}),null!=e&&(f+=e),f+"</div>"},6:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda,k='<a href="'+i((f=null!=(f=b.agent_booking_url||(null!=a?a.agent_booking_url:a))?f:h,typeof f===g?f.call(a,{name:"agent_booking_url",hash:{},data:d}):f))+'" target="_blank"><i class="ltw-icon-open"></i>'+i((b.currency_format||a&&a.currency_format||h).call(a,null!=a?a.price:a,{name:"currency_format",hash:{},data:d}))+" ";return e=j(null!=(e=null!=a?a.i18n:a)?e.ruble_sign:e,a),null!=e&&(k+=e),k+"</a>"},8:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression,h=this.lambda,i=" "+g((b.currency_format||a&&a.currency_format||f).call(a,null!=a?a.price:a,{name:"currency_format",hash:{},data:d}))+" ";return e=h(null!=(e=null!=a?a.i18n:a)?e.ruble_sign:e,a),null!=e&&(i+=e),i+" "},10:function(a,b,c,d){return"lt_widget_extra_active"},12:function(a,b,c,d){return'<div class="lt_widget_offer_best_content"><i class="ltw-icon-checkmark"></i>Это лучшая цена</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda,k='<li data-id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+'" class="lt_hotel_widget_offer ';return e=b["if"].call(a,null!=a?a.best_price:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=' click_action" data-action="HotelPage.offer_register"><div class="lt_widget_offer_info lt_hotel_widget_line"><div class="lt_hotel_widget_line lt_widget_offer_operator lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.operator:e,a))+'</div><div class="lt_hotel_widget_offer_value"><span class="operator operator-'+i((f=null!=(f=b.operator||(null!=a?a.operator:a))?f:h,typeof f===g?f.call(a,{name:"operator",hash:{},data:d}):f))+'"></span></div></div><div class="lt_hotel_widget_line lt_widget_offer_room lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.room_type:e,a))+'</div><div class="lt_hotel_widget_offer_value" data-ltwtip-x="left" ',e=b["if"].call(a,null!=a?a.multiline:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=' data-ltwtip="'+i((f=null!=(f=b.room_type||(null!=a?a.room_type:a))?f:h,typeof f===g?f.call(a,{name:"room_type",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.room_type||(null!=a?a.room_type:a))?f:h,typeof f===g?f.call(a,{name:"room_type",hash:{},data:d}):f))+'</div></div><div class="lt_hotel_widget_line lt_widget_offer_start_date lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.start_date:e,a))+'</div><div class="lt_hotel_widget_offer_value">'+i((b.format_date||a&&a.format_date||h).call(a,null!=a?a.start_date:a,{name:"format_date",hash:{format:"DD.MM.YYYY"},data:d}))+'</div></div><div class="lt_hotel_widget_line lt_widget_offer_nights lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.nights:e,a))+'</div><div class="lt_hotel_widget_offer_value">'+i((f=null!=(f=b.nights_count||(null!=a?a.nights_count:a))?f:h,typeof f===g?f.call(a,{name:"nights_count",hash:{},data:d}):f))+'</div></div><div class="lt_hotel_widget_line lt_widget_offer_pansion lt_hotel_widget_info_block"><div class="lt_hotel_widget_offer_label">'+i(j(null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.pansion:e,a))+'</div><div class="lt_hotel_widget_offer_value" ',e=b["if"].call(a,null!=a?a.multiline:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=' data-ltwtip="'+i(j(null!=(e=null!=a?a.pansion:a)?e.description_ru:e,a))+'">'+i(j(null!=(e=null!=a?a.pansion:a)?e.name:e,a))+'</div></div></div><div class="lt_widget_offer_buy lt_hotel_widget_line">',e=b.unless.call(a,null!=a?a.price_on_button:a,{name:"unless",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=' </div><div class="lt_widget_offer_extras"><div class="lt_widget_extra lt_widget_instant_confirm ',e=b["if"].call(a,null!=(e=null!=a?a.extras:a)?e.instant_confirm:e,{name:"if",hash:{},fn:this.program(10,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='" data-ltwtip="'+i(j(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.instant_confirm:e)?e.description:e,a))+'" data-ltwtip-y="top"><div class="lt_widget_offer_extra_content"><i class="ltw-icon-bolt"></i><div class="lt_widget_extra_title">'+i(j(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.instant_confirm:e)?e.title:e,a))+'</div></div></div><div class="lt_widget_extra lt_widget_ebooking ',e=b["if"].call(a,null!=(e=null!=a?a.extras:a)?e.early_booking:e,{name:"if",hash:{},fn:this.program(10,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='" data-ltwtip="'+i(j(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.early_booking:e)?e.description:e,a))+'" ',e=b["if"].call(a,null!=a?a.multiline:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='><div class="lt_widget_offer_extra_content"><i class="ltw-icon-clock"></i><div class="lt_widget_extra_title">'+i(j(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.offer:e)?e.early_booking:e)?e.title:e,a))+"</div></div></div></div>",e=b["if"].call(a,null!=a?a.best_price:a,{name:"if",hash:{},fn:this.program(12,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+"</li>"},useData:!0})),a.registerPartial("col_content",a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="column_wrapper"><div class="column"></div></div><div class="date"><span class="month_day">'+h((e=null!=(e=b.day_number||(null!=a?a.day_number:a))?e:g,typeof e===f?e.call(a,{name:"day_number",hash:{},data:d}):e))+'</span><span class="week_day">'+h((e=null!=(e=b.day_name||(null!=a?a.day_name:a))?e:g,typeof e===f?e.call(a,{name:"day_name",hash:{},data:d}):e))+"</span></div>"},useData:!0})),a.registerPartial("copyright",a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<span>поиск туров от</span><a href="https://level.travel'+h((e=null!=(e=b.url_params||(null!=a?a.url_params:a))?e:g,typeof e===f?e.call(a,{name:"url_params",hash:{},data:d}):e))+'">level.travel</a>'},useData:!0})),this.LTApi.Utils.TEMPLATES["best_prices_widget/countries_item"]=a.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<div class="bprices_widget_countries_item"><input id="'+i((f=null!=(f=b.name_en||(null!=a?a.name_en:a))?f:h,typeof f===g?f.call(a,{name:"name_en",hash:{},data:d}):f))+'" type="radio" name="alt_country" value="'+i((f=null!=(f=b.iso2||(null!=a?a.iso2:a))?f:h,typeof f===g?f.call(a,{name:"iso2",hash:{},data:d}):f))+'" ';return e=b["if"].call(a,null!=a?a.checked:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+'><label for="'+i((f=null!=(f=b.name_en||(null!=a?a.name_en:a))?f:h,typeof f===g?f.call(a,{name:"name_en",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.name_ru||(null!=a?a.name_ru:a))?f:h,typeof f===g?f.call(a,{name:"name_ru",hash:{},data:d}):f))+"</label></div>"},2:function(a,b,c,d){return'checked="true"'},4:function(a,b,c,d){return'<div class="bprices_widget_nocountries">Нет доступных стран<br>для выбранного города вылета</div>'},6:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="bprices_widget_countries_item"><input id="'+h((e=null!=(e=b.name_en||(null!=a?a.name_en:a))?e:g,typeof e===f?e.call(a,{name:"name_en",hash:{},data:d}):e))+'" type="radio" name="country" value="'+h((e=null!=(e=b.iso2||(null!=a?a.iso2:a))?e:g,typeof e===f?e.call(a,{name:"iso2",hash:{},data:d}):e))+'"><label for="'+h((e=null!=(e=b.name_en||(null!=a?a.name_en:a))?e:g,typeof e===f?e.call(a,{name:"name_en",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.name_ru||(null!=a?a.name_ru:a))?e:g,typeof e===f?e.call(a,{name:"name_ru",hash:{},data:d}):e))+"</label></div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div class="bprices_widget_head_countries_wrap_styles"><div class="bprices_widget_head_countries_list bprices_widget_head_countries-popular ">';return e=b.each.call(a,null!=a?a.popular_countries:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.program(4,d),data:d}),null!=e&&(f+=e),f+='<div class="bprices_widget_countries_item bprices_widget_countries_item-sub"><input id="" type="radio" name="alt_country" value=""><label for=""></label></div></div><div class="bprices_widget_head_countries_list bprices_widget_head_countries_list-side">',e=b.each.call(a,null!=a?a.left_list:a,{name:"each",hash:{},fn:this.program(6,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+='</div><div class="bprices_widget_head_countries_list bprices_widget_head_countries_list-side">',e=b.each.call(a,null!=a?a.right_list:a,{name:"each",hash:{},fn:this.program(6,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+'</div></div><div class="bprices_widget_head_countries_close bprices_widget_head_countries-trigger"></div>'},useData:!0}),this.LTApi.Utils.TEMPLATES["best_prices_widget/departures"]=a.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<option value="'+h((e=null!=(e=b.name_en||(null!=a?a.name_en:a))?e:g,typeof e===f?e.call(a,{name:"name_en",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.name_ru||(null!=a?a.name_ru:a))?e:g,typeof e===f?e.call(a,{name:"name_ru",hash:{},data:d}):e))+"</option>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<select id="departures" class="departure_list">';return e=b.each.call(a,null!=a?a.departures:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</select>"},useData:!0}),this.LTApi.Utils.TEMPLATES["best_prices_widget/index"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div id="bprices_widget" class="bprices_widget"><div class="bprices_widget_head loading"><div class="preloader"></div><div class="bprices_widget_head_title">Лучшие цены на туры</div><div class="bprices_widget_head_countries"><div class="bprices_widget_head_countries_wrap"></div><div class="bprices_widget_head_countries-all"><div class="bprices_widget_head_countries-all_link bprices_widget_head_countries-trigger">Все страны</div></div></div><div class="bprices_widget_head_nights"></div><div class="bprices_widget_head_departure"><div class="head_departure_title">Город вылета:</div><div class="head_departure_list"><div class="head_departure_list_label">Москва</div><div class="departure_list_wrap"></div></div></div></div><div class="bprices_widget_content loading"><div class="preloader"></div><div class="bprices_widget_content_title"><span id="selected_country">Россия</span>на<span id="selected_night">3</span>дней</div><div class="bprices_widget_content_results"></div><div class="bprices_widget_content_bottom">указана стоимость тура<br>на человека</div></div></div>'},useData:!0}),this.LTApi.Utils.TEMPLATES["best_prices_widget/nights"]=a.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<div class="bprices_widget_nights_item"><input id="night_'+i((f=null!=(f=b.value||(null!=a?a.value:a))?f:h,typeof f===g?f.call(a,{name:"value",hash:{},data:d}):f))+'" type="radio" name="nights" value="'+i((f=null!=(f=b.value||(null!=a?a.value:a))?f:h,typeof f===g?f.call(a,{name:"value",hash:{},data:d}):f))+'" ';return e=b["if"].call(a,null!=a?a.selected:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+'><label for="night_'+i((f=null!=(f=b.value||(null!=a?a.value:a))?f:h,typeof f===g?f.call(a,{name:"value",hash:{},data:d}):f))+'">'+i((f=null!=(f=b.value||(null!=a?a.value:a))?f:h,typeof f===g?f.call(a,{name:"value",hash:{},data:d}):f))+"</label></div>"},2:function(a,b,c,d){return' checked="true" '},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div class="head_nights_title">Количество ночей:</div><div class="head_nights_list">';return e=b.each.call(a,null!=a?a.items:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</div>"},useData:!0}),this.LTApi.Utils.TEMPLATES["best_prices_widget/result_item"]=a.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<a href="'+i((f=null!=(f=b.absolute_link||(null!=a?a.absolute_link:a))?f:h,typeof f===g?f.call(a,{name:"absolute_link",hash:{},data:d}):f))+'" target="'+i((f=null!=(f=b.link_target||(null!=a?a.link_target:a))?f:h,typeof f===g?f.call(a,{name:"link_target",hash:{},data:d}):f))+'"><div class="bprices_widget_results_item ';return e=b["if"].call(a,null!=a?a.lowest_price:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+'"><div class="bprices_widget_results_item_icon"><i class="ltw-icon-flame"></i></div><div class="bprices_widget_results_item_label">'+i((b.month_label||a&&a.month_label||h).call(a,null!=a?a.month:a,{name:"month_label",hash:{},data:d}))+'</div><div class="bprices_widget_results_item_price"><span class="price_underline">'+i((b.currency_format||a&&a.currency_format||h).call(a,null!=a?a.min_price:a,{name:"currency_format",hash:{},data:d}))+'<span class="rouble">₽</span></span></div></div></a>'},2:function(a,b,c,d){return"bprices_widget_results_item-hot"},4:function(a,b,c,d){return'<div class="bprices_widget_no_results">Ничего не найдено</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,null!=a?a.items:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.program(4,d),data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["common/autocomplete"]=a.template({1:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression,h='<li class="lt_autocomplete_country" data-label="'+g(f(null!=a?a.label:a,a))+'" data-iso2="'+g(f(null!=a?a.iso2:a,a))+'" data-code="Any-'+g(f(null!=a?a.code:a,a))+'"><div class="lt_autocomplete_country_name"><div class="lt_result_flag">';return e=f(null!=a?a.flag_code:a,a),null!=e&&(h+=e),h+='</div><div class="lt_result_country">'+g(f(null!=a?a.label:a,a))+'</div></div><ul class="lt_autocomplete_sublist">',e=b.each.call(a,null!=a?a.cities:a,{name:"each",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(h+=e),h+"</ul></li>"},2:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<li class="lt_autocomplete_city" data-label="'+f(e(null!=a?a.label:a,a))+'" data-iso2="'+f(e(null!=a?a.iso2:a,a))+'" data-code="'+f(e(null!=a?a.code:a,a))+'"><div class="lt_result_city">'+f(e(null!=a?a.label:a,a))+"</div></li>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div class="lt_selected_flag"></div><div class="lt_autocomplete"><ul class="lt_autocomplete_list">';return e=b.each.call(a,null!=a?a.results:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</ul></div>"},useData:!0}),this.LTApi.Utils.TEMPLATES["common/icon_button"]=a.template({1:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<i class="ltw-icon-'+i((f=null!=(f=b.icon_name||(null!=a?a.icon_name:a))?f:h,typeof f===g?f.call(a,{name:"icon_name",hash:{},data:d}):f))+' icon-button"></i><span class="lt_widget_button_content">';return f=null!=(f=b.content||(null!=a?a.content:a))?f:h,e=typeof f===g?f.call(a,{name:"content",hash:{},data:d}):f,null!=e&&(j+=e),j+"</span>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g="";return e=(b["content-tag"]||a&&a["content-tag"]||f).call(a,null!=a?a.button_tag:a,null!=a?a.attributes:a,{name:"content-tag",hash:{"class":"lt_widget_button"},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["common/location_detection"]=a.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<li data-code="'+h((e=null!=(e=b.code||(null!=a?a.code:a))?e:g,typeof e===f?e.call(a,{name:"code",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.name_ru||(null!=a?a.name_ru:a))?e:g,typeof e===f?e.call(a,{name:"name_ru",hash:{},data:d}):e))+"</li>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression,h='<div class="lt-location-detection"><div class="lt-location-detection-content"><div class="lt-location-detected"><div class="lt-location-detected-name">Ваш город вылета:<b>'+g(f(null!=(e=null!=a?a.detected:a)?e.name_ru:e,a))+'</b></div><div class="lt-location-detected-select"><button data-code="'+g(f(null!=(e=null!=a?a.detected:a)?e.code:e,a))+'">Да</button></div></div><div class="lt-location-select"><ul>';return e=b.each.call(a,null!=a?a.cities:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(h+=e),h+"</ul></div></div></div>"},useData:!0}),this.LTApi.Utils.TEMPLATES["common/locations_autocomplete"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div class="lt_locations_autocomplete"><div class="autocomplete_input"><span></span><a class="clear"><i class="ltw-icon-cross-2"></i></a></div><div class="autocomplete_results"><ul class="autocomplete_results_list"></ul></div></div>'},useData:!0}),this.LTApi.Utils.TEMPLATES["common/locations_autocomplete_results"]=a.template({1:function(a,b,c,d){var e,f='<div class="inner_list">';return e=b.each.call(a,null!=a?a.locations:a,{name:"each",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</div>"},2:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<li class="result result-location '+i((f=null!=(f=b["class"]||(null!=a?a["class"]:a))?f:h,typeof f===g?f.call(a,{name:"class",hash:{},data:d}):f))+'" data-type="'+i((f=null!=(f=b.type||(null!=a?a.type:a))?f:h,typeof f===g?f.call(a,{name:"type",hash:{},data:d}):f))+'" data-id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+'" data-iso2="'+i((f=null!=(f=b.iso2||(null!=a?a.iso2:a))?f:h,typeof f===g?f.call(a,{name:"iso2",hash:{},data:d}):f))+'">';return e=b["if"].call(a,null!=a?a.flag:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+" "+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:h,typeof f===g?f.call(a,{name:"name",hash:{},data:d}):f))+"</li>"},3:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<span class="'+h((e=null!=(e=b.flag_code||(null!=a?a.flag_code:a))?e:g,typeof e===f?e.call(a,{name:"flag_code",hash:{},data:d}):e))+'"></span>'},5:function(a,b,c,d){var e,f='<ul class="inner_list list_hotels">';return e=b.each.call(a,null!=a?a.hotels:a,{name:"each",hash:{},fn:this.program(6,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</ul>"},6:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<li class="result result-hotel '+i((f=null!=(f=b["class"]||(null!=a?a["class"]:a))?f:h,typeof f===g?f.call(a,{name:"class",hash:{},data:d}):f))+'" data-type="'+i((f=null!=(f=b.type||(null!=a?a.type:a))?f:h,typeof f===g?f.call(a,{name:"type",hash:{},data:d}):f))+'" data-id="'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+'" data-iso2="'+i((f=null!=(f=b.iso2||(null!=a?a.iso2:a))?f:h,typeof f===g?f.call(a,{name:"iso2",hash:{},data:d}):f))+'">';return e=b["if"].call(a,null!=a?a.flag:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+" "+i((f=null!=(f=b.name||(null!=a?a.name:a))?f:h,typeof f===g?f.call(a,{name:"name",hash:{},data:d}):f))+"</li>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b["if"].call(a,null!=(e=null!=a?a.locations:a)?e.length:e,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+=" ",e=b["if"].call(a,null!=(e=null!=a?a.hotels:a)?e.length:e,{name:"if",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["common/search_form_error"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<div class="lt_error_wrapper"><div class="lt_error">'+f(e(a,a))+"</div></div>"},useData:!0}),this.LTApi.Utils.TEMPLATES["common/simple_tooltip"]=a.template({1:function(a,b,c,d){return'<a class="simple_tooltip_close" href=""><i class="lt-icon-remove-2"></i></a>'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<div class="simple_tooltip" id="stt-'+i((f=null!=(f=b.id||(null!=a?a.id:a))?f:h,typeof f===g?f.call(a,{name:"id",hash:{},data:d}):f))+'">';return e=b["if"].call(a,null!=a?a.allow_close:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(j+=e),j+='<div class="simple_tooltip_body">',f=null!=(f=b.text||(null!=a?a.text:a))?f:h,e=typeof f===g?f.call(a,{name:"text",hash:{},data:d}):f,null!=e&&(j+=e),j+"</div></div>"},useData:!0}),this.LTApi.Utils.TEMPLATES["country_prices/data"]=a.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="lcw_preview_label"><div class="preview_label-country">'+h((e=null!=(e=b.country_name||(null!=a?a.country_name:a))?e:g,typeof e===f?e.call(a,{name:"country_name",hash:{},data:d}):e))+'</div><div class="preview_label-city">'+h((e=null!=(e=b.city_name||(null!=a?a.city_name:a))?e:g,typeof e===f?e.call(a,{name:"city_name",hash:{},data:d}):e))+'</div><div class="preview_label-bg"></div></div>'},3:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="lcw_preview_label lcw_preview_label-extended"><div class="preview_label-country">'+h((e=null!=(e=b.country_name||(null!=a?a.country_name:a))?e:g,typeof e===f?e.call(a,{name:"country_name",hash:{},data:d}):e))+'</div><div class="preview_label-bg"></div></div>'},5:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="lcw_prices_item"><div class="lcw_prices_item_label">Из '+h((e=null!=(e=b.city_form||(null!=a?a.city_form:a))?e:g,typeof e===f?e.call(a,{name:"city_form",hash:{},data:d}):e))+'</div><div class="lcw_prices_item_price"><a href="'+h((e=null!=(e=b.link||(null!=a?a.link:a))?e:g,typeof e===f?e.call(a,{name:"link",hash:{},data:d}):e))+'" target="_blank">за '+h((b.currency_format||a&&a.currency_format||g).call(a,null!=a?a.price:a,{name:"currency_format",hash:{},data:d}))+"₽</a></div></div>"},7:function(a,b,c,d){return'<div class="lcw_prices_nothing">Нет результатов</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<div class="lcw_preview" style="background: url(\''+i((f=null!=(f=b.image||(null!=a?a.image:a))?f:h,typeof f===g?f.call(a,{name:"image",hash:{},data:d}):f))+"');\">";return e=b["if"].call(a,null!=a?a.city_name:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.program(3,d),data:d}),null!=e&&(j+=e),j+='</div><div class="lcw_prices">',e=b.each.call(a,null!=a?a.response:a,{name:"each",hash:{},fn:this.program(5,d),inverse:this.program(7,d),data:d}),null!=e&&(j+=e),j+"</div>"},useData:!0}),this.LTApi.Utils.TEMPLATES["country_prices/index"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'<div id="lt_country_prices"><div class="lcw_wrapper"><div class="preloader"></div></div></div>';
},useData:!0}),this.LTApi.Utils.TEMPLATES["hot_tours_widget/country_item"]=a.template({1:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<div class="htours_countries_item" data-name="'+f(e(a,a))+'">'+f(e(a,a))+"</div>"},3:function(a,b,c,d){return'<div class="htours_countries_no-results">В данный момент горящих туров в этом направлении нет</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,null!=a?a.countries:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.program(3,d),data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["hot_tours_widget/hotel_item"]=a.template({1:function(a,b,c,d){var e,f,g=this.lambda,h=this.escapeExpression,i=b.helperMissing,j="function",k='<div class="htours_hotels_item"><div class="htours_hotels_item_bg"><div class="hotels_item_preview"><div class="hotels_item_preview_img" style="background-image: url(\''+h(g(null!=(e=null!=a?a.hotel:a)?e.picture:e,a))+'\');"></div><div class="preloader"></div>';return e=b["if"].call(a,null!=a?a.discount:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+'</div><div class="hotels_item_details"><div class="hotels_item_details_top"><div class="hotels_item_name">'+h(g(null!=(e=null!=a?a.hotel:a)?e.name:e,a))+'</div><div class="hotels_item_rating hotels_item_rating-'+h(g(null!=(e=null!=a?a.hotel:a)?e.stars:e,a))+'"><div class="hotels_item_rating_item"></div><div class="hotels_item_rating_item"></div><div class="hotels_item_rating_item"></div><div class="hotels_item_rating_item"></div><div class="hotels_item_rating_item"></div></div></div><div class="hotels_item_price">'+h((b.currency_format||a&&a.currency_format||i).call(a,null!=a?a.price:a,{name:"currency_format",hash:{},data:d}))+'<span class="rouble">₽</span></div><div class="hotels_item_details_l"><div class="hotels_item_ditem"><span class="hotels_item_ditem_icon hotels_item_ditem_icon-2_people"></span><span class="hotels_item_ditem_label">Цена на одного</span></div><div class="hotels_item_ditem"><span class="hotels_item_ditem_icon hotels_item_ditem_icon-calendar_2"></span><span class="hotels_item_ditem_label">'+h((b.format_date||a&&a.format_date||i).call(a,null!=a?a.date:a,{name:"format_date",hash:{format:"D MMMM",locale:"ltw_ru"},data:d}))+'</span></div><div class="hotels_item_ditem"><span class="hotels_item_ditem_icon hotels_item_ditem_icon-moon"></span><span class="hotels_item_ditem_label">На '+h((f=null!=(f=b.nights||(null!=a?a.nights:a))?f:i,typeof f===j?f.call(a,{name:"nights",hash:{},data:d}):f))+" "+h((b.pluralize||a&&a.pluralize||i).call(a,null!=a?a.nights:a,{name:"pluralize",hash:{v:"ночь, ночи, ночей"},data:d}))+'</span></div></div><div class="hotels_item_details_r"><a href="'+h((f=null!=(f=b.absolute_link||(null!=a?a.absolute_link:a))?f:i,typeof f===j?f.call(a,{name:"absolute_link",hash:{},data:d}):f))+'" class="hotels_item_link" target="'+h((f=null!=(f=b.link_target||(null!=a?a.link_target:a))?f:i,typeof f===j?f.call(a,{name:"link_target",hash:{},data:d}):f))+'">Хочу!</a></div></div></div></div>'},2:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="hotels_item_discount">- '+h((e=null!=(e=b.discount||(null!=a?a.discount:a))?e:g,typeof e===f?e.call(a,{name:"discount",hash:{},data:d}):e))+"%</div>"},4:function(a,b,c,d){return'<div class="htours_hotels_no-results">Нет предложений для данного направления</div>'},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,null!=a?a.hotels:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.program(4,d),data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["hot_tours_widget/index"]=a.template({1:function(a,b,c,d){return"htours_hotels-scrollable"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div id="hot_tours_widget" class="bprices_widget"><div class="htours_wrap"><div class="htours_countries"></div><div class="htours_hotels ';return e=b["if"].call(a,null!=a?a.scroll:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+'"><div class="htours_hotels_append"></div></div><div class="htours_hotels_more">Показать больше</div></div></div>'},useData:!0}),this.LTApi.Utils.TEMPLATES["hotels_widget/destinations"]=a.template({1:function(a,b,c,d){var e,f=" ";return e=b["if"].call(a,null!=a?a.cities:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.program(3,d),data:d}),null!=e&&(f+=e),f+" "},2:function(a,b,c,d){var e,f=" ";return e=b.each.call(a,null!=a?a.cities:a,{name:"each",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},3:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<option value="'+h((e=null!=(e=b.code||(null!=a?a.code:a))?e:g,typeof e===f?e.call(a,{name:"code",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.name_ru||(null!=a?a.name_ru:a))?e:g,typeof e===f?e.call(a,{name:"name_ru",hash:{},data:d}):e))+"</option>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["hotels_widget/index"]=a.template({1:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="lt_hotel_widget_title">'+g(f(null!=(e=null!=a?a.i18n:a)?e.title:e,a))+"</div>"},3:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="lt_hotel_widget_footer">'+g(f(null!=(e=null!=a?a.i18n:a)?e.footer:e,a))+"</div>"},5:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<option value="'+f(e(a,a))+'">'+f(e(a,a))+"</option>"},7:function(a,b,c,d){return'<i class="lt_widget_icon ltw-icon-adult"></i>'},9:function(a,b,c,d){return'<i class="lt_widget_icon ltw-icon-kid"></i>'},11:function(a,b,c,d){var e;return e=this.invokePartial(c.submit,"","submit",a,void 0,b,c,d),null!=e?e:""},13:function(a,b,c,d){var e,f='<div class="lt_hotel_widget_second_row"><div class="lt_hotel_widget_second_row_wrapper"></div>';return e=b["if"].call(a,null!=a?a.button_newline:a,{name:"if",hash:{},fn:this.program(11,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</div>"},15:function(a,b,c,d){var e,f='<div class="lt_hotel_widget_footer">';return e=this.invokePartial(c.copyright,"","copyright",a,void 0,b,c,d),null!=e&&(f+=e),f+"</div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda,k='<div id="lt_hotel_widget" class="lt_hotel_widget lt_reset_styles '+i((f=null!=(f=b.class_list||(null!=a?a.class_list:a))?f:h,typeof f===g?f.call(a,{name:"class_list",hash:{},data:d}):f))+'">';return e=b["if"].call(a,null!=a?a.show_title:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=" ",e=b["if"].call(a,null!=a?a.show_footer:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<div class="lt_hotel_widget_form"><div class="lt_widget_preloader"><table><tr><td>Загрузка...</td></tr></table></div><div class="lt_widget_error">Error text here</div><form class="lt_hotel_widget_form_wrapper" autocomplete="off"><div class="lt_hotel_widget_table_wrapper"><div class="lt_widget_fields"><table><tr><td class="lt_city_from_wrapper"><div class="lt_hotel_widget_field lt_city_from"><label for="w_city_from">'+i(j(null!=(e=null!=a?a.i18n:a)?e.destination_from:e,a))+'</label><select name="city_from" id="w_city_from"></select></div></td><td class="lt_start_date_wrapper"><div class="lt_hotel_widget_field lt_start_date"><label for="w_start_date">'+i(j(null!=(e=null!=a?a.i18n:a)?e.departure_date:e,a))+'</label><input type="text" autocomplete="off" name="start_date" id="w_start_date"><i class="lt_calendar_toggler ltw-icon-calendar-2"></i></div></td><td class="lt_nights_count_wrapper"><div class="lt_hotel_widget_field lt_nights_count"><label for="w_nights_count">'+i(j(null!=(e=null!=a?a.i18n:a)?e.nights_count:e,a))+'</label><select name="nights_count" id="w_nights_count">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.nights:e,{name:"each",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='</select></div></td><td class="lt_adults_count_wrapper"><div class="lt_hotel_widget_field lt_adults_count"><label for="w_adults_count">'+i(j(null!=(e=null!=a?a.i18n:a)?e.adults_count:e,a))+'</label><div class="lt_hotel_widget_field_wrapper">',e=b["if"].call(a,null!=a?a.show_icons:a,{name:"if",hash:{},fn:this.program(7,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<select name="adults_count" id="w_adults_count">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.adults:e,{name:"each",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='</select></div></div></td><td class="lt_kids_count_wrapper"><div class="lt_hotel_widget_field lt_kids_count"><label for="w_kids_count">'+i(j(null!=(e=null!=a?a.i18n:a)?e.kids_count:e,a))+'</label><div class="lt_hotel_widget_field_wrapper">',e=b["if"].call(a,null!=a?a.show_icons:a,{name:"if",hash:{},fn:this.program(9,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<select name="kids_count" id="w_kids_count">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.kids:e,{name:"each",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='</select></div></div></td><td class="lt_kids_ages_wrapper"><div class="lt_hotel_widget_field"><div class="lt_kids_ages"><label>'+i(j(null!=(e=null!=a?a.i18n:a)?e.kids_ages:e,a))+'</label><div class="lt_widget_kid_age"><input autocomplete="off" data-type="number"></div><div class="lt_widget_kid_age"><input autocomplete="off" data-type="number"></div><div class="lt_widget_kid_age"><input autocomplete="off" data-type="number"></div></div></div></td></tr></table></div>',e=b.unless.call(a,null!=a?a.button_newline:a,{name:"unless",hash:{},fn:this.program(11,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+="</div>",e=b["if"].call(a,null!=a?a.multiline:a,{name:"if",hash:{},fn:this.program(13,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=" ",e=b["if"].call(a,null!=(e=null!=a?a.partner:a)?e.show_copyright:e,{name:"if",hash:{},fn:this.program(15,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+'</form></div><div class="lt_widget_results_wrapper"><div class="lt_hotel_widget_prices_wrapper"></div><div class="lt_hotel_widget_results"></div></div></div>'},usePartial:!0,useData:!0}),this.LTApi.Utils.TEMPLATES["hotels_widget/mobile/index"]=a.template({1:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="lt_hotel_widget_title">'+g(f(null!=(e=null!=a?a.i18n:a)?e.title:e,a))+"</div>"},3:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="lt_hotel_widget_footer">'+g(f(null!=(e=null!=a?a.i18n:a)?e.footer:e,a))+"</div>"},5:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<option value="'+f(e(a,a))+'">'+f(e(a,a))+"</option>"},7:function(a,b,c,d){return'<i class="lt_widget_icon ltw-icon-adult"></i>'},9:function(a,b,c,d){return'<i class="lt_widget_icon ltw-icon-kid"></i>'},11:function(a,b,c,d){var e;return e=this.invokePartial(c.submit,"","submit",a,void 0,b,c,d),null!=e?e:""},13:function(a,b,c,d){var e,f='<div class="lt_hotel_widget_second_row"><div class="lt_hotel_widget_second_row_wrapper"></div>';return e=b["if"].call(a,null!=a?a.button_newline:a,{name:"if",hash:{},fn:this.program(11,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+"</div>"},15:function(a,b,c,d){var e,f='<div class="lt_hotel_widget_footer">';return e=this.invokePartial(c.copyright,"","copyright",a,void 0,b,c,d),null!=e&&(f+=e),f+"</div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda,k='<div id="lt_hotel_widget" class="lt_hotel_widget lt_reset_styles '+i((f=null!=(f=b.class_list||(null!=a?a.class_list:a))?f:h,typeof f===g?f.call(a,{name:"class_list",hash:{},data:d}):f))+'">';return e=b["if"].call(a,null!=a?a.show_title:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=" ",e=b["if"].call(a,null!=a?a.show_footer:a,{name:"if",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<div class="lt_hotel_widget_form"><form class="lt_hotel_widget_form_wrapper" autocomplete="off"><div class="lt_hotel_widget_table_wrapper"><div class="lt_widget_fields"><div class="lt_hotel_widget_field lt_city_from"><label for="w_city_from">'+i(j(null!=(e=null!=a?a.i18n:a)?e.destination_from:e,a))+'</label><select name="city_from" id="w_city_from"></select></div><div class="lt_hotel_widget_field lt_start_date"><label for="w_start_date">'+i(j(null!=(e=null!=a?a.i18n:a)?e.departure_date:e,a))+'</label><input type="text" autocomplete="off" name="start_date" id="w_start_date"><i class="lt_calendar_toggler ltw-icon-calendar-2"></i></div><div class="lt_hotel_widget_field lt_nights_count"><label for="w_nights_count">'+i(j(null!=(e=null!=a?a.i18n:a)?e.nights_count:e,a))+'</label><select name="nights_count" id="w_nights_count">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.nights:e,{name:"each",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='</select></div><div class="lt_hotel_widget_field lt_adults_count"><label for="w_adults_count">'+i(j(null!=(e=null!=a?a.i18n:a)?e.adults_count:e,a))+'</label><div class="lt_hotel_widget_field_wrapper">',e=b["if"].call(a,null!=a?a.show_icons:a,{name:"if",hash:{},fn:this.program(7,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<select name="adults_count" id="w_adults_count">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.adults:e,{name:"each",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='</select></div></div><div class="lt_hotel_widget_field lt_kids_count"><label for="w_kids_count">'+i(j(null!=(e=null!=a?a.i18n:a)?e.kids_count:e,a))+'</label><div class="lt_hotel_widget_field_wrapper">',e=b["if"].call(a,null!=a?a.show_icons:a,{name:"if",hash:{},fn:this.program(9,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<select name="kids_count" id="w_kids_count">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.kids:e,{name:"each",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='</select></div></div><div class="lt_hotel_widget_field lt_kids_ages lt_kids_ages_wrapper"><label>'+i(j(null!=(e=null!=a?a.i18n:a)?e.kids_ages:e,a))+'</label><div class="lt_widget_kid_age"><input autocomplete="off" data-type="number"></div><div class="lt_widget_kid_age"><input autocomplete="off" data-type="number"></div><div class="lt_widget_kid_age"><input autocomplete="off" data-type="number"></div></div></div>',e=b.unless.call(a,null!=a?a.button_newline:a,{name:"unless",hash:{},fn:this.program(11,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+="</div>",e=b["if"].call(a,null!=a?a.multiline:a,{name:"if",hash:{},fn:this.program(13,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+=" ",e=b["if"].call(a,null!=(e=null!=a?a.partner:a)?e.show_copyright:e,{name:"if",hash:{},fn:this.program(15,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+"</form></div></div>"},usePartial:!0,useData:!0}),this.LTApi.Utils.TEMPLATES["hotels_widget/mobile/results"]=a.template({1:function(a,b,c,d){var e,f='<div class="lt_hotel_widget_prices">';return e=this.invokePartial(c.prices,"","prices",a,void 0,b,c,d),null!=e&&(f+=e),f+"</div>"},3:function(a,b,c,d){var e;return e=this.invokePartial(c.mobile_result,"","mobile_result",a,void 0,b,c,d),null!=e?e:""},5:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="lt_widget_offers_more"><a class="no-handle" href="#">Показать еще '+h((e=null!=(e=b.left||(null!=a?a.left:a))?e:g,typeof e===f?e.call(a,{name:"left",hash:{},data:d}):e))+" "+h((b.pluralize||a&&a.pluralize||g).call(a,null!=a?a.left:a,{name:"pluralize",hash:{v:"предложение,предложения,предложений"},data:d}))+"</a></div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g="";return e=b["if"].call(a,null!=a?a.show_dates:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+='<div class="lt_hotel_widget_offers"><ul>',e=(b.first||a&&a.first||f).call(a,null!=a?a.results:a,null!=a?a.count:a,{name:"first",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+="</ul>",e=b["if"].call(a,null!=a?a.show_more:a,{name:"if",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+"</div>"},usePartial:!0,useData:!0}),this.LTApi.Utils.TEMPLATES["hotels_widget/nights_list"]=a.template({1:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<option value="'+f(e(a,a))+'">'+f(e(a,a))+"</option>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["hotels_widget/no_results"]=a.template({1:function(a,b,c,d){var e,f=this.lambda,g='<div class="lt_widget_no_results_content"><div class="lt_widget_no_results_guy"></div><div class="lt_widget_no_results_info"><div class="lt_widget_no_results_message">';return e=f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.no_results:e)?e.message:e,a),null!=e&&(g+=e),g+="</div>",e=b["if"].call(a,null!=(e=null!=a?a.config:a)?e.buttons:e,{name:"if",hash:{},fn:this.program(2,d),inverse:this.program(4,d),data:d}),null!=e&&(g+=e),g+"</div></div>"},2:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression,h='<div class="lt_widget_no_results_buttons"><div class="lt_widget_button_wrapper"><button class="lt_widget_button lt_widget_button_search"><span class="lt_button_icon lt_button_icon_'+g(f(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.no_results:e)?e.button_search:e)?e.icon:e,a))+'"></span>'+g(f(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.no_results:e)?e.button_search:e)?e.text:e,a))+'</button><div class="lt_widget_button_description">';return e=f(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.no_results:e)?e.button_search:e)?e.description:e,a),null!=e&&(h+=e),h+='</div></div><div class="lt_widget_button_wrapper"><button class="lt_widget_button lt_widget_button_call"><span class="lt_button_icon lt_button_icon_'+g(f(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.no_results:e)?e.button_call:e)?e.icon:e,a))+'"></span>'+g(f(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.no_results:e)?e.button_call:e)?e.text:e,a))+'</button><div class="lt_widget_button_description">',e=f(null!=(e=null!=(e=null!=(e=null!=a?a.i18n:a)?e.no_results:e)?e.button_call:e)?e.description:e,a),null!=e&&(h+=e),h+"</div></div></div>"},4:function(a,b,c,d){var e,f=this.lambda,g='<div class="lt_widget_no_results_alt_text">';return e=f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.no_results:e)?e.alt_text:e,a),null!=e&&(g+=e),g+"</div>"},6:function(a,b,c,d){var e,f=this.lambda,g=" ";return e=f(null!=(e=null!=a?a.config:a)?e.content:e,a),null!=e&&(g+=e),g+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f='<div class="lt_widget_no_results">';return e=b.unless.call(a,null!=(e=null!=a?a.config:a)?e.content:e,{name:"unless",hash:{},fn:this.program(1,d),inverse:this.program(6,d),data:d}),null!=e&&(f+=e),f+"</div>"},useData:!0}),this.LTApi.Utils.TEMPLATES["hotels_widget/results"]=a.template({1:function(a,b,c,d){var e,f='<div class="lt_hotel_widget_prices">';return e=this.invokePartial(c.prices,"","prices",a,void 0,b,c,d),null!=e&&(f+=e),f+"</div>"},3:function(a,b,c,d){var e;return e=this.invokePartial(c.result,"","result",a,void 0,b,c,d),null!=e?e:""},5:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="lt_widget_offers_more"><a class="no-handle" href="#">Показать еще '+h((e=null!=(e=b.left||(null!=a?a.left:a))?e:g,typeof e===f?e.call(a,{name:"left",hash:{},data:d}):e))+" "+h((b.pluralize||a&&a.pluralize||g).call(a,null!=a?a.left:a,{name:"pluralize",hash:{v:"предложение,предложения,предложений"},data:d}))+"</a></div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g="";return e=b["if"].call(a,null!=a?a.show_dates:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+='<div class="lt_hotel_widget_offers"><ul>',e=(b.first||a&&a.first||f).call(a,null!=a?a.results:a,null!=a?a.count:a,{name:"first",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+="</ul>",e=b["if"].call(a,null!=a?a.show_more:a,{name:"if",hash:{},fn:this.program(5,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+"</div>"},usePartial:!0,useData:!0}),this.LTApi.Utils.TEMPLATES["price_stat/cols"]=a.template({1:function(a,b,c,d){var e,f=" ";return e=b.each.call(a,null!=a?a.cols:a,{name:"each",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},2:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j='<td class="col '+i((f=null!=(f=b.class_list||(null!=a?a.class_list:a))?f:h,typeof f===g?f.call(a,{name:"class_list",hash:{},data:d}):f))+'" ';return f=null!=(f=b.dataset||(null!=a?a.dataset:a))?f:h,e=typeof f===g?f.call(a,{name:"dataset",hash:{},data:d}):f,null!=e&&(j+=e),j+=">",e=b.unless.call(a,null!=a?a.disabled:a,{name:"unless",hash:{},fn:this.program(3,d),inverse:this.program(5,d),data:d}),null!=e&&(j+=e),j+"</td>"},3:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression,h='<a href="'+g(f(null!=(e=null!=a?a.link:a)?e.url:e,a))+'" target="'+g(f(null!=(e=null!=a?a.link:a)?e.target:e,a))+'" class="column_link">';return e=this.invokePartial(c.col_content,"","col_content",a,void 0,b,c,d),null!=e&&(h+=e),h+"</a>"},5:function(a,b,c,d){var e,f=" ";return e=this.invokePartial(c.col_content,"","col_content",a,void 0,b,c,d),null!=e&&(f+=e),f+" "},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g="";return e=(b.namespace||a&&a.namespace||f).call(a,"lt",{name:"namespace",hash:{except:"ltw"},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+" "},usePartial:!0,useData:!0}),this.LTApi.Utils.TEMPLATES["price_stat/index"]=a.template({1:function(a,b,c,d){var e,f=b.helperMissing,g=this.escapeExpression,h='<div class="price_statistic"><div class="statistic_header"><ul><li class="title';return e=b.unless.call(a,null!=(e=null!=a?a.config:a)?e.full_month:e,{name:"unless",hash:{},fn:this.program(2,d),inverse:this.noop,data:d}),null!=e&&(h+=e),h+='"><div class="title_content"><span class="title_1">'+g((b.nbsp||a&&a.nbsp||f).call(a,"Стоимость туров на ",{name:"nbsp",hash:{},data:d}))+'</span><span class="title_2">'+g((b.nbsp||a&&a.nbsp||f).call(a,"7 ночей / человека",{name:"nbsp",hash:{},data:d}))+"</span></div></li>",e=b["if"].call(a,null!=(e=null!=a?a.config:a)?e.full_month:e,{name:"if",hash:{},fn:this.program(4,d),inverse:this.noop,data:d}),null!=e&&(h+=e),h+'</ul></div><div class="statistic_slider"><div class="slider_content">azazaza</div><div class="slider_angle"></div></div><div class="statistic_body"><div class="statistic_content"><ul class="lines"><li class="line top_line"><span></span></li><li class="line bottom_line"><span></span></li></ul><div class="cols"><div class="extras"><a href="#" class="link_external"></a><div class="preloader"></div></div><div class="stat_table"><div class="stat_scroll stat_table_scroll_left">'+g((b.lt_icon||a&&a.lt_icon||f).call(a,"chevron-thin-left",{name:"lt_icon",hash:{},data:d}))+'</div><div class="stat_scroll stat_table_scroll_right">'+g((b.lt_icon||a&&a.lt_icon||f).call(a,"chevron-thin-right",{name:"lt_icon",hash:{},data:d}))+'</div><div class="stat_table_scroll"><table><tbody><tr class="columns_row"><td><div class="column"></div><div class="date"></div></td></tr></tbody></table></div></div></div></div></div></div>'},2:function(a,b,c,d){return" full_width"},4:function(a,b,c,d){var e=b.helperMissing,f=this.escapeExpression;return'<li class="month"><span class="prev_month">'+f((b.lt_icon||a&&a.lt_icon||e).call(a,"chevron-thin-left",{name:"lt_icon",hash:{},data:d}))+'</span><span class="current_month">Сентябрь 2015</span><span class="next_month">'+f((b.lt_icon||a&&a.lt_icon||e).call(a,"chevron-thin-right",{name:"lt_icon",hash:{},data:d}))+"</span></li>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=b.helperMissing,g="";return e=(b.namespace||a&&a.namespace||f).call(a,"lt",{name:"namespace",hash:{except:"ltw"},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(g+=e),g+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["scripts/lookinhotels_pixel"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return"var __GetI = __GetI || []; (function () { var p = { type: \"VIEW\", site_id: \"12\", pixel_id: \"lookinhotels\" }; __GetI.push(p); var domain = (typeof __GetI_domain) == \"undefined\" ? \"px.adhigh.net\" : __GetI_domain; var src = ('https:' == document.location.protocol ? 'https://' : 'http://') + domain + '/p.js'; var script = document.createElement('script'); script.type = 'text/javascript'; script.src = src; script.async = true; document.body.appendChild(script); })(); "},useData:!0}),this.LTApi.Utils.TEMPLATES["scripts/test_script"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return'(function(){ setTimeout(function(){ console.log("This script was executed after actual script removal.") }, 5000) })(); '},useData:!0}),this.LTApi.Utils.TEMPLATES["scripts/travelpayouts_pixel"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){return"var __GetI = __GetI || []; (function () { var p = { type: \"VIEW\", site_id: \"12\", pixel_id: \"travelpayouts\" }; __GetI.push(p); var domain = (typeof __GetI_domain) == \"undefined\" ? \"px.adhigh.net\" : __GetI_domain; var src = ('https:' == document.location.protocol ? 'https://' : 'http://') + domain + '/p.js'; var script = document.createElement('script'); script.type = 'text/javascript'; script.src = src; script.async = true; document.body.appendChild(script); })(); "},useData:!0}),this.LTApi.Utils.TEMPLATES["search_widget/destinations"]=a.template({1:function(a,b,c,d){var e,f=" ";return e=b["if"].call(a,null!=a?a.cities:a,{name:"if",hash:{},fn:this.program(2,d),inverse:this.program(3,d),data:d}),null!=e&&(f+=e),f+" "},2:function(a,b,c,d){var e,f=" ";return e=b.each.call(a,null!=a?a.cities:a,{name:"each",hash:{},fn:this.program(3,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},3:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<option value="'+h((e=null!=(e=b.code||(null!=a?a.code:a))?e:g,typeof e===f?e.call(a,{name:"code",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.name_ru||(null!=a?a.name_ru:a))?e:g,typeof e===f?e.call(a,{name:"name_ru",hash:{},data:d}):e))+"</option>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["search_widget/index"]=a.template({1:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="widget_title"><span>'+g(f(null!=(e=null!=a?a.i18n:a)?e.title:e,a))+"</span></div>"},3:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="lt-row location_departure"><div class="lt-col-12 main_elem"><label for="from">'+g(f(null!=(e=null!=a?a.i18n:a)?e.destination_from:e,a))+'</label><select id="from"></select></div></div><div class="lt-row location_arrival"><div class="lt-col-12 main_elem"><label>'+g(f(null!=(e=null!=a?a.i18n:a)?e.destination_to:e,a))+'</label><input id="to" autocomplete="off" type="text" placeholder="'+g(f(null!=(e=null!=a?a.i18n:a)?e.placeholder:e,a))+'"></div></div>'},5:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div class="lt-row location"><div class="lt-col-4 main_elem"><div class="location_departure"><label for="from">'+g(f(null!=(e=null!=a?a.i18n:a)?e.destination_from:e,a))+'</label><select id="from"></select></div></div><div class="lt-col-8 main_elem"><div class="location_arrival"><label>'+g(f(null!=(e=null!=a?a.i18n:a)?e.destination_to:e,a))+'</label><input id="to" autocomplete="off" type="text" placeholder="'+g(f(null!=(e=null!=a?a.i18n:a)?e.placeholder:e,a))+'"></div></div></div>'},7:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<option value="'+f(e(a,a))+'">'+f(e(a,a))+"</option>"},9:function(a,b,c,d){return'<i class="lt_widget_icon ltw-icon-adult"></i>'},11:function(a,b,c,d){return'<i class="lt_widget_icon ltw-icon-kid"></i>'},13:function(a,b,c,d){var e,f='<div class="lt_search_widget_label">';return e=this.invokePartial(c.copyright,"","copyright",a,void 0,b,c,d),null!=e&&(f+=e),f+"</div>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f,g="function",h=b.helperMissing,i=this.escapeExpression,j=this.lambda,k='<div id="lt_search_widget" class="'+i((f=null!=(f=b.class_list||(null!=a?a.class_list:a))?f:h,typeof f===g?f.call(a,{name:"class_list",hash:{},data:d}):f))+'">';return e=b["if"].call(a,null!=a?a.show_title:a,{name:"if",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<div class="lt_search_widget_body"><div class="lt_widget_preloader"><table><tr><td>Загрузка...</td></tr></table></div><div class="lt_widget_error">Error text here</div><div class="lt_search_widget_form"><div class="lt_search_widget_form_wrapper">',e=b.unless.call(a,null!=a?a.collapse_location:a,{name:"unless",hash:{},fn:this.program(3,d),inverse:this.program(5,d),data:d}),null!=e&&(k+=e),k+='<div class="lt-row duration_time"><div class="lt-col-8 departure_date"><label>'+i(j(null!=(e=null!=a?a.i18n:a)?e.departure_date:e,a))+'</label><input id="departure" autocomplete="off" class="lt_calendar_connect" type="text"><i class="lt_calendar_toggler ltw-icon-calendar-2"></i></div><div class="lt-col-4 nights_count"><label class=\'align-center\'>'+i(j(null!=(e=null!=a?a.i18n:a)?e.nights_count:e,a))+'</label><select id="nights">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.nights:e,{name:"each",hash:{},fn:this.program(7,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='</select></div></div><div class="lt-row tourists_count"><div class="lt-col-7 counters"><div class="lt-row"><div class="lt-col-6 adults_count">',e=b["if"].call(a,null!=a?a.show_icons:a,{name:"if",hash:{},fn:this.program(9,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<div class="selectbox_wrapper"><label for="adults" class=\'top_label align-center no-padding\'>'+i(j(null!=(e=null!=a?a.i18n:a)?e.adults_count:e,a))+'</label><select id="adults">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.adults:e,{name:"each",hash:{},fn:this.program(7,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+="</select><label for=\"adults\" class='bottom_label align-center no-padding'>"+i(j(null!=(e=null!=a?a.i18n:a)?e.adults_count:e,a))+'</label></div></div><div class="lt-col-6 kids_count">',e=b["if"].call(a,null!=a?a.show_icons:a,{name:"if",hash:{},fn:this.program(11,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+='<div class="selectbox_wrapper"><label for="kids" class=\'top_label align-center no-padding\'>'+i(j(null!=(e=null!=a?a.i18n:a)?e.kids_count:e,a))+'</label><select id="kids">',e=b.each.call(a,null!=(e=null!=a?a.lists:a)?e.kids:e,{name:"each",hash:{},fn:this.program(7,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+="</select><label for=\"kids\" class='bottom_label align-center no-padding'>"+i(j(null!=(e=null!=a?a.i18n:a)?e.kids_count:e,a))+'</label></div></div></div></div><div class="lt-col-5 ages"><div class="lt-row kids_ages"><label class=\'top_label align-center no-padding\'>'+i(j(null!=(e=null!=a?a.i18n:a)?e.kids_ages:e,a))+'</label><div class="lt-col-4 kid_age"><input autocomplete="off" data-type=\'number\'></div><div class="lt-col-4 kid_age"><input autocomplete="off" data-type=\'number\'></div><div class="lt-col-4 kid_age"><input autocomplete="off" data-type=\'number\'></div><label class=\'bottom_label align-center no-padding\'>'+i(j(null!=(e=null!=a?a.i18n:a)?e.kids_ages:e,a))+'</label></div></div></div></div><div class="lt_search_widget_button"><a href="#" class="lt_search_widget_submit">'+i(j(null!=(e=null!=a?a.i18n:a)?e.submit:e,a))+"</a>",
e=b["if"].call(a,null!=(e=null!=a?a.partner:a)?e.show_copyright:e,{name:"if",hash:{},fn:this.program(13,d),inverse:this.noop,data:d}),null!=e&&(k+=e),k+"</div></div></div></div>"},usePartial:!0,useData:!0}),this.LTApi.Utils.TEMPLATES["search_widget/nights_list"]=a.template({1:function(a,b,c,d){var e=this.lambda,f=this.escapeExpression;return'<option value="'+f(e(a,a))+'">'+f(e(a,a))+"</option>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["selectbox/head"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="lt_selectbox_head"><div class="lt_selectbox_current">'+h((e=null!=(e=b.title||(null!=a?a.title:a))?e:g,typeof e===f?e.call(a,{name:"title",hash:{},data:d}):e))+'</div><div class="lt_selectbox_downarrow"><span></span></div></div>'},useData:!0}),this.LTApi.Utils.TEMPLATES["selectbox/options"]=a.template({1:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<option value="'+h((e=null!=(e=b.value||(null!=a?a.value:a))?e:g,typeof e===f?e.call(a,{name:"value",hash:{},data:d}):e))+'">'+h((e=null!=(e=b.label||(null!=a?a.label:a))?e:g,typeof e===f?e.call(a,{name:"label",hash:{},data:d}):e))+"</option>"},compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="";return e=b.each.call(a,null!=a?a.options:a,{name:"each",hash:{},fn:this.program(1,d),inverse:this.noop,data:d}),null!=e&&(f+=e),f+" "},useData:!0}),this.LTApi.Utils.TEMPLATES["selectbox/wrapper"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f="function",g=b.helperMissing,h=this.escapeExpression;return'<div class="lt_selectbox '+h((e=null!=(e=b.class_name||(null!=a?a.class_name:a))?e:g,typeof e===f?e.call(a,{name:"class_name",hash:{},data:d}):e))+'"></div>'},useData:!0}),this.LTApi.Utils.TEMPLATES["subscribe_widget/index"]=a.template({compiler:[6,">= 2.0.0-beta.1"],main:function(a,b,c,d){var e,f=this.lambda,g=this.escapeExpression;return'<div id="lt_subscribe_widget"><div class="lt_subscribe_widget_body"><div class="lt_widget_error">Error text here</div><div class="lt_widget_preloader"></div><div class="lt_subscribe_success"><div class="lt_subscribe_success_wrap"><div class="lt_subscribe_success_icon"></div><div class="lt_subscribe_success_label">'+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.popups:e)?e.success_label:e,a))+'</div><div class="lt_subscribe_success_button">'+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.popups:e)?e.success_button:e,a))+'</div></div></div><div class="lt_subscribe_fail"><div class="lt_subscribe_fail_wrap"><div class="lt_subscribe_fail_icon"></div><div class="lt_subscribe_fail_label">'+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.popups:e)?e.error_label:e,a))+'</div><div class="lt_subscribe_fail_desc">'+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.popups:e)?e.error_desc:e,a))+'</div></div></div><div class="lt_subscribe_widget_form"><form autocomplete="off"><div class="lt_subscribe_widget_form_input sform_country_to"><label for="country_to">'+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.labels:e)?e.destination_to:e,a))+'</label><input placeholder="'+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.labels:e)?e.dto_placeholder:e,a))+'" id="country_to"/></div><div class="lt_subscribe_widget_form_input sform_date"><label for="date">'+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.labels:e)?e.departure_date:e,a))+'</label><input id="date"/></div><div class="lt_subscribe_widget_form_input sform_email"><label for="email">'+g(f(null!=(e=null!=(e=null!=a?a.i18n:a)?e.labels:e)?e.email:e,a))+'</label><input id="email" placeholder="ваш@e-mail.com"/></div><div class="lt_subscribe_widget_form_button"><button type="submit" class="lt_subscribe_btn">Отправить</button></div></form></div></div></div>'},useData:!0})}(LTApi.Handlebars),function(){LTApi.Utils.I18N={ltw_ru:{months:["Январь","Февраль","Март","Апрель","Май","Июнь","Июль","Август","Сентябрь","Октябрь","Ноябрь","Декабрь"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},ltw_ru_alt:{months:["Января","Февраля","Марта","Апреля","Мая","Июня","Июля","Августа","Сентября","Октября","Ноября","Декабря"],monthsShort:["Янв","Фев","Мар","Апр","Май","Июн","Июл","Авг","Сен","Окт","Ноя","Дек"],weekdays:["Воскресенье","Понедельник","Вторник","Среда","Четверг","Пятница","Суббота"],weekdaysShort:["Вс","Пн","Вт","Ср","Чт","Пт","Сб"]},ltw_ru_alt_lower:{months:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],monthsShort:["янв","фев","мар","апр","май","июн","июл","авг","сен","окт","ноя","дек"],weekdays:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],weekdaysShort:["вс","пн","вт","ср","чт","пт","сб"]},ltw_ru_light:{months:["январь","февраль","март","апрель","май","июнь","июль","август","сентябрь","октябрь","ноябрь","декабрь"],monthsShort:["января","февраля","марта","апреля","мая","июня","июля","августа","сентября","октября","ноября","декабря"],weekdays:["воскресенье","понедельник","вторник","среда","четверг","пятница","суббота"],weekdaysShort:["вс","пн","вт","ср","чт","пт","сб"]}}}.call(this),function(){LTApi.Utils.each(Object.keys(LTApi.Utils.I18N),function(a){var b;return b=LTApi.Utils.I18N[a],LTApi.moment.locale(a,b)}),LTApi.moment.locale("ltw_ru")}.call(this),function(){LTApi.Utils.locale={errorsRequest:"На странице произошла ошибка",reloadRequest:"Сейчас вы будете перемещены на главную страницу",wrong_kb_layout:"Неверная раскладка",gallery_loading:"Загрузка изображения",image_error:"Ошибка загрузки","true":"да","false":"нет",matcher:{key:"Значение оператора",value:"Значение LT",country:"Страна",region:"Регион",iso2:"ISO2",country_iso2:"ISO2",name:"Название",code:"Аэропорт",collection_name:"Название коллекции",count:"Количество записей",name_ru:"Название (РУС.)",name_en:"Название (АНГ.)",errors:"Ошибки"},call_me_maybe:{title:"Помочь с выбором?",phone:"+7 (495) 739-98-43",call_back:"или мы вам перезвоним",thanks:"Спасибо! Мы скоро перезвоним Вам."},search_form:{city_from_name:"Напишите название города отправления",city_to_name:"Напишите где бы вы хотели отдохнуть (город или страна)",adults_count:"Количество туристов может быть от 1 до 4",kids_count:"Количество детей может быть от 0 до 3",kids_ages:"Возраст детей должен быть от 0 до 16 лет",wrongFieldFormat:"Поле заполнено неверно"},no_results:{other_tours:"Мы будем искать туры по тем же <br> параметрам по всей стране",flex_dates:"Мы будем искать туры <br> по тем же параметрам <br> по расширенному диапазону дат",help_me:"Мы позвоним вам и поможем <br> подобрать альтернативные <br> варианты отдыха",show_all:"Мы сбросим параметры фильтрации <br> и покажем все загруженные результаты"},order:{fname_ru:"Пожалуйста, введите Ваше имя по-русски",sname_ru:"Пожалуйста, введите Вашу фамилию по-русски",passport:"Заполняйте это поле как в заграничном паспорте",agreement:"Необходимо согласиться с правилами договора-оферты",no_flights:"К сожалению, в настоящий момент информация недоступна :( <br/> Для уточнения информации по перелетам позвоните нашему менеджеру."},cache:{expired:"Данные на странице могли потерять актуальность со времени последнего поиска",reload:"Обновить"},search:{countries:"Страны",featured:"Популярные курорты",map:"Карта",choose_city:"или выбрать курорт для более точных результатов...",autocomplete:"введите или выберите страну, город или курорт",any_city_desc:"искать по всей стране, чтобы увидеть больше предложений",kids_ages:"Пожалуйста, укажите полный возраст ребенка<br> на момент предполагаемой даты возврата."},buy:{hide:"скрыть"},tours:{loading:["Ищем лучшие туры...","Выбираем отличные отели...","Настраиваем интернет на отдых...","Анализируем рейтинги...","Измеряем температуру воды...","Почти готово...","Собираем все воедино..."],trySearchAnother:"К сожалению нет туров, подходящих критериям поиска.<br/>Попробуйте поискать %{country_name}.",tryChangeSearch:'К сожалению нет туров, подходящих критериям поиска.<br/>Попробуйте <a href="#" class="change"><span>изменить параметры</span></a> поиска.',"try":"Попытка",serverError:"Ошибка сервера",no_more:"Вы уже все посмотрели. Попробуйте<br>поискать другие варианты. :)",wanna_more:"Хочу еще!"},pansions:{ai:"все включено",uai:"все включено ультра","ai light":"завтрак, обед, ужин + местные напитки",hb:"завтрак, ужин","hb+":"завтрак, ужин ультра",fb:"завтрак, обед, ужин","fb+":"завтрак, обед, ужин ультра",bb:"завтрак",bbl:"легкий завтрак",ro:"без питания","s-class":"все включено S-CLASS","24 hours ai":"24/7 все включено","ai hard":"все включено","super ai":"супер все включено","royal ai":"супер все включено","bb+":"завтрак ультра",sl:"легкие закуски","snacks ai":"завтрак и ужин в ресторане, на обед закуски в пляжном баре","limited ai":"AI с ограничениями",lai:"AI с ограничениями","lux ai":"AI люкс"},operators:{1:"TezTour",2:"Coral",3:"Sunmar",4:"Pegast",5:"Labirint",6:"AnexTour",7:"Biblio Globus",8:"ICS travel",9:"InnaTour",10:"Intaer",11:"Intravel Stoleshniki",12:"Sunrise Tour",13:"Troyka",14:"TUI",15:"Vand",16:"Natalie Tours",17:"Grand Tour Voyage",18:"Carib",19:"Maldiviana",20:"Solvex",21:"Paks",22:"Russian Express",23:"Transaero Tour",24:"Ukrest",25:"MegaDialog",26:"PolarTour",27:"AnexTour"},"package":{collapse_offers:"Скрыть туры",expand_offers:"Выбрать тур",icons:{instant:"В этом отеле есть предложения с &laquo;мгновенным подтверждением&raquo;.<br>Такие туры обычно подтверждаются быстрее.",ebooking:"В данный отель есть туры, предлагаемые на условиях &laquo;раннего бронирования&raquo;.<br> Приобретая путевку заранее, вы экономите."}},offers:{more:"В этот отель есть еще",tour:{one:"тур",few:"тура",many:"туров"},fieldsNames:{room_type:"Номер",arrival_date:"Начало",nights:"Ночи",pansion:"Питание",operator:"Туроператор",booking:"Бронирование",price:"Цена"},offerData:{info:"Подробная информация",arrival_date:"Дата заезда",shift_date:"Дата вылета",pansion:"Питание",stay_type:"Тип размещения",economy_to:"Эконом туда",economy_return:"Эконом обратно",room_type:"Номер",fuel_charge:"Топливный сбор",instant:"Мгновенное подтверждение",early_booking:"Раннее бронирование"},icons:{instant:"Тур с &laquo;мгновенным подтверждением&raquo; подтверждается быстрее, чем другие.",ebooking:"Этот тур предлагается туроператором на условиях<br>&laquo;раннего бронирования&raquo;. Заказать его сейчас будет выгоднее."}},rating:{title:"Рейтинг отеля",rating_title:"Рейтинг:",titles:{hotel:"Отель",room:"Номер",service:"Сервис",location:"Место положения",sport:"Спорт и развлечения",gastronomy:"Питание",average:"Суммарный рейтинг"}},admin:{view:{global:"Посмотреть на сайте",local:"Посмотреть локально"},debug:{enable:"Включить отладку",disable:"Выключить отладку"}},manager:{no_comment:"комментарии не оставлены",actions:{approve:"Одобрить",mark_paid:"Подтвердить оплату",submit_booking:"Заявка отправлена ТО",confirm:"Тур подтвержден",send_documents:"Отправить документы",confirm_flight:"Рейс в порядке",cancel:"Отменить",drop:"Вернуть"},order_status:{created:"новый",approved:"одобрен",paid:"оплачен",booked:"бронь оформлена",confirmed:"подтвержден",documents_sent:"док. высл.",flight_confirmed:"рейс ОК",canceled:"отменен"},sorting:{id:"ID",created_at:"заказ оформлен","package.start_date":"вылет","package.arrival_date":"заселение"},errors:{unfinished_payments:"Есть незавершенные платежи. Необходимо завершить все платежи перед подтверждением тура.",no_flights_info:"Перед отправкой уведомления о подтверждении бронирования необходимо заполнить информацию о перелетах.",no_attachments:"Прежде чем отправить документы их необходимо прикрепить к заказу",wrong_file_type:"Неверный тип файла",file_attached:"Файл уже прикреплен"},uploader:{dnd:"Перетащи файлы сюда",title:"Загрузка файлов",upload:"Загрузить",cancel:"Остановить загрузку",clean:"Очистить очередь",complete:"Загрузка завершена",close:"Закрыть"}},hotel_matcher:{collections:"коллекции",select_collection:"Выберите коллекцию слева",view_hotel:"I",h:{actions:"действия",hotel_info:"отель оператора",hotel_local:"наш отель (название или ID)"}},hotel_editor:{actions:{add_dnl_item:"Добавить",hotel_remove:"Удалить отель",hotel_save:"Сохранить",upload:"Загрузить изображения"},pholders:{short_info:"Короткое описание",hotel_info:"Информация об отеле",links_uploader:"Загрузка по ссылкам",filed_uploader:"Загрузка файлов",input_images:"Вставьте ссылки на изображения сюда. Одна ссылка на строку."},facilities:{territory:"Территория",room_types:"Типы комнат",room_facilities:"Удобства в номере",attractions:"Развлечения",kids_facilities:"Для детей"}},validation:{date:"Неправильная дата",phone:"Неверный формат номера телефона",phone_short:"Неверный формат номера телефона",phone_all:"Неверный формат номера телефона",mask:"Поле имеет неверный формат",email:"Неверный формат электронного адреса",string:"Разрешены только латинские и русские буквы",string_ex:"Разрешены только цифры и латинские или русские буквы",string_ru:"Заполните на русском языке",string_en:"Заполните на английском языке",select:"Выберите значение",not_empty:"Поле не может быть пустым",length_gt:"Не меньше {v} символов",length_lt:"Не больше {v} символов",between:"Длина должна быть {v} символов",number:"Число не может быть больше {v}",range:"Число должно быть в диапазонe {v}",range_eq:"Число должно быть в диапазоне {v} включительно",lt_number:"Число должно быть меньше {v}",le_number:"Число должно быть меньше или равно {v}",gt_number:"Число должно быть больше {v}",ge_number:"Число должно быть больше или равно {v}",kb_layout_ru:"Неверная раскладка",kb_layout_en:"Неверная раскладка",checked:"Нужно согласиться с условиями договора-оферты",placeholder:"Поле не может быть пустым"},locale:{gallery:{loading:"Загрузка фотографий",error:"Ошибка загрузки фотографий :(",loading_error:"Произошла ошибка при загрузке фотографий :(",enlarge_image:"Увеличить изображение"}},gallery:{fcr_title:"Фотография",fcr_divider:"из"}}}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.Utils.URLMaker=function(b){function c(a,b){null==a&&(a={}),this.query_params=null!=b?b:{},this.base_url=this.u.cfg("external_url"),this.set_params(a)}var d,e,f;return a(c,b),f={search:"{{f}}-to-{{t}}-departure-{{d}}-for-{{n}}-nights-{{a}}-adults-{{k}}-kids-{{s}}-stars{{{p}}}{{{fd}}}",country:"{{f}}-to-{{t}}-departure-{{d}}-for-{{n}}-nights-{{a}}-adults-{{k}}-kids-{{s}}-stars{{{p}}}{{{fd}}}",hotel:"from={{f}}&start_date={{d}}&nights={{n}}&adults={{a}}&kids={{k}}{{#if ka}}&kids_ages={{ka}}{{/if}}{{{p}}}"},e={search:"/search/",country:"/search/",hotel:"?"},d={search:"?",country:"?",hotel:"&"},c.prototype.set_params=function(a){return this.sp=a||{},this},c.prototype.compile=function(a){var b,c,e,f,g;return e={},g=LTApi.URI().query(this.query_params),this.sp.from&&this.u.merge(e,{f:this.normalize_location_name(this.sp.from)}),this.sp.to&&"search"===a&&this.u.merge(e,{t:this.normalize_location_name(this.sp.to)}),this.u.merge(e,{d:this.normalize_date(this.sp.start_date),n:this.normalize_nights(this.sp.nights),a:this.normalize_adults(this.sp.adults)}),"search"===a?this.u.merge(e,{k:this.normalize_kids(this.sp.kids),s:this.normalize_stars(this.sp.stars)}):this.u.merge(e,{k:this.normalize_kids(this.sp.kids,!1),ka:this.normalize_kids_ages(this.sp.kids)}),this.u.is("object",this.sp.params)&&(f=d[a],this.u.merge(e,{p:this.normalize_params(this.sp.params,f)})),(this.sp.flex||this.sp.flex_dates||(null!=(c=this.sp.extra)?c.flex_dates:void 0))&&g.addQuery({flex_dates:!0}),this.u.merge(e,{fd:(b=g.query()).length?"?"+b:""}),e},c.prototype.toString=function(a){var b,c;return null==a&&(a="search"),c=this.template(a),b=this.compile(a),c(b)},c.prototype.format=function(a,b){return null==b?this.toString(a):[this.trim_slashes(b),this.cleanup_slashes(e[a]),this.toString(a)].join("")},c.prototype.template=function(a){var b;return b=f[a],LTApi.Utils.assert("Unknown type of search query: "+a,!!b),LTApi.Handlebars.compile(b)},c.prototype.normalize_location_name=function(a){var b,c;return b=a.city,c=a.country,b=this.u.is("object",b)?b.name_en:b,c=this.u.is("object",c)?c.iso2:c,this.encode_location(b,c)},c.prototype.normalize_date=function(a){return this.u.not("date moment",a)?a:(this.u.not("moment",a)&&(a=LTApi.moment(a)),a.format("DD.MM.YYYY"))},c.prototype.trim_slashes=function(a){return a.replace(/([\/]+)$/i,"")},c.prototype.cleanup_slashes=function(a){return a.replace(/([\/]+)$/i,"/")},c.prototype.normalize_nights=function(a){var b,c;return this.normalize_range(a,function(){for(c=[],b=1;200>=b;b++)c.push(b);return c}.apply(this))},c.prototype.normalize_stars=function(a){return this.normalize_range(a,[1,2,3,4,5])},c.prototype.normalize_adults=function(a){return this.normalize_numbers(a,[1,2,3,4])},c.prototype.normalize_kids=function(a,b){var c,d;return null==b&&(b=!0),d=this.normalize_numbers(a.count,[0,1,2,3]),b?(c=this.normalize_kids_ages(a),c?d+"("+c+")":""+d):""+d},c.prototype.normalize_kids_ages=function(a){var b,c;return c=this.normalize_numbers(a.count,[0,1,2,3]),b=this.u.first(a.ages,c),b.join(",")},c.prototype.normalize_params=function(a,b){var c;return this.u.is("object",a)?(c=this.u.toQueryString(a),b+c):""},c.prototype.normalize_range=function(a,b){var c,d,e;return this.u.is("object",a)||(a={from:a,to:a}),d=[a.from,a.to].map(Number),d=this.u.sort(d).map(function(a){return function(c){return a.normalize_numbers(c,b)}}(this)),c=d[0],e=d[1],c!==e?c+".."+e:""+c},c.prototype.normalize_numbers=function(a,b){return null==b?a:this.u.min([this.u.max([Number(a),this.u.min(b)]),this.u.max(b)])},c.prototype.encode_location=function(a,b){return a=(a||"Any").replace(/([\s]+)/,".").replace(/([\-]+)/,"+"),a+"-"+b},c.prototype.decode_location=function(a){var b,c,d;return d=a.split("-"),b=d[0],c=d[1],b=b.replace(/([\.]+)/," ").replace(/([\+]+)/,"-"),{city:b,country:c}},c}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;LTApi.Utils.ScriptExecutor=function(b){function d(){return d.__super__.constructor.apply(this,arguments)}var e,f;return a(d,b),e=LTApi.Utils.RSVP.Promise,f=LTApi.Utils,d.executed=[],d.add_script=function(a){return document.body.appendChild(a)},d.remove_script=function(a){return document.body.removeChild(a)},d.execute_script=function(a,b){var c,d,e;return null==b&&(b={}),d="scripts/"+a,null!=(c=LTApi.Utils.TEMPLATES[d])?(e=document.createElement("script"),e.id="lt_"+a.replace(/([-\.]+)/,"_"),e.type="text/javascript",e.innerText=c(b),this.add_script(e),setTimeout(function(a){return function(){return a.remove_script(e),a.executed.push(d)}}(this),500)):void 0},d.execute_batch=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],a=f.compact(f.flatten([a]),!0).map(String),a=a.map(function(a){return f.trim(String(a)).split(",")}),a=f.flatten(a),f.each(f.compact(a,!0),function(a){return function(b){return a.execute_script(b)}}(this))},d}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.Utils.Cacheable=function(b){function c(){c.__super__.constructor.apply(this,arguments)}return a(c,b),c.prototype.cache_data={},c.prototype.cache_add=function(a,b){return this.cache_data[a]=b},c.prototype.cache_read=function(a){var b;return null!=(b=this.cache_data)?b[a]:void 0},c.prototype.cache_fetch=function(a,b){return this.cache_data[a]||(this.cache_data[a]=b)},c.prototype.cache_setup=function(a){var b,c,d,e;for(e=[],b=0,d=a.length;d>b;b++)c=a[b],e.push(this.cache_data[c]={});return e},c}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;LTApi.Utils.Eventual=function(b){function d(){var a;d.__super__.constructor.apply(this,arguments),null==this.events_list&&(this.events_list=[]),this.memory={},this.events={},a=this.events_list,a.forEach(function(a){return function(b){return a.u.merge(a.events,a.register_event(b))}}(this))}var e;return a(d,b),e=LTApi.Utils.ErrorHandler,d.prototype.on=function(){var a,b;return b=arguments[0],a=arguments[1],b.split(" ").forEach(function(b){return function(c){var d,e,f,g;try{if(b.is_registered(c)||b.register_event(b.get_event(c)),!b.u.is("function",a))return logger.warn("Callback for "+c+" should be a function");if(f=a.bind(b),null!=(g=b.events[c])?g.add(a.bind(b)):void 0)return b.remember(c,f)}catch(e){return d=e,console.log("Can't bind event "+c+" because it was not yet registered")}}}(this))},d.prototype.off=function(a){var b;return(null!=(b=null!=a?a.split(" "):void 0)?b:this.events_list).forEach(function(a){return function(b){var c,d,e,f;try{if(b=b.split(":")[0],a.is_registered(b)||a.register_event(a.get_event(b)),f=a.memory[b],c=a.events[b],null!=c&&null!=f)return c.remove(f),f.empty()}catch(e){return d=e,console.log("Can't detach not bound event "+b)}}}(this))},d.prototype.remember=function(a,b){var c;return null==(c=this.memory)[a]&&(c[a]=[]),this.memory[a].push(b)},d.prototype.trigger=function(){var a,b;return b=arguments[0],a=2<=arguments.length?c.call(arguments,1):[],setTimeout(function(c){return function(){return b.split(" ").forEach(function(b){var d,e,f;try{return c.is_registered(b)||c.register_event(c.get_event(b)),f=c.events[b],null!=f?f.fire.apply(b,a):void 0}catch(e){return d=e,console.log("Can't trigger event "+b+" because it was not yet registered"),console.log(d.stack)}})}}(this))},d.prototype.register_event=function(a){var b,c,d,e;if(null!=a)return e={},d=a.split(":"),c=d[0],b=d[1],null!=b&&(b=b.split(",").join(" ")),e[c]=new LTApi.Callbacks(b),e},d.prototype.is_registered=function(a){return!(null==this.events[a])},d.prototype.get_event=function(a){var b,c;return c=new RegExp("^"+a),b=this.events_list.find(function(a){return c.test(a)}),console.log("Look for "+c+" in %O; found: %s",this.events_list,b),b},d}(LTApi.Utils.Cacheable)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};LTApi.Utils.SearchParams=function(b){function d(a){return a instanceof d?a:(this.u.is("string",a)?(this.parsed_string=!0,this.search_params=this.parse_query(a)):(this.parsed_string=!1,this.search_params=this.convert_params(a)),void this.build())}var e,f,g,h,i,j;return a(d,b),g=function(a){return null!=a?String(a).replace(/\+/g,"-").replace(/\./g," "):a},f=function(a){return null!=a?String(a).replace(/\-/g,"+").replace(/\s/g," "):a},h=function(a){return LTApi.Utils.is("date moment",a)?a=LTApi.moment(a):LTApi.Utils.is("string",a)&&(a=/^([\d]{4})-([\d]{2})-([\d]{2})$/.test(a)?LTApi.moment(a,"YYYY-MM-DD"):/^([\d]{2}).([\d]{2}).([\d]{4})$/.test(a)?LTApi.moment(a,"DD.MM.YYYY"):LTApi.moment(a)),a.toDate()},i=/([^-]+)-([^-]+)-to-([^-]+)-([^-]+)-departure-([^-]+)-for-(\d+|\d+..\d+)-nights-(\d+)-adults-(0|(\d)\(([0-9\.,]+)+\))-kids-(\d+|\d+..\d+)-stars/,e=["from","to","adults","kids","nights","stars","query","start_date","extra"],j={hotel_ids:null,from_city:null,from_country:null,to_city:null,to_country:null,nights:null,adults:null,start_date:null,kids:null,kids_ages:null,stars_from:null,stars_to:null,flex_dates:null},d.prototype.parse_query=function(a){var b,c,d,e,f,j,k,l,m,n;return this._query_string=a,j=this.extract_query(this._query_string),null!=(e=j.match(i))?(d=["flex_dates"],n=new LTApi.URI(j).search(!0),f=this.u.select(n,d),this.u.has(f,"flex_dates")&&(f.flex_dates=!0),c=e[6].split("..").map(Number),b={from:c[0],to:c[1]||c[0]},m=e[11].split("..").map(Number),l={from:m[0],to:m[1]||m[0]},{from:{city:{name_en:g(e[1])},country:{iso2:e[2]}},to:{city:{name_en:g(e[3])},country:{iso2:e[4]}},adults:Number(e[7]),kids:{count:Number(e[9]||0),ages:((null!=(k=e[10])?k.split(","):void 0)||[]).map(function(a){return Number(a)})},nights:b,stars:l,query:j,start_date:h(e[5]),extra:f}):null},d.prototype.convert_params=function(a){var b,c,d,e,f,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A,B,C,D,E,F,G,H,I,J;return this._params=a,k=this._params,e=null!=(l=k.from)?l:{city:{name_en:g(k.from_city||(null!=(m=k.from)&&null!=(x=m.city)?x.name_en:void 0))},country:{iso2:k.from_country||(null!=(A=k.from)&&null!=(B=A.country)?B.name_en:void 0)}},J=null!=(C=k.to)?C:{city:{name_en:g(k.to_city||(null!=(D=k.to)&&null!=(E=D.city)?E.name_en:void 0))},country:{iso2:k.to_country||(null!=(F=k.to)&&null!=(G=F.country)?G.name_en:void 0)}},i={},null!=(c=null!=(n=null!=(o=null!=(p=k.kids)?p.count:void 0)?o:k.kids_count)?n:k.kids)?this.u.is("number",c)?i.count=c:this.u.is("string",b)&&(i.count=Number(c)):i.count=0,null!=(b=null!=(q=null!=(r=k.kids)?r.ages:void 0)?q:k.kids_ages)?this.u.is("array",b)?i.ages=b:this.u.is("string",b)&&(i.ages=b.split(",")):i.ages=[],j={from:(null!=(s=k.nights)?s.from:void 0)||k.nights||k.nights_from,to:(null!=(t=k.nights)?t.to:void 0)||k.nights||k.nights_to},I={from:(null!=(u=k.stars)?u.from:void 0)||k.stars||k.stars_from,to:(null!=(v=k.stars)?v.to:void 0)||k.stars||k.stars_to},H={from:e,to:J,adults:Number(k.adults),kids:i,nights:j,stars:I,query:k.query,start_date:h(k.start_date),extra:{}},null!=(f=null!=(w=k.hotel_ids)?w:k.hotel_id)&&(H.hotel_ids=f),null!=(d=null!=(y=k.flex_dates)?y:null!=(z=k.extra)?z.flex_dates:void 0)&&(H.extra.flex_dates=d),H},d.prototype.build=function(){var a,b,c,d,e,f,g;return g=this.u.clone(j),e=this.u.clone(this.search_params),g.from_city=e.from.city.name_en||"Moscow",g.from_country=e.from.country.iso2||"RU",g.to_city="Any"===(f=e.to.city.name_en)?null:null!=f?f:null,g.to_country=e.to.country.iso2||"EG",g.start_date=LTApi.moment(e.start_date).format("DD.MM.YYYY"),g.nights=Number(null!=(a=e.nights.from)?a:e.nights),g.adults=Number(e.adults),g.kids=Number(e.kids.count),e.kids.count>0&&(g.kids_ages=e.kids.ages.join(",")),g.stars_from=Number(e.stars.from),g.stars_to=Number(e.stars.to),g.flex_dates=null!=(b=e.extra)?b.flex_dates:void 0,g.hotel_ids=this.u.flatten([null!=(c=null!=(d=e.hotel_ids)?d:e.to.hotel_ids)?c:[]]).join(","),this.built_params=this.u.compactObject(g,!0)},d.prototype.get=function(a){try{return this.built_params[a]}catch(b){}},d.prototype.get_params=function(){return this.u.clone(this.built_params)},d.prototype.set=function(a,b){var d,f;return c.call(e,a)>=0||(d=/\./.test(a))?(d?(f=new Function("obj","value","return obj."+a+" = value;"))(this.search_params,b):this.search_params[a]=b,this.build()):void 0},d.prototype.extract_query=function(a){return a=a.replace(/^\/+|\/+$/,"").split("/"),this.u.last(a)},d.prototype.location_codename=function(a){var b;return(null!=(b=f(a.city.name_en))?b:"Any")+"-"+a.country.iso2},d.prototype.format_date=function(a){return LTApi.moment(h(a)).format("DD.MM.YYYY")},d.prototype.normalize_kids=function(a){return a.count+(a.count?"("+this.u.first(a.ages,a.count).join(",")+")":"")},d.prototype.normalize_nights=function(a){return a.from===a.to?""+a.from:a.from+".."+a.to},d.prototype.normalize_stars=function(a){var b,c,d,e,f,g;return c=this.u.min([null!=(d=a.from)?d:1,null!=(e=a.to)?e:5]),b=this.u.max([null!=(f=a.from)?f:1,null!=(g=a.to)?g:5]),c+".."+b},d.prototype.clone=function(){return d.dup(this)},d.prototype.build_query=function(a){var b;return null==a&&(a={}),b=new LTApi.Utils.URLMaker(this.search_params,a),b.toString()},d.prototype.build_url=function(a){return null==a&&(a={}),"/search/"+this.build_query(a)},d.dup=function(a){var b,c;return b=null!=(c=a._params)?c:a._query_string,new d(b)},d}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},d=[].slice;LTApi.Utils.SearchRequest=function(b){function e(a){var b;e.__super__.constructor.apply(this,arguments),b=this.u.guid(),this.processors=[],this.operators=[],this.found=[],this.finished=[],this.config=this.u.merge(!0,{},f,a),this.client=this.get_client(),this.request_id=this.config.request_id,this.search_params=this.get_search_params(this.config.search_params),this.create_computed(),this.config.auto&&this.perform_search(),Object.defineProperty(this,"id",{get:function(){return b}})}var f,g;return a(e,b),f={connect:!1,request_id:null,auto:!1,mode:"search",delay:2,timeout:30,exclude_operators:[],only_operators:[],client:null,search_params:null},g={success:["completed","cached"],fail:["failed","skipped","no_results","timed_out","all_filtered"],complete:["completed","cached","failed","skipped","no_results","timed_out","all_filtered"],stop:["waiting","warming","pending","performing","loading"]},e.prototype.events_list=["perform","performed","stop","status","complete","results:memory","no_results","progress"],e.prototype.current_status=null,e.prototype.prev_status=null,e.prototype.get_client=function(){var a;return null!=(a=this.config.client)?a:new LTApi.Client},e.prototype.get_search_params=function(a){return null!=a?new LTApi.Utils.SearchParams(a):void 0},e.prototype.perform_search=function(){var a,b,c,d,e;return this.working=!0,this.last_success_request=0,b=this.process_response.bind(this),e=null!=(c=null!=(d=this.search_params)?d.get_params():void 0)?c:{},this.config.request_id&&this.u.merge(e,{request_id:this.config.request_id}),a=this.config.connect?"info":"enqueue",this.trigger("perform"),this.client.call("search."+a,e).then(function(a){return function(c){return a.response=c,a.search_params=a.get_search_params(a.response.search_params),null==a.request_id&&(a.request_id=a.response.request_id),a.operators=a.u.keys(a.response.status),a.trigger("status",a.response.status),a.trigger("performed",a.u.clone(a.search_params)),b(a.response).then(function(){return a.processors.push(a.u.every(function(){return a.response.get_statuses(b)},1e3*a.config.delay))})}}(this))},e.prototype.process_response=function(a){return this.u.promise(function(b){return function(d){var e,f,h,i,j,k;if(b.working)return i=!0,j=b.status_array(a.status),f=b.status_diff(j),e=b.analyze_status(f),b.found=b.u.uniq(b.found.concat(e.needs_request)),b.finished=b.u.uniq(b.finished.concat(e.finished)),b.is_timed_out=k>=b.config.timeout&&b.last_success_request>0,b.progress=b.get_progress(),(h=e.needs_request.length)?(b.last_success_request=LTApi.moment(),b.get_results_for(e.needs_request).then(function(){return b.finish_process(j,d,i)})):(k=LTApi.moment().diff(b.last_success_request,"seconds"),null==b.last_success_request&&(b.last_success_request=LTApi.moment()),b.is_timed_out&&(j=j.map(function(a){var b;return b=a.status,c.call(g.stop,b)>=0&&(a.status="timed_out"),a})),b.finish_process(j,d,i))}}(this))},e.prototype.finish_process=function(a,b,c){return this.trigger("status",a),this.should_stop_process(this.progress)?(c=!1,this.found.length?this.trigger("complete"):this.trigger("no_results"),this.trigger("progress",this.progress),this.cancel()):this.trigger("progress",this.progress),c?b():void 0},e.prototype.perform=function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],this.perform_search.apply(this,a)},e.prototype.start=function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],this.perform_search.apply(this,a);
},e.prototype.get_progress=function(){var a,b,c;return a=this.is_timed_out?this.operators.length:this.finished.length,c=this.operators.length,b=Math.ceil(a/c*100),{total:c,completed:a,progress:isNaN(b)?0:b}},e.prototype._send_results_progress=function(){},e.prototype.analyze_status=function(a){var b;return b={needs_request:[],finished:[],no_results:[]},a.reduce(function(a){return function(a,b,d){var e,f,h;return e=b.status,c.call(g.success,e)>=0&&a.needs_request.push(b.id),f=b.status,c.call(g.fail,f)>=0&&a.no_results.push(b.id),h=b.status,c.call(g.complete,h)>=0&&a.finished.push(b.id),a}}(this),b)},e.prototype.status_array=function(a){var b,c;return this.prev_status=null!=(b=null!=(c=this.current_status)?c.reduce(function(a,b){return a["op_"+b.id]=b.status,a},{}):void 0)?b:null,this.current_status=this.u.keys(a).map(function(b){return function(b){return{status:a[b],id:b}}}(this)),this.current_status},e.prototype.status_diff=function(a){return null!=this.prev_status?a.reduce(function(a){return function(b,c){var d,e;return d=null!=(e=a.prev_status["op_"+c.id])?e.status:void 0,(null==d||c.status!==d)&&b.push(c),b}}(this),[]):a},e.prototype.get_results_for=function(a){return this.u.promise(function(b){return function(c){var e;switch(e=function(){var a;return a=1<=arguments.length?d.call(arguments,0):[],b.make_response.apply(b,a),c()},b.config.mode){case"hotel":return b.response.get_hotel_offers(b.hotel_id,e);case"search":return b.response.get_results(a,e)}}}(this))["catch"](LTApi.Utils.ErrorHandler)},e.prototype.should_stop_process=function(a){return 100===a.progress?!0:this.is_timed_out?!0:!1},e.prototype.make_response=function(a){return this.trigger("results",a),this.trigger("progress",this.progress)},e.prototype.cancel=function(a){return null==a&&(a=!1),this.working=!1,this.trigger("stop"),this.processors.forEach(function(a){return function(a){return null!=a?a.cancel():void 0}}(this)),a?this.destroy():void 0},e.prototype.reset=function(){return this.working=!1,this.last_success_request=Date.now(),this.off()},e.prototype.create_computed=function(){return Object.defineProperty(this,"hotel_id",{get:function(){var a;return a=this.search_params.get("hotel_ids"),null!=a?Number(a):null}})},e.connect=function(a,b){var c,d;return null==b&&(b={}),d=LTApi.Utils,c=new LTApi.Utils.SearchRequest({request_id:a,connect:!0}),d.each(d.keys(b),function(a){return c.on(a,b[a])}),c},e}(LTApi.Utils.Eventual)}.call(this),function(){var a,b,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1},d=[].slice;a=function(){function a(c,d){return null==d&&(d={}),b=LTApi.Utils.$,this.jquery_installed(b)?(this.input=b(c)).length>1?this.reduce(this.input.toArray(),function(b,c,e){return b[c.name||e]=new a(c,d),b},{}):"number"===this.input.data("type")?(this.configure(d),this.initialize(),this):void 0:void 0}var b;return b=null,a.prototype.keys={system:[8,9,13,16,17,18,37,39,46,91,93,189],fn:[112,113,114,115,116,117,118,119,120,121,122,123],nav:[38,40],page:[9,65,67,73,76,82,86,88]},a.prototype.default_config={min:!1,max:!1,step:1,only:null,skip:null,wrap:!0,handler:{increase:null,decrease:null},controls:{enabled:!1,style:"basic",up:"&uarr;",down:"&darr;"}},a.prototype.default_messages={too_small:"Number should be greater than or equal to %n",too_large:"Number should be less than or equal to %n",not_in_range:"Number should be equal to %list",skipped:"Number should not be equal to %list",invalid_input:"Entered value is not a number",value_corrected:"Pasted value was corrected",list_separator_and:"and",list_separator_or:"or"},a.prototype.messages={},a.prototype.jquery_installed=function(a){return!!(null!=a&&a instanceof Function)},a.prototype.get_props=function(){var a,b,c,d;return a={min:String(null!=(b=this.input.prop("min")||this.input.attr("min")||this.input.data("min"))?b:this.input.data("minValue")),max:String(null!=(c=this.input.prop("max")||this.input.attr("max")||this.input.data("max"))?c:this.input.data("maxValue")),step:String(null!=(d=this.input.prop("step")||this.input.attr("step")||this.input.data("step"))?d:this.input.data("stepValue"))},this.each(this.object_keys(a),function(b,c){var d;return d=a[b],!d.length||isNaN(Number(d))||null==d?delete a[b]:a[b]=Number(d)}),a},a.prototype.configure=function(a){var c,d;if(!this.destroyed)return this.prev_handler=null!=(c=this.config)?c.handler:void 0,this.is_mobile=/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/.test(navigator.userAgent),this.config=b.extend(!0,{},this.default_config,this.config,this.get_props(),a),this.messages=b.extend(!0,{},this.messages,this.default_messages,a.messages),this.controls=!!(null!=(d=this.config.controls)?d.enabled:void 0),this.click_event=this.is_mobile?"touchstart":"click",this.bind_handlers(),null!=this.wrapper&&this.wrap_input(),null!=this.config.messages?delete this.config.messages:void 0},a.prototype.initialize=function(){var a,b;return b=this,a=!1,this.__val=this.input.val,this.input.val=function(a,c){var d;return d=b.value(),null!=a?(b.validate_value(a,c)?b.value(a):b.value(d),b.trigger_change(),this):Number(d)},this.input.on("keydown",function(a){return function(b){var d,e,f,g,h,i,j,k;if(d=[].concat(a.keys.system,a.keys.fn),h=b.keyCode,c.call(d,h)<0){if(i=b.keyCode,c.call(a.keys.page,i)>=0&&(b.ctrlKey||b.metaKey))return;return j=b.keyCode,c.call(a.keys.nav,j)<0?(k=a.input.get(0).value,g=a.trim(String.fromCharCode(b.keyCode)),f=a.trim(String.fromCharCode(b.keyCode-48)),e=a.test_key(k,f),e||(e=a.test_key(k,g)),e?a.trigger_change():(isNaN(e)&&a.trigger("invalid_input",{value:k,message:a.messages.invalid_input}),b.preventDefault())):(b.preventDefault(),a.input.val(a.calculate_value(40===b.keyCode),!1))}}}(this)),this.input.on("mousewheel DOMMouseScroll scroll",function(a){return a.preventDefault()}),this.input.on("paste",function(a){return function(b){var c,d,e;return null!=(null!=(d=b.originalEvent)?d.clipboardData:void 0)?(b.preventDefault(),c=b.originalEvent.clipboardData.getData("text/plain"),e=a.filter_value(c),String(c)!==String(e)&&a.trigger("invalid_input",{value:e,message:a.messages.value_corrected}),a.input.val(e)):void 0}}(this)),this.input.data("number_input",this).addClass("number_input_main"),this.input.val(this.filter_value(this.input.val())),this.create_event_model(),this.wrap_input(),this.bind_handlers()},a.prototype.wrap_input=function(){return this.config.wrap?(null!=this.wrapper&&(this.wrapper.after(this.input.detach()),this.wrapper.remove()),this.wrapper=this.get_wrapper(),this.controls&&this.wrapper.on("click",".number_input_controls a",function(a){return function(c){return c.preventDefault(),a.controls?b(c.currentTarget).is(".number_input_increase")?a.input.val(a.calculate_value(!1)):b(c.currentTarget).is(".number_input_decrease")?a.input.val(a.calculate_value(!0)):void 0:void 0}}(this)),this.input.after(this.wrapper),this.wrapper.find(".number_input_content").html(this.input.detach())):void 0},a.prototype.bind_handlers=function(){var a,c;if(this.config.wrap)return this.unbind_handlers(this.prev_handler),this.prev_handler=this.config.handler,(null!=(a=this.config.handler)?a.increase:void 0)&&b(this.config.handler.increase).on(this.click_event,function(a){return function(b){return b.preventDefault(),a.input.val(a.calculate_value(!1))}}(this)),(null!=(c=this.config.handler)?c.decrease:void 0)?b(this.config.handler.decrease).on(this.click_event,function(a){return function(b){return b.preventDefault(),a.input.val(a.calculate_value(!0))}}(this)):void 0},a.prototype.calculate_value=function(a){var b;return b=this.input.get(0).value,b=this.change_value(b,a),b=this.filter_value(b,a)},a.prototype.create_event_model=function(){return this.evt_list={invalid_input:b.Callbacks()}},a.prototype.test_key=function(a,b){var c;if(!b)return!1;if(isNaN(Number(b)))return NaN;if(null!=(c=this.selection(this.input))){if(a=this.replace_selected(a,b,c),!this.validate_value(a))return!1}else{if(!this.validate_value(b))return!1;if(!this.validate_value(""+a+b))return!1}return!0},a.prototype.selection=function(a){var b,c,d,e,f,g,h,i;return b=a.filter(":focus").get(0),h=0,c=0,null!=b.selectionStart&&null!=b.selectionEnd?(h=b.selectionStart,c=b.selectionEnd):(g=document.selection.createRange(),g&&g.parentElement()===b&&(e=b.value.length,f=b.value.replace(/\r\n/g,"\n"),i=b.createTextRange(),i.moveToBookmark(g.getBookmark()),d=b.createTextRange(),d.collapse(!1),i.compareEndPoints("StartToEnd",d)>-1?h=c=e:(h=-i.moveStart("character",-e),h+=f.slice(0,h).split("\n").length-1,i.compareEndPoints("EndToEnd",d)>-1?c=e:(c=-textInputRange.moveEnd("character",-e),c+=f.slice(0,c).split("\n").length-1)))),{start:h,end:c}},a.prototype.validate_value=function(a,b){var d,e,f,g,h,i,j,k,l,m;return null==b&&(b=!0),h=Number(a),d=String(h),i=this.config,f=i.min,e=i.max,this.is_number(h)&&String(h)===d?(null!=(j=this.config.skip)?j.length:void 0)&&c.call(this.config.skip,h)>=0?(b&&(m=this.messages.list_separator_and,g=this.messages.skipped.replace(/%list/,this.list(this.config.skip,m)),this.trigger("invalid_input",{value:h,message:g})),!1):(null!=(k=this.config.skip)?k.length:void 0)||(null!=(l=this.config.only)?!l.length:!0)||c.call(this.config.only,h)>=0?(f||0===f)&&f>h?(b&&(g=this.messages.too_small.replace(/%n/,e),this.trigger("invalid_input",{value:h,message:g})),!1):(e||0===e)&&h>e?(b&&(g=this.messages.too_large.replace(/%n/,e),this.trigger("invalid_input",{value:h,message:g})),!1):!0:(b&&(m=this.messages.list_separator_or,g=this.messages.not_in_range.replace(/%list/,this.list(this.config.only,m)),this.trigger("invalid_input",{value:h,message:g})),!1):!1},a.prototype.filter_value=function(a,b){var d,e,f,g,h,i;return(null!=(f=this.config.only)?f.length:void 0)||(null!=(g=this.config.skip)?g.length:void 0)?isNaN(a=Number(a))?a:(null!=(i=this.config.skip)?i.length:void 0)?c.call(this.config.skip,a)>=0?(a=this.change_value(a,b),a=this.filter_value(a,b)):a:a>this.max(this.config.only)?this.max(this.config.only):a<this.min(this.config.only)?this.min(this.config.only):c.call(this.config.only,a)>=0?a:(a=this.change_value(a,b),a=this.filter_value(a,b)):(a=Number(a),this.is_number(a)?(h=this.config,e=h.min,d=h.max,(e||0===e)&&e>a?e:(d||0===d)&&a>d?d:a):void 0)},a.prototype.change_value=function(a,b){var c;return null==b&&(b=!1),"-"===a&&(a=-0),a=Number(a),c=Number(this.config.step||1),a+(b?-c:c)},a.prototype.get_wrapper=function(){var a,c,d;return c=this.controls?"number_input_controls_"+this.config.controls.style:"",d='<div class="number_input '+c+'">',d+='  <div class="number_input_content">',d+="  </div>",this.controls&&(d+='  <div class="number_input_controls">',d+='    <a href="#" class="number_input_decrease">&darr;</a>',d+='    <a href="#" class="number_input_increase">&uarr;</a>',d+="  </div>"),d+="</div>",d=b(d),this.controls&&(a=this.config.controls,d.find(".number_input_decrease").html(a.down),d.find(".number_input_increase").html(a.up)),d},a.prototype.max=function(a){return Math.max.apply(null,a)},a.prototype.min=function(a){return Math.min.apply(null,a)},a.prototype.is_number=function(a){return null!=Object.prototype.toString.call(a).match(/Number/)&&!isNaN(a)},a.prototype.trim=function(a){return null!=String.prototype.trim?a.trim():a.replace(/^([\s]+)/g,"").replace(/([\s]+)$/g,"")},a.prototype.replace_selected=function(a,b,c){var d,e;return a=String(a),e=a.substr(0,c.start),d=a.substr(c.end),e+b+d},a.prototype.list=function(a,b){var c,d;return 1===a.length?""+a[0]:(d=[].concat(a),c=d.pop(),d+" "+(b||this.messages.list_separator_and)+" "+c)},a.prototype.value=function(a){return this.__val.call(this.input,a)},a.prototype.on=function(a,b){return null!=a&&null!=b?this.each(a.split(" "),function(a){return function(c){var d,e;return null!=(d=a.evt_list)&&null!=(e=d[c])&&"function"==typeof e.add?e.add(b.bind(a)):void 0}}(this)):void 0},a.prototype.trigger=function(){var a,b,c,e,f;return b=arguments[0],a=2<=arguments.length?d.call(arguments,1):[],null!=(c=this.evt_list)&&null!=(e=c[b])&&null!=(f=e.fire)&&"function"==typeof f.apply&&f.apply(this,a),this.input.trigger(b,a)},a.prototype.trigger_change=function(){return setTimeout(function(a){return function(){return a.input.trigger("change")}}(this),10)},a.prototype.unbind_handlers=function(a){return null!=a&&(null!=a.increase&&b(a.increase).off(this.click_event),null!=a.decrease)?b(a.decrease).off(this.click_event):void 0},a.prototype.has_controls=function(){var a,b,c;return c=this.config,a=c.controls,b=c.handler,!!(null!=a?a.enabled:void 0)&&!!(null!=b?b.increase:void 0)&&!!(null!=b?b.decrease:void 0)},a.prototype.destroy=function(){return this.input.data("number_input")?(this.destroyed=!0,this.unbind_handlers(this.config.handler),this.wrapper.after(this.input),this.wrapper.remove(),this.input.removeData("number_input"),this.input.off("keydown paste"),this.input.val=this.__val,!0):void 0},a.prototype.map=function(a,b){var c,d,e,f,g;if(null!=Array.prototype.map)return[].map.call(a,b);for(f=[],c=d=0,e=a.length;e>d;c=++d)g=a[c],f.push(b(g,c));return f},a.prototype.reduce=function(a,b,c){var d,e,f,g,h;if(null!=Array.prototype.reduce)return[].reduce.call(a,b,c);for(g=c,d=e=0,f=a.length;f>e;d=++e)h=a[d],g=b(g,h,d);return g},a.prototype.each=function(a,b){var c,d,e,f,g,h;if(null!=Array.prototype.forEach)return[].forEach.call(a,b);for(g=[],c=d=0,e=a.length;e>d&&(h=a[c],f=b(h,c),f!==!1);c=++d)g.push(void 0);return g},a.prototype.object_keys=function(a){var b,c,d;return null!=Object.keys?Object.keys(a):(c=[],function(){var c;c=[];for(b in a)d=a[b],c.push(a.hasOwnProperty(b));return c}()&&c.push(b),c)},a}(),LTApi.Utils.NumberInput=a,"undefined"!=typeof $&&null!==$&&null!=(b=$.fn)&&(b.number_input=function(b){return new a(this,b)})}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;LTApi.Utils.ListControl=function(b){function d(a){return d.__super__.constructor.apply(this,arguments),f=this.u.$||window.jQuery,a=f.extend({},e,a),Object.keys(a).forEach(function(b){return function(c){return b[c]=a[c]}}(this)),null!=this.visible_count&&this.u.is("number",this.visible_count)&&this.set_max_height(),this}var e,f;return a(d,b),f=null,d.prototype.root_element=document,d.prototype.item_selector=null,d.prototype.list_selector=null,d.prototype.selected=".selected",d.prototype.events_list=["next_element","prev_element","cancel","hover","select","scroll"],e={wrapper_element:null,root_element:document,item_selector:"li",list_selector:"ul",selected:".selected",item_height:null,visible_count:null,allow_click:!0,allow_null:!1},d.prototype.get_list=function(){return f(this.root_element||document).find(this.list_selector)},d.prototype.get_selected=function(a){var b;return a?(b=this.get_list().find(this.selected),b.length||(b=null)):b=this.get_list().find(this.selected),b},d.prototype.index_of=function(a,b){return Array.prototype.indexOf.call(a,b)},d.prototype.slice=function(){var a,b;return b=arguments[0],a=2<=arguments.length?c.call(arguments,1):[],Array.prototype.slice.apply(b,a)},d.prototype.next_all_to=function(a,b){var c;return c=this.index_of(a,b.get(0)),f(this.slice(a,c+1))},d.prototype.prev_all_to=function(a,b){var c;return c=this.index_of(a,b.get(0)),f(this.slice(a,0,c).reverse())},d.prototype.get_item_height=function(){var a;return null!=(a=this.item_height)?a:this.get_list().find(this.item_selector).first().outerHeight()},d.prototype.get_element=function(a){var b,c,d;return"prev"===a||"next"===a?(c=this.get_list().find(this.item_selector),d=this.get_selected(),b=function(){switch(a){case"next":return this.next_all_to(c,d);case"prev":return this.prev_all_to(c,d)}}.call(this),b=b.filter(this.item_selector).first(),b.size()||(b=function(){switch(a){case"next":return c.first();case"prev":return c.last()}}()),b.size()||(b=d),b.is(this.selected)||this.trigger(a+"_element"),b):void 0},d.prototype.set_max_height=function(){return this.get_list().css({maxHeight:this.visible_count*this.get_item_height()})},d.prototype.scroll_to_selected=function(){var a,b,c,d,e,f,g,h;return d=this.get_list(),c=d.find(this.item_selector),h=d.find(this.selected),g=null,null!=h&&h.size()&&(e=d.height(),a=h.outerHeight(),f=d.scrollTop(),b=h.offset().top-h.parent().offset().top,g=null,c[0]===h[0]?g=0:b>=e?g=b+f-e+a:0>b&&(g=f-a)),null!=g?(this.trigger("scroll",g),this.get_list().scrollTop(g)):void 0},d.prototype.replace=function(a){var b;if(!a.is(this.selected))return b=this.class_names(this.selected),this.get_list().find(this.selected).removeClass(b),a.addClass(b),this.trigger("hover",a)},d.prototype.class_names=function(a){return this.u.compact(a.split("."),!0).join(" ")},d.prototype.bind=function(a){var b,c;return b=this.autocompute.bind(this),c=this.select.bind(this),null!=this.wrapper_element?this.wrapper_element.on("keydown",a,b):f(a).on("keydown",b),this.allow_click?f(this.root_element).on("click",this.item_selector,c):void 0},d.prototype.select_first=function(){return this.replace(this.get_list().first()),this.scroll_to_selected()},d.prototype.autocompute=function(a){var b,c,d,e;if(38===(d=c=a.keyCode)||40===d||13===d||27===d){if(a.preventDefault(),a.stopPropagation(),38===c||40===c){switch(c){case 38:this.replace(this.get_element("prev"));break;case 40:this.replace(this.get_element("next"))}this.scroll_to_selected()}if(b=!this.allow_null,27===c&&this.trigger("cancel"),13===c&&null!=(e=this.get_selected(b)))return this.trigger("select",e)}},d.prototype.select=function(a){return this.replace(f(a.currentTarget)),this.trigger("select",this.get_selected())},d}(LTApi.Utils.Eventual)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;LTApi.Utils.NightsLoader=function(b){function d(a){d.__super__.constructor.apply(this,arguments),f=LTApi.Utils.$,this.config=f.extend({},e,a),this.client=this.create_api_client()}var e,f;return a(d,b),f=null,e={api_key:null,client:null},d.prototype.nights_cache={},d.prototype.create_api_client=function(){return this.config.client?this.config.client:new LTApi.Client(this.config.api_key)},d.prototype.load=function(a){return new LTApi.Utils.RSVP.Promise(function(b){return function(c){var d,e;return null!=(e=b.get_nights(a.country,a.city))?c(e):(d={city_from:a.city.replace(/([\.]+)/," ").replace(/([\+]+)/,"-"),country_to:a.country,start_date:LTApi.moment().add({days:1}).format("DD.MM.YYYY"),end_date:LTApi.moment().add({months:9}).format("DD.MM.YYYY")},b.client.call("references.nights",d,function(d){return b.store(d,a.country,a.city).then(c)}))}}(this))},d.prototype.get_nights=function(a,b){var c;return null!=(c=this.nights_cache[a])?c[b]:void 0},d.prototype.store=function(a,b,c){return this.u.promise(function(d){return function(e){var f,g;return g=d.format_nights(a),null==(f=d.nights_cache)[b]&&(f[b]={}),d.nights_cache[b][c]=g,e(g)}}(this))},d.prototype.format_nights=function(a){var b,c,d,e,g,h,i;return b=Object.keys(a),d=[],c=[],e=b.reduce(function(b,e){var f,g;return g=a[e],f=LTApi.moment(e).format("DD.MM.YY"),b[f]=g,g.length>0&&d.push(e),g.length||c.push(e),b},{}),h=LTApi.moment(this.u.first(d)),g=LTApi.moment(this.u.last(d)),i=f.extend({u:this.u,dates:e,min:h,max:g,enabled:d.map(function(a){return LTApi.moment(a).startOf("day").toDate().toString()}),disabled:c.map(function(a){return LTApi.moment(a).startOf("day").toDate().toString()})},this.functions)},d.prototype.functions={find:function(a){var b;return this.u.is("date",a)?a=LTApi.moment(a).format("DD.MM.YY"):LTApi.moment.isMoment(a)?a=a.format("DD.MM.YY"):(b=LTApi.moment(a),ds.isValid()&&(a=b.format("DD.MM.YY"))),this.dates[a]||[]},to_time:function(a){return LTApi.moment(a).toDate().getTime()},nearest_date_to:function(a){var b,c,d;return a=this.moment(a),c=this.u.min(this.enabled,function(b){return function(c){var d,e;return d=b.moment(new Date(c)),e=a.diff(d,"days"),Math.abs(e)}}(this)),null!=(b=c)?(d=new Date(b),this.moment(d)):!1},nearest_nights_to:function(a,b){return this.u.closest_number(a,b)},moment:function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],LTApi.moment.apply(LTApi,a)}},d}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};LTApi.Utils.LocationAutocomplete=function(b){function d(a,b){var c,e;d.__super__.constructor.apply(this,arguments),g=LTApi.Utils.$,this.cache={},this.config=g.extend({},f,b),this.input=g(a),this.client=null!=(e=this.config.client)?e:new LTApi.Client(this.config.api_key,{api_version:2}),this.city_from=this.config.city_from,this.render().bind_events(),null!=(c=this.config.default_value)&&this.set(c)}var e,f,g,h;return a(d,b),g=null,h=LTApi.Utils.TEMPLATES,e=[13,37,38,39,40],f={api_key:null,min_query_length:3,default_value:null,visible_items_count:10,city_from:null},d.prototype.events_list=["select"],d.prototype.render=function(){return this.wrapper=g(h["common/locations_autocomplete"]()),this.input.after(this.wrapper),this.wrapper.find(".autocomplete_input").append(this.input.detach()),this},d.prototype.bind_events=function(){return this.input.on("keydown input",this.perform_search.bind(this)),this.list_control=new LTApi.Utils.ListControl({wrapper_element:this.wrapper,root_element:this.wrapper,list_selector:".autocomplete_results_list",item_selector:"li.result",visible_count:this.config.visible_items_count,item_height:30}),this.list_control.bind(this.input),this.list_control.on("select",this.select_item.bind(this)),this.list_control.on("cancel",this.hide.bind(this)),this.input.on("blur",this.hide.bind(this)),this.input.on("focus",this.perform_search.bind(this)),this.input.on("mousedown",function(a){return function(b){return a.input.is(":focus")?void 0:(b.preventDefault(),b.stopPropagation(),a.input.trigger("focus"),a.input.selection(0,100))}}(this)),this.wrapper.on("mousedown",function(a){return function(a){return a.preventDefault(),a.stopPropagation()}}(this)),this.wrapper.on("click",".clear",this.clear.bind(this))},d.prototype.select_item=function(a){var b;return b=a.data(),this.make_selected(b),this.cancel_request()},d.prototype.make_selected=function(a,b){var c;return null==a&&(a={}),null==b&&(b=!0),this.selected=this.get(a.type,a.id),this.trigger("select",null!=(c=this.selected)?c:{}),this.draw_selected(b),this.hide()},d.prototype.draw_selected=function(a){var b;return null==a&&(a=!0),null==this.selected?this.undraw_selected():(b=this.selected.name||this.selected.name_ru,this.input.val(b),this.wrapper.find(".clear").show(),this.wrapper.find(".autocomplete_input").addClass("flagged"),this.wrapper.find(".autocomplete_input span").attr("class","lt_flag_"+this.selected.iso2.toLowerCase()),a?this.input.trigger("focus"):void 0)},d.prototype.undraw_selected=function(){return this.input.val(""),this.wrapper.find(".clear").hide(),this.wrapper.find(".autocomplete_input").removeClass("flagged"),this.wrapper.find(".autocomplete_input span").removeAttr("class")},d.prototype.perform_search=function(a){var b,d;if(b=a.keyCode,!(c.call(e,b)>=0))return a.shiftKey&&9===a.keyCode||9===a.keyCode?this.hide():(d=a.keyCode,c.call(e,d)<0?this.make_request(this.input.val()):void 0)},d.prototype.cancel_request=function(){return clearTimeout(this.request)},d.prototype.make_request=function(a){return this.cancel_request(),a.length&&this.wrapper.find(".clear").show(),this.request=setTimeout(function(b){return function(){var c;return/^\s*$/.test(a)?(b.make_selected({}),b.process_results([]),b.undraw_selected()):(c={query:a},null!=b.city_from&&(c.city_from=b.city_from),b.load_locations(c).then(b.process_results.bind(b)))}}(this),300)},d.prototype.process_results=function(a){return this.store(a),this.draw(a)},d.prototype.draw=function(a){var b,c,d;return a.length?(d={hotels:[],locations:[]},b=a.reduce(function(a,b){var c,d;return c="hotel"===b.type?"hotels":"locations",a[c].push({id:b.id,name:b.name||b.name_ru,type:b.type,"class":b.selected?"selected":"",flag:"country"===(d=b.type)||"hotel"===d,flag_code:("lt_flag_"+b.iso2).toLowerCase()}),a},d),c=h["common/locations_autocomplete_results"](b),this.wrapper.find(".autocomplete_results ul").html(c).end(),this.wrapper.find(".autocomplete_results").show()):this.hide()},d.prototype.set=function(a){var b,c;return c=Object.select(a,"country","city"),b=["type","id","iso2"],this.load_locations(c).then(function(a){return function(c){return a.store(c),null!=c[0]?a.make_selected(Object.select(c[0],b),!1):void 0}}(this))},d.prototype.load_locations=function(a){return this.client.call("references.locations",a).then(function(a){return function(b){var d;return d=a.u.compact(a.u.flatten([a.config.exclude])),d.length&&(b=b.filter(function(a){var b;return b=a.type,c.call(d,b)<0})),b}}(this))},d.prototype.hide=function(){return this.wrapper.find(".autocomplete_results ul").empty(),this.wrapper.find(".autocomplete_results").hide()},d.prototype.store=function(a){return a.forEach(function(a){return function(b){var c,d,e,f;return e=String(b.id),null==(c=a.cache)[f=b.type]&&(c[f]={}),null!=(d=a.cache[b.type])[e]?d[e]:d[e]=b}}(this))},d.prototype.clear=function(a){return this.selected=null,this.undraw_selected(),this.input.trigger("focus"),null!=a&&a.preventDefault(),null!=a?a.stopPropagation():void 0},d.prototype.focus=function(){var a;return a=this.input.val().length,this.input.selection(0,a)},d.prototype.get=function(a,b){var c;return null!=(c=this.cache[a])?c[String(b)]:void 0},d.prototype.get_selected=function(){return this.get(this.selected.type,String(this.selected.id))},d}(LTApi.Utils.Eventual)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};LTApi.Utils.SelectBox=function(b){function d(a,b){this.params=b,d.__super__.constructor.apply(this,arguments),f=LTApi.Utils.$,this.selectbox=f(a),this.el=this.selectbox,this.default_value=this.selectbox.data("default_value"),this.render()}var e,f,g,h;return a(d,b),h=LTApi.Utils.TEMPLATES["selectbox/wrapper"],g=LTApi.Utils.TEMPLATES["selectbox/options"],e=LTApi.Utils.TEMPLATES["selectbox/head"],f=null,d.prototype.after_load=function(){},d.prototype.last_value=0,d.prototype.render=function(){var a;return this.wrapper=f(h({class_name:null!=(a=this.params)?a.class_name:void 0})),this.head=f(e({title:this.get_current_label()})),this.selectbox.after(this.wrapper),this.wrapper.append(this.selectbox.detach()),this.wrapper.append(this.head),this.set_current_label(this.default_value),this.selectbox.on("change",function(a){return function(){return a.set_current_label()}}(this))},d.prototype.update=function(a){var b,c;return b=this.selectbox.get(0).value||this.default_value,c=this.create_options(a),this.selectbox.html(c),null!=b?this.select_nearest_to(b):void 0},d.prototype.select_nearest_to=function(a){var b,d,e,f,g;return this.all_values_numeric(f=this.values())?(d=String(a),c.call(f,d)>=0?e=a:(g=f.map(function(a){return Number(a)}).map(function(b){return Math.abs(b-Number(a))}),b=g.indexOf(Math.min.apply(Math,g)),e=f[b]),this.selectbox.get(0).value=e,this.set_current_label(e)):void 0},d.prototype.all_values_numeric=function(a){var b;return b=a.map(function(a){return function(b){var c;return c=Number(b),a.u.is("Number",c)&&!isNaN(c)}}(this)),!!b.length&&this.u.all(b,!0)},d.prototype.values=function(){var a;return a=this.selectbox.find("option").toArray(),a.map(function(a){return String(a.getAttribute("value"))})},d.prototype.create_options=function(a){return null==this.option&&(this.option=document.createElement("option")),a=a.sort(function(a,b){var c;return c=[Number(a.value),Number(b.value)],a=c[0],b=c[1],a>b?1:b>a?-1:0}),a.reduce(function(a){return function(b,c){var d;return d=a.option.cloneNode(!1),d.innerText=c.label,d.setAttribute("value",c.value),b.appendChild(d),b}}(this),document.createDocumentFragment())},d.prototype.get_current_label=function(){var a,b,c;return c=this.selectbox.get(0),a=0>c.selectedIndex?0:c.selectedIndex,b=c.options[a],(null!=b?b.label:void 0)||(null!=b?b.innerText:void 0)},d.prototype.set_current_label=function(a){var b;return b=this.head.find(".lt_selectbox_current"),b.text(a||this.get_current_label())},d.prototype.set_default=function(){var a;return a=this.default_value||this.get(),this.set(a,!0)},d.prototype.value_is_valid=function(a){var b,d;return d=this.el.find("option").toArray().map(function(a){return String(a.value)}),b=String(a),c.call(d,b)>=0},d.prototype.get=function(){var a,b,c;return(c=this.selectbox.get(0).value)||(b=this.selectbox.find("option"),c=(a=b.filter(":selected")).size()?a:b.first().val()),c},d.prototype.set=function(a,b){return this.value_is_valid(a)||(a=this.get()),this.selectbox.get(0).value=a,this.set_current_label(a),b||this.selectbox.trigger("change"),a},d}(LTApi.Module)}.call(this),function(){var a,b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;a=function(a){function c(a,b,f){this.elem=a,this.text=b,e=this.u.$,this.elem=e(this.elem),this.disabled=!1,this.hidden=!0,this.tooltip_id=this.u.guid(),this.conf=this.u.merge({},d,f),this.index=c.add_tooltip(this),this.init()}var d,e,f,g;return b(c,a),f=[],e=null,g=LTApi.Utils.TEMPLATES["common/simple_tooltip"],d={x:"left",y:"bottom",direction:"vertical",easing:"fade",custom_class:"",speed:80,pointer:!0,hide_on_focus:!1,allow_close:!1,disable_on_close:!1,z_index:!1,z_index_hover:!1},c.tooltips=f,c.hide_all=function(){return f.forEach(function(a){return a.hide()})},c.add_tooltip=function(a){return f.push(a)},c.remove_tooltip=function(a){return f.splice(a,1)},c.prototype.init=function(){var a;return null==window.tts&&(window.tts=[]),window.tts.push(this.tooltip_id),a=g({text:"",id:this.tooltip_id,allow_close:this.conf.allow_close}),this.tooltip=this.u.enable_gpu(a),this.tooltip.addClass(this.conf.custom_class),this.set_text(this.text),this.elem.addClass("stt-attached"),this.elem.data({stt_ref:a.elem,stt_id:this.tooltip_id}),this.elem.is("input,textarea")||this.elem.css({cursor:"pointer"}),this.bind()},c.prototype.bind=function(){var a;return a=this,null==this.elem.data("sttc")&&(this.elem.data({sttc:{show:this.show.bind(this),hide:this.hide.bind(this),text:this.set_text.bind(this),align:this.align.bind(this),add_class:this.add_class.bind(this),remove_class:this.remove_class.bind(this),z_index:this.set_z_index.bind(this)},has_tooltip:!0}),this.conf.hide_on_focus&&this.elem.is("input"))?void this.elem.on("focusin change",function(){return e(this).data("sttc").hide()}):(this.conf.allow_close&&e(document).on("click","#stt-"+this.tooltip_id+" .simple_tooltip_close",function(a){return function(b){return b.preventDefault(),a.conf.disable_on_close&&(a.disabled=!0),a.hide()}}(this)),this.set_z_index())},c.prototype.set_z_index=function(a,b){return null==a&&(a=this.conf.z_index),null==b&&(b=this.conf.z_index_hover),null!=a&&null!=b?(e.extend(this.conf,{z_index:a,z_index_hover:b}),a&&(this.tooltip.css({zIndex:a}),b)?(this.tooltip.on("mouseenter",function(){return e(this).css({zIndex:b})}),this.tooltip.on("mouseenter",function(){return e(this).css({zIndex:a})})):void 0):void 0},c.prototype.position=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m,n;switch(f=this.get_position(),i=f.x,l=f.y,c=this.conf.direction,h=this.elem.outerWidth(!0),e=this.elem.outerHeight(!0),j=this.elem.offset().left,n=this.elem.offset().top,k=h+j,m=e+n,b=0,a=0,l){case"top":b=function(){
switch(c){case"horizontal":return n;default:return n-this.tooltip.height()-10}}.call(this),this.tooltip.addClass("simple_tooltip_top");break;case"center":d=(m-n)/2,g=this.tooltip.outerHeight(!0)/2,b=d-g+n,this.tooltip.addClass("simple_tooltip_center");break;default:b=function(){switch(c){case"horizontal":return m-this.tooltip.outerHeight(!0);default:return m+10}}.call(this),this.tooltip.addClass("simple_tooltip_bottom")}switch(i){case"center":a=j+this.elem.outerWidth(!0)/2-this.tooltip.width()/2,this.tooltip.addClass("simple_tooltip_center");break;case"right":switch(c){case"horizontal":a=k+10;break;default:a=k-this.tooltip.outerWidth(!0),30>h&&(a+=h/2)}this.tooltip.addClass("simple_tooltip_right");break;default:a=j,30>h&&(a-=h/2),this.tooltip.addClass("simple_tooltip_left")}return"vertical"===c||"horizontal"===c?this.tooltip.addClass("simple_tooltip_"+c):this.tooltip.addClass("simple_tooltip_vertical"),this.tooltip.css({left:a,top:b}),this.coord={x:a,y:b},this.tooltip.css({opacity:1,display:"none"})},c.prototype.get_position=function(){var a,b,c;switch(a=this.conf,b=a.x,c=a.y,"right"!==b&&"left"!==b&&"center"!==b&&(b="left"),"top"!==c&&"bottom"!==c&&"center"!==c&&(c="bottom"),this.conf.direction){case"horizontal":"center"===b&&(b="right");break;case"vertical":"center"===c&&(c="bottom")}return{x:b,y:c}},c.prototype.align=function(a){return null==a&&(a="left"),("left"===a||"center"===a||"right"===a)&&(this.conf.x=a),this},c.prototype.show=function(a,b){var c,d,f;if(this.elem.is(":visible")&&this.hidden&&!this.disabled){switch(e("#"+this.tooltip.attr("id")).size()<1&&this.tooltip.appendTo("body"),this.position(),this.start_observer(),this.hidden=!1,d=this.elem.data("z_index"),f=this.elem.data("z_index_hover"),null!=d&&this.set_z_index(d,f),this.conf.easing){case"flow":c=0,"top"===this.conf.y?c=this.coord.y-10:"bottom"===this.conf.y&&(c=this.coord.y+10),this.tooltip.css({top:c,opacity:0,display:"block"}),this.tooltip.stop().animate({top:this.coord.y,opacity:1},this.conf.speed||300),this.hidden=!1;break;case"fade":this.tooltip.stop().fadeIn(this.conf.speed||300),this.hidden=!1;break;default:this.tooltip.show(),this.hidden=!1}return null!=a&&this.u.is("Number",a)&&function(a){return function(){return a.hide(),"function"==typeof b?b():void 0}}(this).delay(a),this}},c.prototype.hide=function(){var a;if(this.hidden)return!1;if(!this.tooltip.closest("body").length)return!1;switch(this.stop_observer(),this.hidden=!0,this.conf.easing){case"flow":a=0,"top"===this.conf.y?a=this.coord.y-10:"bottom"===this.conf.y&&(a=this.coord.y+10),this.tooltip.stop().animate({top:a,opacity:0},this.conf.speed,e.proxy(this.rm,this));break;case"fade":this.tooltip.stop().fadeOut(this.conf.speed,e.proxy(this.rm,this));break;default:this.tooltip.hide(e.proxy(this.rm,this))}return this},c.prototype.text=function(a){return this.set_text()},c.prototype.set_text=function(a){return this.tooltip.find(".simple_tooltip_body").html(a),this},c.prototype.add_class=function(a){return this.tooltip.addClass(a),this},c.prototype.remove_class=function(a){return this.tooltip.removeClass(a),this},c.prototype.rm=function(a){return null==a&&(a=!1),this.hidden=!0,this.tooltip.remove()},c.prototype.destroy=function(){return this.hidden=!0,this.tooltip.remove(),this.elem.removeData("sttc"),this.elem.removeData("s-tooltip"),this.elem.removeData("has_tooltip"),c.remove_tooltip(this.index)},c.prototype.start_observer=function(){return this._observer=this.u.every(function(a){return function(){var b,c;return b=e.contains(document.documentElement,a.elem.get(0)),c=a.elem.is(":visible")&&!a.elem.closest(":not(:visible)").size(),b&&c||(a.stop_observer(),a.hide(),b)?void 0:a.destroy()}}(this),30)},c.prototype.stop_observer=function(){var a;return null!=(a=this._observer)?a.cancel():void 0},c}(LTApi.Module),LTApi.Utils.SimpleTooltip=a}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.Utils.StyleLoader=function(b){function c(a,b){var c;c=this,a=this.u.merge(!0,{},d,a),this.place=this.get_place_element(),this.tpl={stylesheet:this.assets_url(a.styles_path),dependency:this.assets_url(a.themes_path)},this.resolve_theme(a),this.normalize_names(a,"base_styles"),this.normalize_names(a,"dependencies"),this.u.load.jquery(function(d){return function(d){return e=d,c.load_styles(a,b)}}(this))}var d,e;return a(c,b),e=null,d={theme:"",base_styles:[],dependencies:[],external:[],styles_path:"/",themes_path:"/"},c.prototype.load_styles=function(a,b){var c,d,e;return e=this.u.flatten([a.base_styles.map(function(a){return function(b){return a.compile_names("stylesheet",b)}}(this)),a.dependencies.map(function(a){return function(b){return a.compile_names("dependency",b)}}(this)),a.external]),c=e.map(this.load_stylesheet.bind(this)),d=this.u.promise.all(c),this.u.is("function",b)&&d.then(b),d},c.prototype.normalize_names=function(a,b){var c;return c=this.u.flatten([a[b]]),c=c.map(function(a){return function(b){var c;return c=b.replace(/([\/]+)/gi,"/").split("/"),b=a.u.last(c).replace(/\.(.+)/g,"")}}(this)),a[b]=c},c.prototype.resolve_theme=function(a){return a.dependencies.unshift(this.theme_name(a)),a.dependencies=this.u.uniq(a.dependencies)},c.prototype.compile_names=function(a,b){var c;return c=this.tpl[a](this.file_name_for(b))},c.prototype.file_name_for=function(a,b){var c;return null==b&&(b="css"),c="production"!==this.u.CONFIG.env?"dev":"",this.u.compact([a,c,b],!0).join(".")},c.prototype.assets_url=function(a,b){var c,d,e;return null==a&&(a=""),null==b&&(b="this"),c=LTApi.URI(this.u.cfg("assets_url")),a=this.u.is("string",a)?a:"",d=this.u.compact(c.segment(),!0),d=d.concat(this.path_array(["css",this.path_part(a),"{{"+b+"}}"])),e=decodeURIComponent(c.pathname(d.join("/")).toString()),LTApi.Handlebars.compile(e)},c.prototype.theme_name=function(a){return a.theme||"default"},c.prototype.path_part=function(a){return this.u.compact(this.u.normalize_slashes(a,!0).split("/"),!0)},c.prototype.path_array=function(a){return this.u.compact(this.u.flatten(a),!0)},c.prototype.load_stylesheet=function(a){return this.u.promise(function(b){return function(b){var c;return c=e("<link rel='stylesheet' href='"+a+"'>"),c.on("load error",function(){return b()}),c.appendTo("head")}}(this),!1)["catch"](this.u.ErrorHandler)},c.prototype.get_place_element=function(){return document.getElementsByTagName("head")[0]},c}(LTApi.Module)}.call(this),function(){LTApi.Utils.cookie=function(){var a,b,c,d,e,f,g,h,i,j,k,l;if(k=LTApi.Utils,h=arguments[0],l=arguments[1],i=arguments[2],null!=h&&null!=l)return null==i&&(i={}),g=location.host.split("."),g=(g.length>2?g.slice(1):g).join("."),this.is("object",l)&&(l=JSON.stringify(l)),a=[h+"="+encodeURIComponent(l)],i.path&&a.push("path="+i.path),(f=i.domain)&&(f="all"===f?"."+g:f,a.push("domain="+f)),i.maxAge&&a.push("max-age="+maxAge),i.secure===!0&&a.push("secure"),null!=(e=i.expires)&&(d=new Date,d.setTime(d.getTime()+24*e*60*60*1e3),a.push("expires="+d.toGMTString())),document.cookie=a.join("; ");if(j=h+"=",b=document.cookie.split(";"),l=this.find(b,function(a){return function(b){return new RegExp("^"+j).test(a.trim(b))?!0:!1}}(this)),null!=l&&(c=decodeURIComponent(null!=l?l.split("=")[1]:void 0),null!=c))try{return JSON.parse(c)}catch(m){return c}}}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.Utils.ErrorNotifier=function(b){function c(a){this.root_selector=a,d=LTApi.Utils.$,this.root=d(this.root_selector)}var d;return a(c,b),d=null,c.prototype.hide=function(a){return this.elem(a).filter(".error").removeClass("error"),this.elem(".lt_widget_error").removeAttr("style")},c.prototype.show=function(a,b){var c,e,f,g,h,i,j,k;return null==b&&(b=null),g={opacity:0,width:"auto",display:"block"},f=this.elem(".lt_widget_error"),e=this.elem(b).find("input, .lt_selectbox").filter(function(a,b){var c,e,f;return e=d(b),f=b.value||(null!=(c=e.find("select")[0])?c.value:void 0),e.is(":visible")&&!f}).first(),f.text(a).css(g),k=e.outerWidth(),j=this.text_width(a,f),c=this.offset_for(e),i=c.top+e.outerHeight(),h=c.left,j=j>k?j:k,e.addClass("error"),f.css({opacity:1,top:Math.round(i+5),left:Math.round(h+k/2-j/2),width:j})},c.prototype.offset_for=function(a){var b,c,d,e;return b=this.elem(a).offset(),d=this.root.offset(),e=(this.root.outerWidth()-this.root.width())/2,c=(this.root.outerHeight()-this.root.height())/2,{top:b.top-(d.top+c),left:b.left-(d.left+e)}},c.prototype.text_width=function(a,b){var c,e;return c=d("<div>",{text:a,css:{top:-99999,left:-99999,whiteSpace:"nowrap",position:"absolute",font:b.css("font"),border:b.css("border"),padding:b.css("padding"),margin:b.css("margin")}}).appendTo("body"),e=c.outerWidth(),c.remove(),e+10},c.prototype.elem=function(a){return this.root.find(a)},c}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.Utils.LocationDetection=function(b){function c(a){if(null==a&&(a={}),c.__super__.constructor.apply(this,arguments),null==a.api_key)throw Error("You must specify API key");e=LTApi.Utils.$,this.config=this.u.merge(!0,{},d,a),this.select=e(this.config.select),this.wrapper=e(this.config.wrapper),this.client=new LTApi.Client(this.config.api_key),this.cookie=this.u.CONFIG.cookie,this.cookie_set()?console.log("Already detected"):this.run_detection()}var d,e;return a(c,b),e=null,d={api_key:null,select:null,wrapper:null,cities:null},c.prototype.events_list=["detect"],c.prototype.detect=function(){return this.client.call("references.location")},c.prototype.run_detection=function(){return this.detect().then(function(a){return function(b){return b.success?(a.render_popup(b.city),a.bind_events()):void 0}}(this))},c.prototype.bind_events=function(){return this.popup.on("click","[data-code]",function(a){return function(b){var c,d;return d=e(b.currentTarget).data("code"),c=d.split("-")[0],a.select.val(d).trigger("change"),a.save_location(d,a.decode_location(c)),a.remove_popup()}}(this))},c.prototype.render_popup=function(a){var b;return b=LTApi.Utils.TEMPLATES["common/location_detection"]({cities:this.config.cities||[],detected:a}),this.popup=e(this.u.trim(b)),this.wrapper.append(this.popup),this.update_position()},c.prototype.remove_popup=function(){return this.popup.fadeOut(function(a){return function(){return a.popup.remove()}}(this))},c.prototype.update_position=function(){var a,b,c,d;return d=this.wrapper.offset(),b=this.select.offset(),c=b.top-d.top,a=b.left-d.left,this.popup.css({top:c+this.select.height()+10,left:a})},c.prototype.save_location=function(a,b){var c;return c={expires:365,path:"/",domain:this.get_domain()},this.u.cookie(this.u.cfg("cookie.location_global"),b,c),this.u.cookie(this.u.cfg("cookie.location_widget"),a,c)},c.prototype.get_domain=function(){var a,b,c;return b=LTApi.URI(),a=b.hostname(),(c=b.subdomain())&&(a=a.replace(c+".","")),a},c.prototype.get_saved_city=function(){return this.u.cookie(this.u.cfg("cookie.location_global"))},c.prototype.get_saved_code=function(){return this.u.cookie(this.u.cfg("cookie.location_widget"))},c.prototype.cookie_set=function(){var a,b;return a=this.get_saved_city(),b=this.get_saved_code(),null!=a&&null!=b},c.prototype.encode_location=function(a,b){return a=(a||"Any").replace(/([\s]+)/,".").replace(/([\-]+)/,"+"),a+"-"+b},c.prototype.decode_location=function(a){var b,c,d;return d=a.split("-"),b=d[0],c=d[1],b=b.replace(/([\.]+)/," ").replace(/([\+]+)/,"-"),{city:b,country:c}},c}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice,d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};LTApi.Modules.WidgetBase=function(b){function e(a,b,c){e.__super__.constructor.apply(this,arguments),this.action_enhancements={},this.u.assert("Config should be an Object",this.u.is("object",b)),this.load_config(a,b),this.load_api_key(b),this.__widget_name=c,this.client=new LTApi.Client(this.api_key),"function"==typeof this.deprecate_all&&this.deprecate_all(),this.save_instance(c,this.u.guid()),this.create_computed(),this.u.load.jquery(function(a){return function(c){return a.init_extensions(),a.init(f=c,b)}}(this))}var f,g;return a(e,b),f=null,g=[],e.prototype.enhance_action=function(a,b){var c,d;if(this.u.is("function",b)&&null!=a)return c=null!=(d=this.action_enhancements[a])?d:[],c.push(this.u.bind(b,this)),this.action_enhancements[a]=c},e.prototype.run_enhancements=function(){var a,b,d;return b=arguments[0],a=2<=arguments.length?c.call(arguments,1):[],b&&null!=(d=this.action_enhancements[b])?d.forEach(function(b){return b.apply(null,a)}):void 0},e.prototype.load_styles=function(a,b){return new this.u.StyleLoader(a,function(a){return function(){return f(b.bind(a))}}(this))},e.prototype.load_config=function(a,b){return b=this.normalize_config(b),this.config=this.u.merge(!0,{},a,b)},e.prototype.load_api_key=function(a){var b;return b=a.api_key||this.u.cfg("api_key"),this.u.assert("API key must be specified",!!b),this.api_key=b},e.prototype.load_locales=function(a,b){var c;return b=null!=b?b:{},c=b,c=this.u.reduce(Object.keys(c),function(b,d){return b[d]=f.extend(!0,{},a,c[d]),b},{}),this.locale=f.extend(this.locale,c)},e.prototype.theme_name=function(){var a,b,c;return c=(null!=(a=this.config)&&null!=(b=a.setup)?b.theme:void 0)||"default",d.call(this.themes,c)>=0?c:"default"},e.prototype.save_instance=function(a,b,c){var d;return null==(d=LTApi.Instances)[a]&&(d[a]={}),LTApi.Instances[a][b]=this},e.prototype.widget_name=function(a){if(d.call(g,a)<0)return this.__widget_name=a;throw"Widget name "+a+" already taken"},e.prototype.create_computed=function(){var a;return(a=this.u.bind(function(a,b){return Object.defineProperty(this,a,{get:b})},this))("dest",function(){var a,b,c;return a=null!=(b=this.destination)?b:this.hotel,null!=(c=null!=a?a.selected:void 0)?c:null!=a?a.country:void 0})},e.prototype.init_extensions=function(){return this.cfg=this.u.cfg.bind(this.u),this.tpl=LTApi.Utils.tpl_loader(this.__widget_name),this.promise=LTApi.Utils.promise},e.prototype.load_departures=function(){var a,b;return b=this.client.call("references.departures"),a=this.normalize_departures.bind(this),b.then(a)["catch"](function(a){return console.log(a)})},e.prototype.load_nights=function(a){return this.promise(function(b){return function(c){return null!=a.city&&null!=a.country?b.nights.load(a).then(function(a){return b.nights_set=a,b.toggle_preloader(!1),c(!0)}):(b.toggle_preloader(!1),c(!1))}}(this))},e.prototype.load_hotel=function(){return this.client.call("references.hotel",{id:this.sp.hotel_id}).then(function(a){return function(b){return a.hotel=b,a.update_title(),a.hotel}}(this))["catch"](function(a){return console.log(a)})},e.prototype.load_partner=function(){return this.client.call("references.self").then(function(a){return function(b){return a.partner=b,a.resolve_affliate_mark(),a.partner}}(this))},e.prototype.reload_nights=function(a){var b,c,d,e,f;return null==a&&(a={}),b=null!=(d=a.city)?d:this.city_from(!1),c=null!=(e=a.country)?e:null!=(f=this.dest)?f.iso2:void 0,new LTApi.Utils.RSVP.Promise(function(d){return function(e){return null!=b&&null!=c?d.load_nights({city:b,country:c}).then(function(b){return b?(d.select_available_date(),d.update_nights_list(a.old_value)):console.log("Nights not loaded"),e()}):e()}}(this))},e.prototype.nights_cleanup=function(){var a,b,d;return d=arguments[0],a=2<=arguments.length?c.call(arguments,1):[],b=d.concat(a),b=this.u.flatten(b),b=this.u.compact(b,!0),b=this.u.uniq(b),this.u.sort(b)},e.prototype.normalize_departures=function(a){var b,c,d;return d=!1,c=(null!=(b=a.departures)?b:a).map(function(a){return function(b){return(d=null!=b.cities)?(b.cities=b.cities.map(function(c){return a.u.merge(c,{code:a.location_code(c.name_en,b.iso2)})}),b):a.u.merge(b,{code:a.location_code(b.name_en,b.iso2)})}}(this)),d&&(c=this.u.sortBy(c,"priority",!0)),c},e.prototype.location_code=function(a,b){var c;return null!=a&&null!=b?(c=null!=a?a.replace(/[^\sa-z]+/gi,"").replace(/^\s*|\s*$/g,"").replace(/[\s\-\_]+/gi,"."):void 0,c+"-"+b):null},e.prototype.get_url_params=function(){var a,b,c,d;return a=(null!=(b=this.partner)?b.insert_affiliate_mark:void 0)?this.partner.name:null,d=this.config.setup.params,c=this.u.merge({},d,this.u.compactObject({aflt:a})),this.u.keys(c).length>0?"?"+this.u.toQueryString(c):""},e.prototype.valid_kids_ages=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],this.u.is("string",a)&&(a=a.split(",")),a=this.u.flatten(this.u.flatten([a]).map(function(a){return function(b){return a.u.is("string",b)?b.split(",").map(Number):Number(b)}}(this))),a.map(function(a){return function(b){return a.u.is("number",b)&&b>=0?String(b):""}}(this))},e.prototype.city_from=function(a){var b,c;return null==a&&(a=!0),b=(null!=(c=this.select.from)?c:this.select.city_from).get(),a?b:null!=b?b.split("-")[0].replace(/([\.]+)/," ").replace(/([\+]+)/,"-"):void 0},e.prototype.resolve_affliate_mark=function(){var a,b;return this.partner.insert_affiliate_mark?this.u.merge(!0,this.config.setup,{params:{aflt:this.partner.name}}):null!=(null!=(a=this.config.setup)&&null!=(b=a.params)?b.aflt:void 0)?delete this.config.setup.params.aflt:void 0},e.prototype.toggle_kids_ages=function(a,b,c,d){var e,g,h;return e=this.widget.find(b),g=this.widget.find(a),(h=e.hide().filter(":lt("+c+")")).length?(h.css({display:"inline-block"}),null!=d&&d.length&&d.forEach(function(a,b){return f(h[b]).find("input").val(a)}),g.show()):g.hide()},e}(LTApi.Utils.Eventual)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;LTApi.Client=function(b){function d(a,b){var c;return null==b&&(b={}),this instanceof LTApi.Client?(this.params=this.u.merge({},b),this.api_version=this.params.api_version||this.u.cfg("api_version")||3,this.api_key=null!=a?a:this.u.cfg("api_key"),null!=(c=LTApi.Instances.client[this.api_version])?c:(d.__super__.constructor.apply(this,arguments),LTApi.Instances.client[this.api_version]=this,this.u.load.jquery(function(a){return function(b){return e=b,a.u.LOGGER.info("Loading Client API v"+a.api_version)}}(this)),this)):new LTApi.Client(a,b)}var e;return a(d,b),e=null,d.prototype.request_id=null,d.prototype.call=function(){var a;return a=1<=arguments.length?c.call(arguments,0):[],new LTApi.Utils.RSVP.Promise(function(b){return function(c,d){var e,f,g,h,i,j,k,l,m;return j=b.resolve_arguments(a),h=j.name,i=j.params,m=j.success,f=j.fail,(g=LTApi.Client.get_method(h))?(g.validate_version(b.api_version),e=b.auth_params(),l=g.build_url(e),i=g.validate_params(i,e),k=b.perform_request(l,g,i),k.then(function(){return c.apply(null,arguments),m.apply(null,arguments)},function(){return d.apply(null,arguments),f.apply(null,arguments)})):d({error:!0,info:{error:null,status:0,thrown:"Unknown method "+h},data:null})}}(this))},d.prototype.resolve_arguments=function(a){var b,c,d,e,f,g;return a=[].slice.call(a),c=a[0],d=a[1],this.u.is("function",a[1])?(e=a.slice(1),g=e[0],b=e[1],d={}):(f=a.slice(2),g=f[0],b=f[1]),null==g&&(g=function(){}),null==b&&(b=function(){}),{name:c,params:d,success:g,fail:b}},d.prototype.perform_request=function(a,b,c,d){return new LTApi.Utils.RSVP.Promise(function(d){return function(e,f){var g;return g=new LTApi.Client.Request(b,d,{url:a,type:b.request_method,data:c}),g.perform().then(function(a){return e(g.get_response(!0))})["catch"](function(a){var b,c,d;return d=a.xhr,b=a.error,c=a.thrown,f({error:!0,info:{error:b,status:d.status,thrown:c.toString()},data:function(){try{return JSON.parse(d.responseText)}catch(a){return d.responseText}}()})})}}(this))},d.prototype.auth_params=function(){return{js:!0,key:this.api_key,api_version:this.api_version}},d.get_method=function(){var a,b;return a=1<=arguments.length?c.call(arguments,0):[],(b=this.Method).get_method.apply(b,a)},d.methods=function(){var a,b,d,e;return b=LTApi.Client.Method.list(),e=LTApi.Utils.keys(b),d="\nNamespaces:\n  "+e.join("\n  "),a=[],e.forEach(function(c){var e,f,g;return f=b[c],g=LTApi.Utils.keys(f),e=LTApi.Utils.max(g,function(a){return a.length}).length,d+="\n\nMethods for %c["+c+"]%c:",a.push("font-weight: bold","font-weight: normal"),g.forEach(function(b){var c,g;return c=f[b],g=LTApi.Utils.pad(c.name,e+5,"right"),d+="\n  %c"+g+"%c [ "+c.build_url()+", %c>="+c.min_version+"%c ]",a.push("color: blue","color: black","font-weight: bold","font-weight: normal")})}),console.log.apply(console,[d].concat(c.call(a)))},d.info=function(a){var b,d,e,f,g,h,i,j,k;return null!=(h=LTApi.Client.get_method(a))?(j=h.method_params,d=LTApi.Utils.keys(j),i=LTApi.Utils.pad,b=LTApi.Utils.is,d.length?(k=[],f=LTApi.Utils.max(d,function(a){return a.length}).length,e=d.map(function(a){var c,d,e,g,h,l,m,n;return d=j[a],c=null!=(e=d.override)?e:!1,m=b("function",d.required)?"expr":null!=(g=d.required)?g:!0,n=i(a,f,"right")+" [ "+[i("required: "+m,20,"right"),i("default: "+(null!=(h=d["default"])?h:"empty"),20,"right"),i("type: "+(null!=(l=d.type)?l:"any"),20,"right"),i("override: "+c,20,"right")].join(" | ")+" ]",m&&(k.push("font-weight: bold"),n="%c"+n),c&&(k.push("color: blue"),n="%c"+n),n}),g="Params listing for "+h.full_name+":\n  "+e.join("\n  "),console.log.apply(console,[g].concat(c.call(k)))):console.log("Method "+h.full_name+" has no special params")):console.log("No such method: "+a)},d}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].slice;LTApi.Client.Method=function(d){function e(a){var b,c,d;if(null==(c=a.namespace))throw"Methods without namespace are disallowed";if(null==(b=a.name))throw"Method should have name";this.name=b,this.namespace=c,this.full_name=c+"."+b,this.params=this.u.merge(!0,{},f,a),this.path=this.params.path||this.name,this.request_method=(null!=(d=this.params.request_method)?d:"get").toLowerCase(),this.method_params=this.params.default_params,this.overrides=this.get_overrides(),this.min_version=this.params.minimal_version,j(c,b,this),Object.defineProperty(this,"is_post",{get:function(){return"get"!==this.request_method}})}var f,g,h,i,j,k;return a(e,d),i={},f={namespace:null,name:null,request_method:"get",path:"",minimal_version:2,allow_all_params:!1,default_params:{}},h=function(a){var b,c,d;return d=a.split("."),c=d[0],b=d[1],{namespace:c,method:b}},g=function(a,b){var c,d;return null==b&&(c=h(a),a=c.namespace,b=c.method),null!=(d=i[a])?d[b]:void 0},j=function(a,b,c){return null==i&&(i={}),null==i[a]&&(i[a]={}),i[a][b]=c},k=function(a,b){var c;throw c="Execution stopped for "+a,Error(c+": "+b)},e.list=function(){return LTApi.Utils.merge(!0,{},i)},e.get_method=function(a){return g(a)},e.alias=function(a,b){var c,d;if(d=h(a),c=g(d.namespace,d.method),null==c)throw"Can't alias undefined method [from]";return j(d.namespace,b,c)},e["extends"]=function(a,b,c){var d,f;if(f=h(a),d=g(f.namespace,f.method),null==d)throw"Can't extend undefined method [from]";return c=LTApi.Utils.merge(!0,{},d.params,c,{namespace:f.namespace,name:b}),new e(c)},e.prototype.build_url=function(a){var b;return null==a&&(a=""),this.is_post||(a=""),LTApi.URI(this.u.cfg("api_url")).protocol(null!=(b=this.u.cfg("scheme"))?b:location.protocol).segment([this.namespace,this.path]).suffix(this.u.cfg("data_type")).query(a).port("").toString()},e.prototype.get_overrides=function(){var a;return a=this.u.keys(this.method_params),a.reduce(function(a){return function(b,c){var d;return d=a.method_params[c],null!=d.override&&(b[c]=d),b}}(this),{})},e.prototype.contains_overrides=function(a){var b;return b=this.override_terms(a),b.length?this.u.select(a,b):void 0},e.prototype.override_terms=function(a){var b,c,d,e,f;return e=this.u.keys(a),d=this.u.keys(this.overrides),b=this.method_params_keys(),c=this.u.intersect(e,d).map(function(a){return function(b){return a.allowed_keys_for(b)}}(this)),f=c.reduce(function(a){return function(b,c){return a.u.intersect(b,c)}}(this),b),this.u.uniq(f)},e.prototype.allowed_keys_for=function(a){var b,c,d,e,f,g;return g=[],f=this.method_params[a],e=f.override,d=this.u.keys(this.method_params),e===!0?[a]:null!=(b=e.accept)?this.accept_keys(b,a):null!=(c=e.deny)?this.deny_keys(c):void 0},e.prototype.deny_keys=function(){var a,b;return b=1<=arguments.length?c.call(arguments,0):[],b=this.u.flatten([b]),a=this.method_params_keys(),this.u.remove(a,this.u.intersect(a,b))},e.prototype.accept_keys=function(){var a,b;return b=1<=arguments.length?c.call(arguments,0):[],b=this.u.flatten([b]),a=this.method_params_keys(),this.u.intersect(a,b)},e.prototype.method_params_keys=function(){var a;return a=null!=this._method_params_keys?this._method_params_keys:this._method_params_keys=this.u.keys(this.method_params),a.slice()},e.prototype.get_method_params=function(a,b){var c,d;return null==b&&(b=!1),c=this.u.clone(this.method_params),b?(d=this.override_terms(a),this.u.select(c,d)):c},e.prototype.validate_version=function(a){if(!(Number(a)>=this.min_version))throw"Incompatible version for "+this.full_name+". Should be >="+this.min_version+"."},e.prototype.validate_params=function(a,c,d){var e,f,g,h,i,j;if(null==a&&(a={}),null==c&&(c={}),null==d&&(d=!1),window.FormData&&a instanceof FormData)return a;if(this.params.allow_all_params)return this.u.merge({},a);if(h={},null!=(g=this.contains_overrides(a))&&d===!1)return this.validate_params(g,c,!0);f=this.get_method_params(a,d);for(e in f)b.call(f,e)&&(j=f[e],i=this.valid_value_for(e,a,j),null!=i&&(h[e]=i));return this.is_post?this.u.merge(!0,{},h):this.u.merge(!0,{},c,h)},e.prototype.valid_value_for=function(a,b,c){var d,e,f,g,h,i,j,l,m,n;return n=null!=(h=b[a])?h:null!=c?c["default"]:void 0,l=null!=(i=null!=(j=g=null!=c?c.required:void 0)&&"function"==typeof j.call?j.call(b,n):void 0)?i:null!=g?g:!0,l===!0&&null==n&&k(this.full_name,"Missing required field "+a),null!=(m=null!=c?c.type:void 0)&&null!=n&&(f=this.u.is(m,n),f||k(this.full_name,"Value of "+a+" should be of type "+m+". Got "+this.u.type(n)+" instead")),null!=n&&null!=(d=null!=c?c.format:void 0)&&(e=this.u.is("function",d)?d.call(b,n):this.u.is("regexp",d)?d.test(n):!0,e||k(this.full_name,"Value of "+a+" has invalid format")),n},e}(LTApi.Module)}.call(this),function(){!function(a){var b,c;return b=/^([\d]{2})\.([\d]{2})\.([\d]{4})$/,c=/^([\d]{1,3})\.([\d]{1,3})\.([\d]{1,3})\.([\d]{1,3})$/,new a({namespace:"search",name:"search",path:"perform",minimal_version:1,default_params:{hotel_ids:{required:!1},from_city:{"default":"Moscow",type:"string"},from_country:{"default":"RU",type:"string"},to_city:{required:!1,type:"string"},to_country:{"default":"EG",type:"string"},nights:{"default":7,type:"number"},adults:{"default":2,type:"number"},start_date:{format:b,type:"string"},kids:{required:!1,"default":0,type:"number"},kids_ages:{required:function(a){return this.kids>0},type:"string"},stars_from:{"default":1,type:"number"},stars_to:{"default":5,type:"number"},flex_dates:{required:!1,"default":!1,type:"number"}}}),new a({namespace:"search",name:"get_hotel_offers",minimal_version:1,default_params:{hotel_id:{type:"number"},request_id:{type:"string",required:!1}}}),a.alias("search.get_hotel_offers","get_offers"),new a({namespace:"search",name:"nights",path:"flights_and_nights",minimal_version:1,default_params:{city_from:{type:"string","default":"Moscow"},country_to:{type:"string","default":"RU"},start_date:{format:b},end_date:{format:b}}}),new a({namespace:"search",name:"get_offer",minimal_version:1,default_params:{operator_id:{type:"number"},tour_id:{type:"string"},request_id:{type:"string",required:!1}}}),a.alias("search.get_offer","register"),a["extends"]("search.search","enqueue",{path:"enqueue",minimal_version:2,default_params:{request_id:{type:"string",required:!1}}}),new a({namespace:"search",name:"status",default_params:{request_id:{type:"string",required:!1}}}),new a({namespace:"search",name:"results",default_params:{operator_ids:{type:"string"},request_id:{type:"string",required:!1}}}),new a({namespace:"search",name:"info",default_params:{request_id:{type:"string",required:!1}}}),new a({namespace:"search",name:"suggest",minimal_version:3,default_params:{departure_id:{type:"number"},nights:{type:"number"},country_iso2:{type:"string"},date:{format:b}}}),new a({namespace:"references",name:"hotel",default_params:{id:{type:"number"}}}),new a({namespace:"references",name:"operators"}),new a({namespace:"references",name:"countries",default_params:{from_city:{required:!1,type:"string"}}}),new a({namespace:"references",name:"departures",default_params:{only:{required:!1},exclude:{required:!1}}}),new a({namespace:"references",name:"citizenships"}),new a({namespace:"references",name:"i18n",default_params:{path:{required:!1,type:"string"}}}),new a({namespace:"references",name:"locations",default_params:{query:{required:!1,type:"string"},city:{required:!1,type:"string"},country:{required:!1,type:"string"},from_city:{required:!1,type:"string"},hotel:{required:!1,type:"string"}}}),a["extends"]("references.locations","autocomplete",{path:"autocomplete",minimal_version:3,default_params:{destinations:{required:!1,type:"boolean"}}}),new a({namespace:"references",name:"location",path:"client_city",default_params:{ip:{required:!1,type:"string",format:c},lat:{required:!1,type:"number",required:function(){return null!=this["long"]}},"long":{required:!1,type:"number",required:function(){return null!=this.lat}}}}),new a({namespace:"references",name:"destinations",default_params:{only:{required:!1,type:"object"},exclude:{required:!1,type:"object"}}}),new a({namespace:"references",name:"monthly_stats",default_params:{city_from:{"default":"Moscow",type:"string"},country_to:{"default":"EG",type:"string"},start_month:{type:"number"},start_year:{type:"number"}}}),new a({namespace:"references",name:"hotel_prices",default_params:{city_from:{"default":"Moscow",type:"string"},hotel_id:{type:"number"},start_month:{type:"number"},start_year:{type:"number"}}}),new a({namespace:"references",name:"hotels_by_region",default_params:{country_id:{type:"number"},city_id:{type:"number"}}}),new a({namespace:"references",name:"available_countries",default_params:{city_from:{type:"string"}}}),new a({namespace:"references",name:"currencies",default_params:{place_iso:{type:"string"}}}),new a({namespace:"references",name:"self",path:"partner"}),new a({namespace:"references",name:"cities"}),new a({namespace:"references",name:"nights",path:"flights_and_nights",minimal_version:3,default_params:{city_from:{type:"string","default":"Moscow"},country_to:{type:"string","default":"RU"},start_date:{format:b},end_date:{format:b}}}),new a({namespace:"references",name:"press"}),new a({namespace:"operators",name:"list"}),new a({namespace:"statistics",name:"prices",default_params:{search_query:{required:!1,override:{accept:["count","full_month"]},type:"string"},full_month:{required:!1,override:{deny:"count"}},count:{required:!1,"default":21,type:"number"},hotel_ids:{required:!1},from_city:{"default":"Moscow",type:"string"},from_country:{"default":"RU",type:"string"},to_city:{required:!1,type:"string"},to_country:{"default":"EG",type:"string"},nights:{"default":7,type:"number"},adults:{"default":2,type:"number"},start_date:{format:b,type:"string"},kids:{required:!1,"default":0,type:"number"},kids_ages:{required:function(a){return this.kids>0;
},type:"string"},stars_from:{"default":1,type:"number"},stars_to:{"default":5,type:"number"},flex_dates:{required:!1,"default":!1,type:"boolean"}}}),new a({namespace:"statistics",name:"monthly_stats",default_params:{city_from:{"default":"Moscow",type:"string"},country_to:{"default":"EG",type:"string"},start_month:{type:"number"},start_year:{type:"number"}}}),new a({namespace:"statistics",name:"date_prices",default_params:{date:{format:"YYYY-MM-DD",type:"string"},city_id:{required:!1,type:"number"},iso:{type:"string"},limit:{type:"number"}}}),new a({namespace:"packages",name:"show",default_params:{package_id:{type:"number"},image_sizes:{required:!1,type:"string"},order_extras:{required:!1,type:"array"}}}),new a({namespace:"packages",name:"actualize",default_params:{package_id:{type:"number"}}}),new a({namespace:"orders",name:"show",default_params:{id:{type:"number"},pin:{type:"string"}}}),new a({namespace:"orders",name:"stamp",default_params:{id:{type:"number"}}}),new a({namespace:"orders",name:"build",request_method:"post",default_params:{"package":{type:"number"},coupon_code:{required:!1,"default":"",type:"string"},bonuses_granted:{required:!1,"default":0,type:"number"},visa_confirmed:{required:!1,"default":!1,type:"boolean"},extra_price:{required:!1,"default":0,type:"number"},flight_pair_id:{type:"string"},airlines:{type:"array"}}}),new a({namespace:"orders",name:"create",request_method:"post",default_params:{order:{type:"object",required:!1}}}),new a({namespace:"orders",name:"pay",request_method:"post",default_params:{order_id:{type:"number"},payment_number:{type:"number",required:!1},payment_method:{type:"string",required:!1}}}),new a({namespace:"testimonials",name:"list",default_params:{count:{required:!1,"default":0,type:"number"},moderated:{required:!1,"default":!0,type:"boolean"}}}),new a({namespace:"testimonials",name:"random",default_params:{count:{required:!1,"default":1,type:"number"},moderated:{required:!1,"default":!0,type:"boolean"}}}),new a({namespace:"subscription",name:"daily",request_method:"post",minimal_version:3,default_params:{departure:{type:"string"},country_to:{type:"string"},email:{type:"string"},start_date:{format:b,type:"string"}}}),new a({namespace:"subscription",name:"create",request_method:"post",minimal_version:3,default_params:{departure:{type:"string",required:!1},email:{type:"string"},claim_coupon:{type:"boolean","default":!1,required:!1}}}),new a({namespace:"subscription",name:"vip",request_method:"post",minimal_version:3,default_params:{name:{type:"string"},email:{type:"string"},phone:{type:"string"},city_from:{type:"string"},destination:{type:"string"},wishes:{type:"string",required:!1}}}),new a({namespace:"hot",name:"cheapest",minimal_version:3,default_params:{}}),new a({namespace:"hot",name:"header",minimal_version:3,default_params:{country_iso2:{type:"string"}}}),new a({namespace:"hot",name:"tours",minimal_version:3,default_params:{countries:{type:"string"},months:{type:"string"},group_by:{required:!1,type:"string"},nights:{required:!1,type:"string"},stars:{required:!1,type:"string"},sort_by:{required:!1,type:"string"}}}),new a({namespace:"partner",name:"info"}),new a({namespace:"partner",name:"apply",request_method:"post",allow_all_params:!0}),new a({namespace:"partner",name:"wl_request",minimal_version:3,default_params:{phone:{type:"string"},email:{type:"string"}}})}(LTApi.Client.Method)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.Client.Request=function(b){function c(a,b,d){this.method=a,this.client=b,this.request_params=d,c.__super__.constructor.apply(this,arguments),this.response=null,this.status=null,this.complete=!1}var d;return a(c,b),d=null,c.prototype.perform=function(){return new LTApi.Utils.RSVP.Promise(function(a){return function(b,c){return null==d?a.u.load.jquery(function(e){return d=e,a.initialize(b,c)}):a.initialize(b,c)}}(this))["catch"](function(a){return console.log(a)})},c.prototype.initialize=function(a,b,c){var d;return d=this.u.load.ajax(this.request_params),d.done(function(b){return function(c){return b.response=new LTApi.Client.Response(c,b.client,b.method),a(b.response)}}(this)),d.fail(function(a){return function(a,c,d){return b({xhr:a,error:c,thrown:d})}}(this)),d.always(function(a){return function(){return a.complete=!0,a.status=d.status}}(this))},c.prototype.get_response=function(a){return null==a&&(a=!0),a?this.response.formatted(this.response,this.method,this.client):this.response.raw()},c}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty,c=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};LTApi.Client.Response=function(b){function d(a,b,c){this.cli=b,this.method=c,d.__super__.constructor.apply(this,arguments),g=a}var e,f,g,h;return a(d,b),f=null,g=null,h=[{methods:["enqueue","info"],formatter:function(a,b){return LTApi.Utils.merge(a,{get_statuses:function(c){var d;return d={request_id:a.request_id},b.call("search.status",d,c)},get_results:function(c,d){var e;return null==c&&(c=[]),e={request_id:a.request_id,operator_ids:null!=c&&"function"==typeof c.join?c.join(","):void 0},b.call("search.results",e,d)},get_hotel_offers:function(c,d){var e;return e={hotel_id:c,request_id:a.request_id},b.call("search.get_hotel_offers",e,d)}})}},{methods:["get_hotel_offers"],formatter:function(a,b){var c,d;return c=null!=a.response?"response":"hotel_offers",d=a.request_id,a[c]=LTApi.Utils.map(a[c],function(a){return function(a){return LTApi.Utils.merge(a,{register:function(c){return b.call("search.register",{tour_id:a.id,operator_id:a.operator,request_id:d},c)}})}}(this))}}],e=function(a,b,d){var e,f;return e=(null!=(f=LTApi.Utils.find(h,function(b){var d;return d=a.name,c.call(b.methods,d)>=0}))?f:{}).formatter,null!=e&&e instanceof Function&&e(b,d),b},d.prototype.raw=function(){return g},d.prototype.formatted=function(){var a;return a=this.raw(),e(this.method,a,this.cli)},d}(LTApi.Module)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.BestPricesWidget=function(b){function c(a){c.__super__.constructor.call(this,g,a,"best_prices_widget")}var d,e,f,g,h,i,j,k,l;return a(c,b),i=null,h=null,k=LTApi.VERSION,e=["locale","api_key"],d="lt_subscribe_",f="DD MMM YYYY г.",j=location.protocol,l=400,g={language:"ru",setup:{place:"#best_prices_widget",theme:"default",width:320,link_target:"_self",params:{}},params:{city_from:"Moscow"}},c.prototype.__widget_name="best_prices_widget",c.prototype.events_list=["ready:once:memory"],c.prototype.init=function(a,b){var c;return i=a,this.nights=new LTApi.Utils.NightsLoader({client:this.client}),this.city_from=this.config.params.city_from,this.country_from=null,c=new Date,this.config.params.start_month?this.start_month=this.config.params.start_month:this.start_month=c.getMonth()+1,this.config.params.start_year?this.start_year=this.config.params.start_year:this.start_year=c.getFullYear(),this.load_styles({themes_path:"/themes/best_prices_widget"},this.initialize)},c.prototype.initialize=function(){return this.render_widget()},c.prototype.render_widget=function(){return this.load_partner().then(function(a){return function(){var b,c;if(a.widget=i(a.config.setup.place),a.widget.size())return b=a.config.setup,c=a.tpl("index",{}).trim(),a.root=i(c),a.widget.html(a.root),a.resize_widget(),a.load_departures();throw new Error("Can't find element "+a.config.setup.place)}}(this))},c.prototype.load_departures=function(){return this.client.call("references.departures").then(function(a){return function(b){var c,d,e;return d=["Москва","Санкт-Петербург","Екатеринбург"],c=[],e=new Promise(function(a){var c;return c=b.departures.map(function(a,b){var c,d;return c=a.name_en.replace(/\s/g,".").replace(/\-/g,"~"),d=c+"-"+a.iso2,a.code=d,a}),a(c)})["catch"](function(a){return console.log(a)}),e.then(function(b){var e,f,g;return g=b.filter(function(a){var b;return d.indexOf(a.name_ru)>=0?(b=d.indexOf(a.name_ru),c[b]=a,!1):!0}),e=c.concat(g),f=a.tpl("departures",{departures:e}),a.elem(".departure_list_wrap").html(f),a.city_from=e[0].name_en,a.load_countries(),a.bind_events(),a.toggle_preloader("params","off")})["catch"](function(a){return console.log(a)})}}(this))},c.prototype.load_countries=function(){return this.client.call("references.countries",{from_city:this.city_from}).then(function(a){return function(b){var c,d,e,f,g,h;return f=a.config.setup.width>l?5:6,g=b.slice(),e=b.slice(0,f),null!=e[1]?a.country_to=e[1]:a.country_to=e[0],g.forEach(function(b){return b.checked=b.iso2===a.country_to.iso2}),e.forEach(function(b){return b.checked=b.iso2===a.country_to.iso2}),g=g.sort(function(a,b){return a.name_ru<b.name_ru?-1:a.name_ru>b.name_ru?1:0}),d=Math.ceil(g.length/2),h=a.u.chunk(g,d),c=a.tpl("countries_item",{popular_countries:e,left_list:h[0],right_list:h[1]}),a.elem(".bprices_widget_head_countries_wrap").html(c),a.elem(".bprices_widget_head").removeClass("loading"),g.length>7?a.elem(".bprices_widget_head_countries-all").show():a.elem(".bprices_widget_head_countries-all").hide(),null!=a.country_to&&a.elem("#selected_country").html(a.country_to.name_ru),a.elem("input[name='country']").on("click",function(b){return a.select_country(i(b.currentTarget))}),a.elem("input[name='alt_country']").on("click",function(b){return a.select_country(i(b.currentTarget))}),a.load_results(),a.elem(".bprices_widget_head_countries_close").on("click",function(b){return a.elem(".bprices_widget_head_countries").removeClass("opened")})}}(this))},c.prototype.select_country=function(a){var b,c,d,e,f;return f=a.val(),d=a.parent().find("label").text(),this.country_to={iso2:f,name_ru:d},b=a.attr("name"),c=this.elem(".bprices_widget_countries_item-sub"),e=function(){switch(b){case"country":return this.elem("input[name='alt_country'][value='"+this.country_to.iso2+"']");case"alt_country":return this.elem("input[name='country'][value='"+this.country_to.iso2+"']")}}.call(this),e.length>0?e.prop("checked",!0).trigger("change"):(c.css("display","inline-block"),c.find("input").attr("value",f).prop("checked",!0).trigger("change").attr("id",f),c.find("label").text(d).attr("for",f)),this.elem(".bprices_widget_head_countries").removeClass("opened"),this.update_results()},c.prototype.load_results=function(){var a,b;return null!=this.city_from&&null!=this.country_to&&null!=this.start_month&&null!=this.start_year?(b={city_from:this.city_from,country_to:this.country_to.iso2,start_month:this.start_month,start_year:this.start_year},this.client.call("statistics.monthly_stats",b).then(function(a){return function(b){var c,d,e,f,g,h,j;return c=Object.keys(b.response),null==a.selected_night&&(a.selected_night=c[0]),g=b.response[a.selected_night],e=LTApi.Utils.CONFIG.public_url,j=a.get_url_params(),f=g.reduce(function(a,b){return null!=a?b.min_price<a.min_price?b:a:b},null),f.lowest_price=!0,i.extend(!0,f,g),h=g.filter(function(b,c){return b.absolute_link=LTApi.URI(e).resource("/search/"+b.query+j),b.link_target=a.config.setup.link_target,b.min_price&&b.month&&b.query_single}),d=a.tpl("result_item",{items:h}),a.elem(".bprices_widget_content_results").html(d),a.load_nights(c),a.toggle_preloader("results","off")}}(this))):(a=this.tpl("result_item",{items:[]}),this.elem(".bprices_widget_content_results").html(a),this.toggle_preloader("results","off"))},c.prototype.load_nights=function(a){var b,c;return b=a.map(function(a){return function(b){return{selected:b===a.selected_night,value:b}}}(this)),c=this.tpl("nights",{items:b}),this.elem(".bprices_widget_head_nights").html(c),this.elem("#selected_night").html(this.selected_night),this.elem("input[name='nights']").on("click",function(a){return function(b){return a.selected_night=i(b.currentTarget).val(),a.update_results()}}(this)),this.toggle_preloader("params","off")},c.prototype.size_class=function(){var a,b;return b=this.root.width(),a=b>l?"large":"medium",d+a},c.prototype.resize_widget=function(){var a,b,c,e;return b=this.config.setup.width,e=d+"medium",c=d+"large",b&&this.root.outerWidth(b),a=this.root.hasClass(this.size_class()),a?void 0:this.root.removeClass(e).removeClass(c).addClass(this.size_class())},c.prototype.bind_events=function(){return this.elem(".departure_list").on("change",function(a){return function(b){var c,d,e;return c=i(b.currentTarget).find(":selected"),e=c.val(),d=c.text(),a.city_from=e,a.elem(".head_departure_list_label").html(d),a.toggle_preloader("params","on"),a.load_countries()}}(this)),this.elem(".bprices_widget_head_countries-trigger").on("click",function(a){return function(b){var c;return c=a.elem(".bprices_widget_head_countries"),c.hasClass("opened")?c.removeClass("opened"):c.addClass("opened")}}(this)),i(document).on("click",function(a){return function(b){var c,d,e;return c=i(".bprices_widget"),e=c.is(b.target),d=i.contains(c[0],b.target),e||d?void 0:a.elem(".bprices_widget_head_countries").removeClass("opened")}}(this))},c.prototype.update_results=function(){return this.toggle_preloader("results","on"),null!=this.country_to&&this.elem("#selected_country").html(this.country_to.name_ru),this.elem("#selected_night").html(this.selected_night),this.load_results()},c.prototype.scroll_countries=function(a){var b,c;return b=this.elem(".bprices_widget_head_countries_wrap_styles"),c=a-b.offset().top,b.css("margin-top",-c),this.elem(".bprices_widget_head_countries").removeClass("opened")},c.prototype.toggle_preloader=function(a,b){var c;switch(c=function(){switch(a){case"params":return this.elem(".bprices_widget_head");case"results":return this.elem(".bprices_widget_content")}}.call(this),b){case"on":return c.addClass("loading");case"off":return c.removeClass("loading")}},c.prototype.elem=function(a){return this.root.find(a)},c}(LTApi.Modules.WidgetBase)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.CountryPrices=function(b){function c(a){c.__super__.constructor.call(this,f,a,"country_prices")}var d,e,f,g,h,i,j;return a(c,b),g=null,i=LTApi.VERSION,e=["locale","api_key"],d="lcw_size_",h=location.protocol,j={small:200,medium:300,large:400,xlarge:500},f={language:"ru",setup:{place:"#lt_country_prices",theme:"default",width:400,params:{}},params:{iso:"DO",city_id:20960,date:LTApi.moment().add({days:5}).format("DD.MM.YYYY")}},c.prototype.__widget_name="country_prices",c.prototype.events_list=["ready:once:memory"],c.prototype.init=function(a,b){return g=a,this.load_styles({themes_path:"/themes/country_prices"},this.initialize)},c.prototype.initialize=function(){return this.render_widget()},c.prototype.elem=function(a){return this.root.find(a)},c.prototype.render_widget=function(){var a,b;if(this.widget=g(this.config.setup.place),this.widget.size())return a=this.config.setup,b=this.tpl("index",{}).trim(),this.root=g(b),this.widget.html(this.root),this.resize_widget(),this.append_data();throw new Error("Can't find element "+this.config.setup.place)},c.prototype.size_class=function(){var a,b;return b=this.root.width(),a=b<j.medium?"small":b<j.large?"medium":b<j.xlarge?"large":"xlarge",d+a},c.prototype.resize_widget=function(){var a,b,c,e,f;return b=this.config.setup.width,f=d+"small",e=d+"medium",c=d+"large",c=d+"xlarge",b&&b>=j.small&&this.root.outerWidth(b),a=this.root.hasClass(this.size_class()),a?void 0:this.root.removeClass(f).removeClass(e).removeClass(c).addClass(this.size_class())},c.prototype.append_data=function(){var a;return this.root.hasClass("lcw_size_xlarge")?this.config.params.limit=12:this.config.params.limit=6,a={iso:this.config.params.iso,date:this.config.params.date,limit:this.config.params.limit},null!=this.config.params.city_id&&(a.city_id=this.config.params.city_id),this.client.call("statistics.date_prices",a).then(function(a){return function(b){var c;return c=a.tpl("data",b).trim(),a.elem(".lcw_wrapper").html(g(c))}}(this))["catch"](function(a){return console.log(a)})},c}(LTApi.Modules.WidgetBase)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.HotToursWidget=function(b){function c(a){c.__super__.constructor.call(this,h,a,"hot_tours_widget")}var d,e,f,g,h,i,j,k,l;return a(c,b),j=null,i=null,l=LTApi.VERSION,e=["locale","api_key"],d="lt_hot_tours_",g="DD MMM YYYY г.",k=location.protocol,f=new Date,h={language:"ru",setup:{place:"#hot_tours_widget",theme:"default",params:{},hotels_shown:3,enable_scroll:!1,link_target:"_self"},params:{countries:"TH",months:f.getMonth()+1,city_name_ru:null,nights:null,stars:null}},c.prototype.__widget_name="hot_tours_widget",c.prototype.events_list=["ready:once:memory"],c.prototype.init=function(a,b){return j=a,this.load_styles({themes_path:"/themes/hot_tours_widget"},this.render_widget)},c.prototype.render_widget=function(){return this.load_partner().then(function(a){return function(){var b,c;if(a.widget=j(a.config.setup.place),a.widget.size())return b=a.config.setup,c=a.tpl("index",{scroll:a.config.setup.enable_scroll}).trim(),a.root=j(c),a.widget.html(a.root),a.bind_events(),a.load_data();throw new Error("Can't find element "+a.config.setup.place)}}(this))},c.prototype.load_data=function(){var a;return a={group_by:"region"},a.countries=this.config.params.countries.toString(),a.months=this.config.params.months.toString(),this.config.params.nights&&(a.nights=this.config.params.nights),this.config.params.stars&&(a.stars=this.config.params.stars),this.client.call("hot.tours",a).then(function(a){return function(b){var c;return a.data=b,c=Object.keys(a.data.hot_tours),a.render_countries_list(c)}}(this))},c.prototype.render_countries_list=function(a){var b,c;return c=this.tpl("country_item",{countries:a}),this.elem(".htours_countries").html(c),b=this.config.params.city_name_ru&&a.indexOf(this.config.params.city_name_ru)>0?this.config.params.city_name_ru:a[0],this.choose_city(b),this.render_hotels()},c.prototype.render_hotels=function(a){var b,c,d,e,f;return a||(this.already_rendered=0,a=this.config.setup.hotels_shown),e=this.already_rendered+a,d=this.unshown_hotels.slice(this.already_rendered,e),b=LTApi.Utils.CONFIG.public_url,f=this.get_url_params(),d=d.map(function(a){return a.absolute_link=LTApi.URI(b).resource(""+a.link+f),a}),c=this.tpl("hotel_item",{hotels:d}),0===this.already_rendered?this.elem(".htours_hotels_append").html(c):this.elem(".htours_hotels_append").append(c),this.already_rendered=this.already_rendered+d.length,this.check_hotel_count(this.already_rendered)},c.prototype.check_hotel_count=function(a){return this.already_rendered>=this.unshown_hotels.length?this.elem(".htours_hotels_more").fadeOut("fast"):this.elem(".htours_hotels_more").fadeIn("fast")},c.prototype.choose_city=function(a){return this.unshown_hotels=this.data.hot_tours[a],this.unshown_hotels=this.unshown_hotels.sort(function(a,b){return a.price-b.price}),this.unshown_hotels=this.unshown_hotels.map(function(a){return function(b){return b.partner=a.partner,b.link_target=a.config.setup.link_target,b}}(this)),this.render_hotels(),this.elem(".htours_countries_item").removeClass("active"),this.elem(".htours_countries_item[data-name='"+a+"']").addClass("active")},c.prototype.bind_events=function(){return this.root.on("click",".htours_countries_item",function(a){return function(b){var c;return c=j(b.currentTarget).data("name"),a.choose_city(c)}}(this)),this.root.on("click",".htours_hotels_more",function(a){return function(b){return a.render_hotels(3)}}(this))},c.prototype.elem=function(a){return this.root.find(a)},c}(LTApi.Modules.WidgetBase)}.call(this),function(){var a=["href","test","current_user","is_admin"],b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty,d=[].indexOf||function(a){for(var b=0,c=this.length;c>b;b++)if(b in this&&this[b]===a)return b;return-1};LTApi.HotelWidget=function(c){function e(a){e.__super__.constructor.call(this,j,a,"hotels_widget")}var f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v;return b(e,c),n=null,m=null,s=LTApi.VERSION,t=["price_feed","show_icons"],g=["locale","api_key"],f="lt_search_",o="YYYY-MM-DD",q="DD.MM.YYYY",h="DD.MM.YY",i="DD MMMM YYYY",u="<880",k={adults:[1,2,3,4],kids:[0,1,2,3],nights:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]},p={hotel_ids:"hotel_id"},l={title:"Поиск туров онлайн",destination_from:"Город вылета",destination_to:"Страна, город или отель",departure_date:"Дата вылета",placeholder:"страна, курорт или название отеля",nights_count:"Ночей",adults_count:"взрослых",kids_count:"детей",kids_ages:"возраст детей",submit:"Найти туры!",footer_text:"поиск туров от level.travel",ruble_sign:"<i class='ltw-icon-ruble'></i>",no_results:{message:"Мы не смогли найти подходящих вариантов.<br>Возможно, в отеле нет мест или закончились билеты.",alt_text:"Попробуйте поискать другие варианты.",button_search:{icon:"phone",text:"Подберите мне тур",description:"мы будем искать туры<br>на ту же дату и продолжительность<br>по всему региону"},button_call:{icon:"hotel",text:"Другие варианты",description:"мы позвоним вам и поможем<br>подобрать альтернативные<br>варианты отдыха"}},offer:{operator:"туроператор",room_type:"комната",nights:"ночей",start_date:"дата начала тура",pansion:"питание",open:"Подробнее",instant_confirm:{title:"Мгновенное подтверждение",description:"Туры с мгновенным подтверждением<br>подтверждаются быстрее других"},early_booking:{title:"Раннее бронирование",description:"Этот тур предлагается туроператором<br>на условиях &laquo;раннего бронирования&raquo;.<br>Заказать его сейчас будет выгоднее."}},errors:{from:"Откуда вы летите?",to:"Где вы хотели бы отдохнуть?",nights:"Какова желаемая длительность отдыха?",kids_ages:"Пожалуйста, укажите полный возраст всех детей"}},v={min:600,max:1e3},r={search_url:LTApi.Handlebars.compile("/search/{{f}}-to-{{t}}-departure-{{d}}-for-{{n}}-nights-{{a}}-adults-{{k}}-kids-{{s}}-stars{{{p}}}"),hotel_url:LTApi.Handlebars.compile("{{url}}?start_date={{d}}&nights={{n}}&adults={{a}}&kids={{k}}{{#if ka}}&kids_ages={{ka}}{{/if}}{{{p}}}")},j={language:"ru",setup:{offers_limit:3,show_title:!0,place:"#lt_form",theme:"default",width:800,params:{},css:[],detect_location:!0,show_flex_prices:!0,show_best_price:!0,show_icons:!0,fade_in:!0,autostart:!1,price_feed:!1,colorize_feed:!1,show_hotel_name:!1,price_on_button:!1,link_target:"_blank",operators:[],no_results:{buttons:!1,content:null}},search_params:{hotel_id:null,from:{},start_date:LTApi.moment().add({days:15}).toDate(),nights:7,adults:2,kids:{count:0,ages:[]},stars:{from:1,to:5}}},e.prototype.locale={ru:l},e.prototype.events_list=["ready:memory,once","loaded","complete","perform","no_results","show_results","search_done","results","min_price_change:memory","select_date","select_nights","select_adults","select_kids_count","select_kids_ages","change","interaction"],e.prototype.init=function(a,b){return n=a,m=LTApi.Utils.i18n_base.bind(this),this.sp=this.u.merge({},this.config.search_params),this.nights=new LTApi.Utils.NightsLoader({client:this.client}),this.url_maker=new LTApi.Utils.URLMaker,this.themes=["default","leveltravel","lookinhotels","mobile"],this.load_locales(l,b.locale),this.load_styles({external:this.config.setup.css,theme:this.theme_name(),themes_path:"/themes/hotel_widget"},this.initialize)},e.prototype.initialize=function(){return this.load_partner().then(function(a){return function(){return a.render_widget(),a.initialize_form()}}(this))},e.prototype.render_widget=function(){if(this.widget=n(this.config.setup.place),this.widget.size())return this.root=n(this.tpl("index",{partner:this.partner,url_params:this.get_url_params(),i18n:this.locale[this.config.language],multiline:this.is_multiline(),is_admin:this.detect_admin(),button_newline:this.width(u),show_feed:this.config.setup.price_feed,show_title:this.config.setup.show_title,show_footer:this.config.setup.show_footer,show_icons:this.config.setup.show_icons,link_target:this.config.setup.link_target,class_list:this.create_class_list(),lists:k,flex_prices:{top:this.is_multiline()&&this.config.setup.show_flex_prices,bottom:!this.is_multiline()&&this.config.setup.show_flex_prices}})),this.root.css({opacity:0}),this.widget.html(this.root),this.resize_widget(),this.root.css({opacity:1}),this.create_error_notifier(this.elem(".lt_hotel_widget_form"));throw new Error("Can't find element "+this.config.setup.place)},e.prototype.resize_widget=function(){var a,b,c,d;return d=this.normalized_width(),this.widget.width(d),this.config.setup.single_line?(c=this.elem(".lt_search_widget_body").width(),a=this.elem(".lt_search_widget_button").outerWidth(),b=c-a,this.elem(".lt_search_widget_form").outerWidth(b)):void 0},e.prototype.initialize_form=function(){return this.toggle_preloader(!0),this.attach_custom_select("select"),this.u.promise.all([this.load_departures(),this.load_hotel()]).then(function(a){return function(b){var c;return console.log(b),c=b[0],a.elem("#w_city_from").html(a.tpl("destinations",c)),a.attach_number_input(".lt_widget_kid_age input"),a.attach_calendar("#w_start_date"),a.attach_location_detection(c),a.fill_form().then(function(){return a.trigger("ready"),a.bind_events(),LTApi.Utils.ScriptExecutor.execute_batch(a.partner.execute_scripts),a.config.setup.autostart?setTimeout(function(){return a.perform_search()},100):void 0})}}(this))["catch"](function(a){return console.log(a)})},e.prototype.bind_events=function(){return this.elem(".lt_hotel_widget_form_wrapper").on("submit",function(a){return function(b){return b.preventDefault(),a.perform_search()}}(this)),this.elem("input, select").on("focus change input",this.hide_errors.bind(this)),this.elem(".lt_calendar_toggler").on("mousedown",this.suppress_event),this.root.on("click",".lt_widget_offers_more a",function(a){return function(b){return b.preventDefault(),a.show_all=!0,a.results_shown=!1,a.insert_html()}}(this)),this.root.on("click",".lt_hotel_widget_price",function(a){return function(b){var c;return b.preventDefault(),a.show_all=null,c=n(b.currentTarget).data("date"),c!==a.selected_date?(a.previous_date=a.selected_date,a.selected_date=n(b.currentTarget).data("date"),a.insert_html()):void 0}}(this)),this.root.on("click",".lt_widget_offer_package_create",function(a){return function(a){var b;return b=n(a.currentTarget),b.is(".lt_button_disabled")?a.preventDefault():setTimeout(function(){return b.attr("disabled",!0).addClass("lt_button_disabled"),setTimeout(function(){return b.removeAttr("disabled").removeClass("lt_button_disabled")},5e3)})}}(this)),this.elem(".lt_calendar_toggler").on("click",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),a.calendar.isVisible()?(a.elem(".lt_calendar_connect").trigger("blur"),a.calendar.hide()):(a.elem(".lt_calendar_connect").trigger("focus"),a.calendar.show())}}(this)),this.elem("select, input").on("input change",function(a){return function(b){return a.trigger("interaction change"),a.toggle_progress(!1)}}(this)),this.select.city_from.el.on("change",function(a){return function(){return a.select_available_date().then(function(){return a.reload_nights()})}}(this)),this.select.nights_count.el.on("change",function(a){return function(b){return a.trigger("select_nights",a.select.nights_count.get())}}(this)),this.select.adults_count.el.on("change",function(a){return function(b){return a.trigger("select_adults",a.select.nights_count.get())}}(this)),this.select.kids_count.el.on("change",function(a){return function(b){var c;return c=n(b.currentTarget).val(),a.toggle_kids_ages(".lt_kids_ages_wrapper",".lt_widget_kid_age",c),a.trigger("select_kids_count"),a.update_calendar_format(),a.select_available_date()}}(this)),this.root.on("change",".lt_widget_kid_age input",function(a){return function(){return a.trigger("select_kids_ages")}}(this)),this.calendar.config({onOpen:function(a){return function(){var b;return null!=a.nights_set?(b={minDate:a.nights_set.min.toDate(),maxDate:a.nights_set.max.toDate(),disabledDates:a.nights_set.disabled},a.calendar.config(b),a.calendar.draw()):void 0}}(this),onSelect:function(a){return function(){return a.update_nights_list(),a.toggle_progress(!1),a.trigger("select_date",a.calendar.getMoment())}}(this)})},e.prototype.fill_form=function(){var a,b;return b=this.config.search_params,a=this.get_default_departure_city(b.from),this.select.city_from.set(a),this.load_nights({city:this.city_from(!1),country:this.hotel.country.iso2}).then(function(a){return function(c){var d,e,f,g,h;return g=a.get_kids_params(b),a.toggle_preloader(!1),(f=g.count)>0&&(d=a.valid_kids_ages(a.u.first(g.ages||[],f)),e=a.elem(".lt_widget_kid_age").hide().filter(":lt("+f+")"),h=e.closest(".lt_kids_ages_wrapper"),a.toggle_kids_ages(".lt_kids_ages_wrapper",".lt_widget_kid_age",f,d)),c&&(a.update_calendar_format(),a.select_available_date(),a.update_nights_list(b.nights)),a.select.nights_count.set(b.nights),a.select.adults_count.set(b.adults),a.select.kids_count.set(g.count)}}(this))["catch"](function(a){return function(a){return console.error(a.stack)}}(this))},e.prototype.attach_location_detection=function(a){return this.config.setup.detect_location?this.location_detector=new LTApi.Utils.LocationDetection({api_key:this.api_key,select:this.select.city_from.el,wrapper:this.root,cities:a}):console.log("Automatic location detection disabled")},e.prototype.attach_calendar=function(a){var b,c,d,e;return e=this.config.search_params.start_date,b=this.u.get_valid_date(e,"DD.MM.YYYY",!0),d=LTApi.moment().startOf("day").add({days:1}),c=d.clone().add({months:9}).subtract({days:4}),this.calendar=new LTApi.Utils.Pikaday({field:this.elem(a)[0],firstDay:1,format:i,minDate:d.toDate(),maxDate:c.toDate(),defaultDate:null!=b?b:d,setDefaultDate:!0,i18n:LTApi.Utils.I18N.ltw_ru,customClass:"lt-searchform-picker",centered:!0,readOnly:!0,momentLang:"ltw_ru_alt_lower"})},e.prototype.attach_custom_select=function(a){return this.select=this.u.reduce(this.elem(a).toArray(),function(a,b){return a[b.name]=new LTApi.Utils.SelectBox(b,{class_name:"lt_widget_select"}),a},{})},e.prototype.attach_number_input=function(a){var b;return b=this.elem(a),new LTApi.Utils.NumberInput(b,{min:0,max:16,step:1})},e.prototype.attach_tooltips=function(){return this.elem("[data-ltwtip]").filter(":not(:invisible)").toArray().forEach(function(a){return function(b){var c,d;return b=n(b),null==(c=b.data("sttc"))&&(d=b.data("ltwtip"),c=new LTApi.Utils.SimpleTooltip(b,d,{x:b.data("ltwtipX")||"center",y:b.data("ltwtipY")||"bottom",custom_class:"lt_widget_tooltip lt_"+a.theme_name()+"_tooltip"})),b.on("mouseenter mouseleave",function(a){if(!n(a.currentTarget).is(":invisible"))switch(a.type){case"mouseenter":return null!=c?c.show():void 0;case"mouseleave":return null!=c?c.hide():void 0}})}}(this))},e.prototype.select_available_date=function(){return new Promise(function(a){return function(b){var c,d;return c=a.calendar.getMoment(),d=a.nights_set.nearest_date_to(c),d&&a.calendar.setDate(d.toDate()),b()}}(this))},e.prototype.hide_errors=function(){return this.elem("input, .lt_selectbox").filter(".error").removeClass("error"),this.elem(".lt_widget_error").css({display:"none",width:"auto"})},e.prototype.update_calendar_format=function(){var a;return a=this.elem(".lt_start_date").width(),155>a?this.calendar.config({format:h}):this.calendar.config({format:i}),this.calendar.setDate(this.calendar.getDate())},e.prototype.update_nights_list=function(a){var b,c,d,e,f;return b=this.calendar.getMoment(),
c=this.nights_cleanup(this.nights_set.find(b),null!=(d=this.config)&&null!=(e=d.search_params)?e.nights:void 0),null==a&&(a=this.select.nights_count.get()),f=this.nights_set.nearest_nights_to(a,c),this.select.nights_count.el.html(this.tpl("nights_list",c)),this.select.nights_count.set(f),String(f)!==String(a)?console.info("Nights count changed. We can handle it in some way"):void 0},e.prototype.update_title=function(){var a;if(this.config.setup.show_title&&this.config.setup.show_hotel_name)return a=this.u.trim(this.hotel.name.replace(/([\d]+)*/gi,"")),a=this.hotel.name+" "+this.hotel.stars+"*",this.elem(".lt_hotel_widget_title").text("Поиск туров в отель "+a)},e.prototype.normalized_width=function(){var a;return a=this.config.setup.width,a=this.u.max([v.min,a]),a=this.u.min([v.max,a])},e.prototype.create_class_list=function(){var a,b;return b=this.view_options(this.config.setup),a=[],this.is_multiline()&&a.push("multiline"),a=a.concat(b).join(" "+f),""+f+a},e.prototype.view_options=function(a){return a=Object.select(a,t),this.u.reduce(Object.keys(a),function(b){return function(b,c){return a[c]===!0&&b.push(c),b}}(this),[])},e.prototype.toggle_preloader=function(a){var b,c;if(null==a&&(a=!1),c=this.elem(".lt_widget_preloader"),b=100,this.config.setup.fade_in)switch(a){case!0:return c.fadeIn(b);case!1:return c.fadeOut(b)}else switch(a){case!0:return c.show();case!1:return c.hide()}},e.prototype.toggle_progress=function(a){var b,c;switch(b=this.elem(".lt_hotel_widget_submit"),c=this.elem(".lt_hotel_widget_submit_progress_bar"),a){case!0:return c.width(0),b.prop({disabled:!0}).addClass("lt_hotel_widget_submit_working").removeClass("lt_hotel_widget_submit_normal");case!1:return b.prop({disabled:!1}).addClass("lt_hotel_widget_submit_normal").removeClass("lt_hotel_widget_submit_working")}},e.prototype.perform_search=function(a){var b;return null!=a&&a.preventDefault(),b=this.collect_search_params(),this.validate_search_params(b).then(function(a){return function(){return a.cancel_request().then(function(){return a._old_min_price=null,a._current_min_price=null,a.selected_date=a.calendar.getMoment().format(o),a.search_request=new LTApi.Utils.SearchRequest({client:a.client,search_params:b,mode:"hotel",auto:!1}),a.handle_request(),a.save_location(b)})["catch"](function(a){return console.log(a)})}}(this))["catch"](function(a){return console.log(a)})},e.prototype.validate_search_params=function(a){return new Promise(function(b){return function(c){var d,e;return d=null,a.from&&!a.from.country&&null==d&&(d={msg:"errors.from",el:".location_departure"}),a.kids!==(null!=(e=a.kids_ages)?e.split(",").length:void 0)&&null==d&&(d={msg:"errors.kids_ages",el:".lt_kids_ages"}),null==d?c():b.show_error(d)}}(this))},e.prototype.show_error=function(a){var b;return b=m(a.msg),this.error_notifier.show(b,a.el)},e.prototype.cancel_request=function(){var a;return null!=(a=this.search_request)&&a.cancel(),this.remove_results()},e.prototype.handle_request=function(){var a;return a=this.elem(".lt_hotel_widget_submit_progress_bar"),this.search_request.on("perform",function(a){return function(){return a.trigger("perform"),a.results_shown=!1,a.toggle_progress(!0)}}(this)),this.search_request.on("results",function(a){return function(b){var c;return a.trigger("results"),a.render_results(null!=(c=b.response)?c:b.hotel_offers)}}(this)),this.search_request.on("no_results",function(a){return function(b){return a.trigger("no_results"),a.render_no_results()}}(this)),this.search_request.on("progress",function(b){return function(b){return a.stop().animate({width:b.progress+"%"},200)}}(this)),this.search_request.on("complete",function(a){return function(){return a.trigger("search_done")}}(this)),this.search_request.on("stop",function(a){return function(){return a.trigger("loaded"),a.toggle_progress(!1)}}(this)),this.search_request.perform_search()},e.prototype.kids_ages=function(a){var b;return b=this.elem(".lt_widget_kid_age input").toArray().map(function(a){return a.value}),this.u.compact(this.u.first(b,a),!0)},e.prototype.collect_search_params=function(){var a,b,c,d,e;return a=this.select.city_from.get().split("-"),c=Number(this.select.kids_count.get()),b=this.kids_ages(c),e={hotel_ids:this.hotel.id,from_country:a[1],from_city:a[0],to_country:this.hotel.country.iso2,start_date:this.calendar.getMoment().format(q),nights:Number(null!=(d=this.select.nights_count.get())?d:this.config.search_params.nights),adults:Number(this.select.adults_count.get()),kids:c,kids_ages:b.join(","),flex_dates:2},this.u.compactObject(e,!0)},e.prototype.render_results=function(a){var b,c,d;return d=this.prepare_results(a),null!=d&&d.length?(c=this.extract_dates(d),d=this.group_by_date(d),b=c.map(function(a){return a.start_date}),this.results_shown=!1,this.config.setup.show_best_price&&this.mark_best_prices(d),this.results={dates:c,results:d,available_dates:b},this.calculate_min_price(a),this.insert_html()):this.render_no_results()},e.prototype.remove_results=function(){return null==this.removing&&(this.removing=new this.promise(function(a){return function(b){var c;return c=a.results_wrapper(),c.is(":visible")?c.animate({opacity:"hide",height:"hide"},{complete:function(){return b()}}):b()}}(this)).then(function(a){return function(){return a.removing=null}}(this))),this.removing},e.prototype.calculate_min_price=function(a){var b;return this._old_min_price=this._current_min_price,b=a.map(function(a){return a.price}),this._current_min_price=this.u.min(b),this._current_min_price!==this._old_min_price?this.trigger("min_price_change",this._current_min_price):void 0},e.prototype.render_no_results=function(){var a;return a=this.tpl("no_results",{i18n:this.locale[this.config.language],config:this.config.setup.no_results}),this.prices_block().empty(),this.results_block().empty().html(a),this.results_wrapper().show()},e.prototype.insert_html=function(){var a,b,c,d,e,f,g,h,i,j,k,l,m;try{return this.selected_date=this.select_nearest_date_for(this.selected_date,this.results.available_dates),e=this.update_extracted_dates(),j=this.results.results[this.selected_date],k=j.length-this.config.setup.offers_limit,a=n(this.u.trim(this.tpl("results",{i18n:this.locale[this.config.language],multiline:this.is_multiline(),dates:e,show_dates:this.config.setup.show_flex_prices&&!!e.length,results:j,count:null!=(i=this.show_all)?i:this.config.setup.offers_limit,left:k,show_more:k>0&&null==this.show_all,link_target:this.config.setup.link_target,is_admin:this.detect_admin(),price_on_button:this.config.setup.price_on_button}))),m=this.elem(".lt_widget_results_wrapper"),h=a.filter(".lt_hotel_widget_prices"),f=a.filter(".lt_hotel_widget_offers"),this.results_shown?(l=300,g=this.selected_date<this.previous_date?20:-20,b=this.results_block().find(".lt_hotel_widget_offers"),f.css({opacity:0,left:-g}),this.prices_block().html(h),b.animate({opacity:0,left:g},l,function(a){return function(){return a.results_block().html(f),f.animate({opacity:1,left:0},l,function(){return a.attach_tooltips(),a.trigger("show_results")})}}(this))):(this.results_shown=!0,this.results_wrapper().show(),this.results_block().html(f),this.prices_block().html(h),this.attach_tooltips(),this.trigger("show_results"))}catch(d){return c=d,console.log(c.stack||c.message||c)}},e.prototype.prepare_results=function(a){var b,c;return c=this.config.setup.operators,b=!!(null!=c?c.length:void 0),a=this.u.reduce(a,function(a){return function(e,f){var g,h;return(b&&(g=f.operator,d.call(c,g)>=0)||!b)&&e.push(a.u.merge(!0,f,{start_date:LTApi.moment(f.start_date,o),page_url:a.create_hotel_url(f.link),pansion:{description_ru:a.u.locale.pansions[a.u.downcase(null!=(h=f.pansion.name)?h:"")]||f.pansion.description}})),e}}(this),[]),this.u.sortBy(a,function(a){return a.start_date.toDate()})},e.prototype.group_by_date=function(a){return a=this.u.reduce(a,function(a){return function(b,c){var d,e;return d=c.start_date.format(o),e=(b[d]||[]).concat(c),b[d]=a.u.sortBy(e,function(a){return a.price}),b}}(this),{})},e.prototype.mark_best_prices=function(a){return this.u.values(a).forEach(function(a){return function(b){var c;return c=a.u.first(b),a.u.merge(c,{best_price:!0})}}(this))},e.prototype.extract_dates=function(a){var b,c;return b=this.u.reduce(a,function(a,b){var c;return c=b.start_date.format(o),null==a[c]&&(a[c]=[]),a[c].push(b.price),a},{}),c=this.u.keys(b).map(function(a){return function(c){return{formatted_date:c,start_date:LTApi.moment(c,o),human_date:LTApi.moment(c,o).locale("ltw_ru_alt_lower").format("на D MMMM"),human_date_short:LTApi.moment(c,o).locale("ltw_ru_alt_lower").format("DD MMM (ddd)"),price:a.u.min(b[c])}}}(this)),this.u.sortBy(c,function(a){return a.start_date.toDate()})},e.prototype.update_extracted_dates=function(){return this.results.dates.map(function(a){return function(b){return a.u.merge(b,{active:b.formatted_date===a.selected_date})}}(this))},e.prototype.get_default_departure_city=function(a){var b,c;return b=null!=(c=this.location_detector)?c.get_saved_code():void 0,a=this.location_code(null!=a?a.city:void 0,(null!=a?a.country:void 0)||"RU"),a||b},e.prototype.detect_admin=function(b,c){return function(){var d,e;return e=c[a[0]],d=/leveltravel\.dev|level\.travel|localhost/,d[a[1]](e)&&!!b[a[2]]&&!!b[a[3]]}}(window,location),e.prototype.select_nearest_date_for=function(a,b){var c;return a=LTApi.moment(a),c=this.u.min(b,function(b){return Math.abs(a.diff(b,"days"))}),c.format(o)},e.prototype.get_kids_params=function(a){var b,c,d,e;return c=this.u.is("number",a.kids)?a.kids:null!=(d=a.kids.count)?d:0,b=this.u.is("array",a.kids_ages)?a.kids_ages:null!=(e=a.kids.ages)?e:[],{count:c,ages:b}},e.prototype.is_multiline=function(){return this.config.setup.price_feed||this.width(u)},e.prototype.elem=function(a){return this.widget.find(a)},e.prototype.results_block=function(){return null!=this._results_block?this._results_block:this._results_block=this.elem(".lt_hotel_widget_results")},e.prototype.prices_block=function(){return null!=this._prices_block?this._prices_block:this._prices_block=this.elem(".lt_hotel_widget_prices_wrapper")},e.prototype.results_wrapper=function(){return null!=this._results_wrapper?this._results_wrapper:this._results_wrapper=this.elem(".lt_widget_results_wrapper")},e.prototype.city_to=function(){var a,b;return(null!=(a=this.hotel.city)?a.name_en:void 0)+"-"+(null!=(b=this.hotel.country)?b.iso2:void 0)},e.prototype.width=function(a){var b,c,d;switch(b=a.replace(/([\d]+)/g,""),c=Number(a.replace(/([^\d]+)/g,"")),d=this.config.setup.width,b){case"=":return d===c;case"<":return c>d;case">":return d>c;case"<=":return c>=d;case">=":return d>=c}},e.prototype.create_hotel_url=function(a){var b,c,d,e;return b=LTApi.URI(this.u.cfg("external_url")),e=a.split("?"),c=e[0],d=e[1],b.pathname(c).query(d).addQuery(this.config.setup.params).toString()},e.prototype.config_preprocess={hotel_id:function(a){return LTApi.Utils.flatten([a])[0]}},e.prototype.set_params=function(a){var b;return null==a&&(a={}),b=this.u.clone(this.config.search_params,!0),a=this.u.clone(null!=a?a:{},!0),a=this.u.merge(!0,{},j.search_params,b,a),this.config.search_params=a,this.fill_form()},e.prototype.get_params=function(){var a,b;return a=this.collect_search_params(),b=this.u.is("string",a.start_date)?a.start_date:moment(a.start_date).format(q),this.u.merge(!0,a,{start_date:b})},e.prototype.get_normalized_params=function(){var a,b;return b=this.collect_search_params(),{from:{city:b.from_city,country:b.from_country},start_date:b.start_date,nights:{from:b.nights,to:b.nights},adults:b.adults,kids:{count:b.kids||0,ages:(null!=(a=b.kids_ages)?a.split(","):void 0)||[]}}},e.prototype.get_page_url=function(a){var b,c;return null==a&&(a=!1),c=this.get_normalized_params(),b=this.url_maker.set_params(c),a?b.format("hotel"):b.format("hotel",this.hotel.public_url)},e.prototype.save_location=function(a){var b,c,d;return b=a.from_city,c=this.url_maker.encode_location(a.from_city,a.from_country),null!=(d=this.location_detector)?d.save_location(c,b):void 0},e.prototype.get_search_query=function(){var a,b;return b=this.collect_search_params(),a=[],a.push(this.city_from()+"-to"),a.push(""+this.city_to()),a.push("departure-"+b.start_date),a.push("for-"+b.nights+"-nights"),a.push(b.adults+"-adults"),b.kids?a.push(b.kids+"("+b.kids_ages+")-kids"):a.push("0-kids"),a.push(this.hotel.stars+"..5-stars"),a.join("-")},e.prototype.get_min_price=function(){return this._current_min_price},e.prototype.deprecate_all=function(){return this.deprecate("debug"),this.deprecate("session"),this.deprecate("on_select_date"),this.deprecate("on_select_nights"),this.deprecate("on_select_adults"),this.deprecate("on_select_kids_count"),this.deprecate("on_select_kids_ages"),this.deprecate("on_change_params"),this.deprecate("on_loaded"),this.deprecate("on_perform"),this.deprecate("on_no_results"),this.deprecate("on_show_results"),this.deprecate("url_target"),this.deprecate("button_text","Key {key} is deprecated. Use `config.locale` instead"),this.deprecate("delimiter_text","Key {key} is deprecated. Use `config.locale` instead"),this.deprecate("document_ready","Key {key} is deprecated. Widget is now loaded on document.ready only"),this.deprecate("async","Key {key} is deprecated. Widget now is always async."),this.deprecate("url_params","Key `{key}` is deprecated. Use `{alt_key}` instead.","params"),this.deprecate("hotel_ids","Key `{key}` is deprecated. Use `{alt_key}` instead.","hotel_id"),this.deprecate("date","Key `{key}` is deprecated. Use `{alt_key}` instead.","start_date"),this.deprecate("to","Key {key} is deprecated. You should remove it from configuration.")},e}(LTApi.Modules.WidgetBase)}.call(this),function(){var a=["href","test","current_user","is_admin"],b=function(a,b){function d(){this.constructor=a}for(var e in b)c.call(b,e)&&(a[e]=b[e]);return d.prototype=b.prototype,a.prototype=new d,a.__super__=b.prototype,a},c={}.hasOwnProperty;LTApi.HotelWidgetMobile=function(c){function d(a){d.__super__.constructor.call(this,i,a,"hotels_widget")}var e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u;return b(d,c),m=null,l=null,r=LTApi.VERSION,s=["price_feed","show_icons"],f=["locale","api_key"],e="lt_search_",n="YYYY-MM-DD",p="DD.MM.YYYY",g="DD.MM.YY",h="DD MMMM YYYY",t="<880",j={adults:[1,2,3,4],kids:[0,1,2,3],nights:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]},o={hotel_ids:"hotel_id"},k={title:"Поиск туров онлайн",destination_from:"Город вылета",destination_to:"Страна, город или отель",departure_date:"Дата вылета",placeholder:"страна, курорт или название отеля",nights_count:"Ночей",adults_count:"взрослых",kids_count:"детей",kids_ages:"возраст детей",submit:"Найти туры!",footer_text:"поиск туров от level.travel",ruble_sign:"<i class='ltw-icon-ruble'></i>",no_results:{message:"Мы не смогли найти подходящих вариантов.<br>Возможно, в отеле нет мест или закончились билеты.",alt_text:"Попробуйте поискать другие варианты.",button_search:{icon:"phone",text:"Подберите мне тур",description:"мы будем искать туры<br>на ту же дату и продолжительность<br>по всему региону"},button_call:{icon:"hotel",text:"Другие варианты",description:"мы позвоним вам и поможем<br>подобрать альтернативные<br>варианты отдыха"}},offer:{operator:"туроператор",room_type:"комната",nights:"ночей",start_date:"дата начала тура",pansion:"питание",open:"Подробнее",instant_confirm:{title:"Мгновенное подтверждение",description:"Туры с мгновенным подтверждением<br>подтверждаются быстрее других"},early_booking:{title:"Раннее бронирование",description:"Этот тур предлагается туроператором<br>на условиях &laquo;раннего бронирования&raquo;.<br>Заказать его сейчас будет выгоднее."}},errors:{from:"Откуда вы летите?",to:"Где вы хотели бы отдохнуть?",nights:"Какова желаемая длительность отдыха?",kids_ages:"Пожалуйста, укажите полный возраст всех детей"}},u={min:600,max:1e3},q={search_url:LTApi.Handlebars.compile("/search/{{f}}-to-{{t}}-departure-{{d}}-for-{{n}}-nights-{{a}}-adults-{{k}}-kids-{{s}}-stars{{{p}}}"),hotel_url:LTApi.Handlebars.compile("{{url}}?start_date={{d}}&nights={{n}}&adults={{a}}&kids={{k}}{{#if ka}}&kids_ages={{ka}}{{/if}}{{{p}}}")},i={language:"ru",setup:{offers_limit:3,show_title:!0,place:"#lt_form",theme:"default",width:800,params:{},css:[],detect_location:!0,show_flex_prices:!0,show_best_price:!0,show_icons:!0,fade_in:!0,autostart:!1,price_feed:!1,colorize_feed:!1,show_hotel_name:!1,price_on_button:!1,link_target:"_blank",results_wrapper:null,no_results:{buttons:!1,content:null}},search_params:{hotel_id:null,from:{},start_date:LTApi.moment().add({days:15}).toDate(),nights:7,adults:2,kids:{count:0,ages:[]},stars:{from:1,to:5}}},d.prototype.locale={ru:k},d.prototype.events_list=["ready:memory,once","loaded","complete","perform","no_results","show_results","search_done","results","min_price_change:memory","select_date","select_nights","select_adults","select_kids_count","select_kids_ages","change","interaction"],d.prototype.init=function(a,b){return m=a,l=LTApi.Utils.i18n_base.bind(this),this.sp=this.u.merge({},this.config.search_params),this.nights=new LTApi.Utils.NightsLoader({client:this.client}),this.url_maker=new LTApi.Utils.URLMaker,this.themes=["default","leveltravel","lookinhotels","mobile"],this.load_locales(k,b.locale),this.load_styles({external:this.config.setup.css,theme:this.theme_name(),themes_path:"/themes/hotel_widget"},this.initialize)},d.prototype.initialize=function(){return this.load_partner().then(function(a){return function(){return a.render_widget(),a.initialize_form()}}(this))},d.prototype.render_widget=function(){var a;if(this.widget=m(this.config.setup.place),this.widget_results=m(this.config.setup.results_wrapper),this.widget.size())return a=(this.config.theme="mobile")?"mobile/index":"index",this.root=m(this.tpl(a,{partner:this.partner,url_params:this.get_url_params(),i18n:this.locale[this.config.language],multiline:this.is_multiline(),is_admin:this.detect_admin(),button_newline:this.width(t),show_feed:this.config.setup.price_feed,show_title:this.config.setup.show_title,show_footer:this.config.setup.show_footer,show_icons:this.config.setup.show_icons,link_target:this.config.setup.link_target,class_list:this.create_class_list(),lists:j,flex_prices:{top:this.is_multiline()&&this.config.setup.show_flex_prices,bottom:!this.is_multiline()&&this.config.setup.show_flex_prices}})),this.root.css({opacity:0}),this.widget.html(this.root),this.resize_widget(),this.root.css({opacity:1}),this.create_error_notifier(this.elem(".lt_hotel_widget_form"));throw new Error("Can't find element "+this.config.setup.place)},d.prototype.resize_widget=function(){var a,b,c,d;return d=this.normalized_width(),this.widget.width(d),this.config.setup.single_line?(c=this.elem(".lt_search_widget_body").width(),a=this.elem(".lt_search_widget_button").outerWidth(),b=c-a,this.elem(".lt_search_widget_form").outerWidth(b)):void 0},d.prototype.initialize_form=function(){return this.toggle_preloader(!0),this.attach_custom_select("select"),this.u.promise.all([this.load_departures(),this.load_hotel()]).then(function(a){return function(b){var c;return c=b[0],a.elem("#w_city_from").html(a.tpl("destinations",c)),a.attach_number_input(".lt_widget_kid_age input"),a.attach_calendar("#w_start_date"),a.attach_location_detection(c),a.fill_form().then(function(){return a.trigger("ready"),a.bind_events(),LTApi.Utils.ScriptExecutor.execute_batch(a.partner.execute_scripts),a.config.setup.autostart?setTimeout(function(){return a.perform_search()},100):void 0})}}(this))},d.prototype.bind_events=function(){var a;return this.elem(".lt_hotel_widget_form_wrapper").on("submit",function(a){return function(b){return b.preventDefault(),a.perform_search()}}(this)),this.elem("input, select").on("focus change input",this.hide_errors.bind(this)),this.elem(".lt_calendar_toggler").on("mousedown",this.suppress_event),a=null!=this.config.setup.results_wrapper?m(this.config.setup.results_wrapper):this.root,a.on("click",".lt_widget_offers_more a",function(a){return function(b){return b.preventDefault(),a.show_all=!0,a.results_shown=!1,a.insert_html()}}(this)),a.on("click",".lt_hotel_widget_price",function(a){return function(b){var c;return b.preventDefault(),a.show_all=null,c=m(b.currentTarget).data("date"),c!==a.selected_date?(a.previous_date=a.selected_date,a.selected_date=m(b.currentTarget).data("date"),a.insert_html()):void 0}}(this)),this.root.on("click",".lt_widget_offer_package_create",function(a){return function(a){var b;return b=m(a.currentTarget),b.is(".lt_button_disabled")?a.preventDefault():setTimeout(function(){return b.attr("disabled",!0).addClass("lt_button_disabled"),setTimeout(function(){return b.removeAttr("disabled").removeClass("lt_button_disabled")},5e3)})}}(this)),this.elem(".lt_calendar_toggler").on("click",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),a.calendar.isVisible()?(a.elem(".lt_calendar_connect").trigger("blur"),a.calendar.hide()):(a.elem(".lt_calendar_connect").trigger("focus"),a.calendar.show())}}(this)),this.elem("select, input").on("input change",function(a){return function(b){return a.trigger("interaction change"),a.toggle_progress(!1)}}(this)),this.select.city_from.el.on("change",function(a){return function(){return a.select_available_date().then(function(){return a.reload_nights()})}}(this)),this.select.nights_count.el.on("change",function(a){return function(b){return b.stopPropagation(),a.trigger("select_nights",a.select.nights_count.get())}}(this)),this.select.adults_count.el.on("change",function(a){return function(b){return b.stopPropagation(),a.trigger("select_adults",a.select.nights_count.get())}}(this)),this.select.kids_count.el.on("change",function(a){return function(b){var c;return b.stopPropagation(),c=m(b.currentTarget).val(),a.toggle_kids_ages(".lt_kids_ages_wrapper",".lt_widget_kid_age",c),a.trigger("select_kids_count"),a.update_calendar_format(),a.select_available_date()}}(this)),this.root.on("change",".lt_widget_kid_age input",function(a){return function(){return a.trigger("select_kids_ages")}}(this)),this.calendar.config({onOpen:function(a){return function(){var b;return null!=a.nights_set?(b={minDate:a.nights_set.min.toDate(),maxDate:a.nights_set.max.toDate(),disabledDates:a.nights_set.disabled},a.calendar.config(b),a.calendar.draw()):void 0}}(this),onSelect:function(a){return function(){return a.update_nights_list(),a.toggle_progress(!1),a.trigger("select_date",a.calendar.getMoment())}}(this)})},d.prototype.toggle_kids_ages=function(a,b,c,d){var e,f,g;return e=this.widget.find(b),f=this.widget.find(a),(g=e.hide().filter(":lt("+c+")")).length?(g.css({display:"inline-block"}),null!=d&&d.length&&d.forEach(function(a,b){return m(g[b]).find("input").val(a)}),f.css({display:"inline-block"})):f.hide()},d.prototype.fill_form=function(){var a,b;return b=this.config.search_params,a=this.get_default_departure_city(b.from),this.select.city_from.set(a),this.load_nights({city:this.city_from(!1),country:this.hotel.country.iso2}).then(function(a){return function(c){var d,e,f,g,h;return g=a.get_kids_params(b),a.toggle_preloader(!1),(f=g.count)>0&&(d=a.valid_kids_ages(a.u.first(g.ages||[],f)),e=a.elem(".lt_widget_kid_age").hide().filter(":lt("+f+")"),h=e.closest(".lt_kids_ages_wrapper"),a.toggle_kids_ages(".lt_kids_ages_wrapper",".lt_widget_kid_age",f,d)),c&&(a.update_calendar_format(),a.select_available_date(),a.update_nights_list(b.nights)),a.select.nights_count.set(b.nights),a.select.adults_count.set(b.adults),a.select.kids_count.set(g.count)}}(this))["catch"](function(a){return function(a){return console.error(a.stack)}}(this))},d.prototype.attach_location_detection=function(a){return this.config.setup.detect_location?this.location_detector=new LTApi.Utils.LocationDetection({api_key:this.api_key,select:this.select.city_from.el,wrapper:this.root,cities:a}):console.log("Automatic location detection disabled")},d.prototype.attach_calendar=function(a){var b,c,d,e;return e=this.config.search_params.start_date,b=this.u.get_valid_date(e,"DD.MM.YYYY",!0),d=LTApi.moment().startOf("day").add({days:1}),c=d.clone().add({months:9}).subtract({days:4}),this.calendar=new LTApi.Utils.Pikaday({field:this.elem(a)[0],firstDay:1,format:h,minDate:d.toDate(),maxDate:c.toDate(),defaultDate:null!=b?b:d,setDefaultDate:!0,i18n:LTApi.Utils.I18N.ltw_ru,customClass:"lt-searchform-picker",centered:!0,readOnly:!0,theme:null,momentLang:"ltw_ru_alt_lower"})},d.prototype.attach_custom_select=function(a){return this.select=this.u.reduce(this.elem(a).toArray(),function(a,b){return a[b.name]=new LTApi.Utils.SelectBox(b,{class_name:"lt_widget_select"}),a},{})},d.prototype.attach_number_input=function(a){var b;return b=this.elem(a),new LTApi.Utils.NumberInput(b,{min:0,max:16,step:1})},d.prototype.attach_tooltips=function(){return this.elem("[data-ltwtip]").filter(":not(:invisible)").toArray().forEach(function(a){return function(b){var c,d;return b=m(b),null==(c=b.data("sttc"))&&(d=b.data("ltwtip"),c=new LTApi.Utils.SimpleTooltip(b,d,{x:b.data("ltwtipX")||"center",y:b.data("ltwtipY")||"bottom",custom_class:"lt_widget_tooltip lt_"+a.theme_name()+"_tooltip"})),b.on("mouseenter mouseleave",function(a){if(!m(a.currentTarget).is(":invisible"))switch(a.type){case"mouseenter":return null!=c?c.show():void 0;case"mouseleave":return null!=c?c.hide():void 0}})}}(this))},d.prototype.select_available_date=function(){return new Promise(function(a){return function(b){var c,d;return c=a.calendar.getMoment(),d=a.nights_set.nearest_date_to(c),d&&a.calendar.setDate(d.toDate()),b()}}(this))},d.prototype.hide_errors=function(){return this.elem("input, .lt_selectbox").filter(".error").removeClass("error"),this.elem(".lt_widget_error").css({display:"none",width:"auto"})},d.prototype.update_calendar_format=function(){var a;return a=this.elem(".lt_start_date").width(),155>a?this.calendar.config({format:g}):this.calendar.config({format:h}),this.calendar.setDate(this.calendar.getDate())},d.prototype.update_nights_list=function(a){var b,c,d,e,f;return b=this.calendar.getMoment(),c=this.nights_cleanup(this.nights_set.find(b),null!=(d=this.config)&&null!=(e=d.search_params)?e.nights:void 0),null==a&&(a=this.select.nights_count.get()),f=this.nights_set.nearest_nights_to(a,c),this.select.nights_count.el.html(this.tpl("nights_list",c)),this.select.nights_count.set(f),String(f)!==String(a)?console.info("Nights count changed. We can handle it in some way"):void 0},d.prototype.update_title=function(){var a;if(this.config.setup.show_title&&this.config.setup.show_hotel_name)return a=this.u.trim(this.hotel.name.replace(/([\d]+)*/gi,"")),a=this.hotel.name+" "+this.hotel.stars+"*",this.elem(".lt_hotel_widget_title").text("Поиск туров в отель "+a)},d.prototype.normalized_width=function(){var a;return a=this.config.setup.width,a=this.u.max([u.min,a]),a=this.u.min([u.max,a])},d.prototype.create_class_list=function(){var a,b;return b=this.view_options(this.config.setup),a=[],this.is_multiline()&&a.push("multiline"),a=a.concat(b).join(" "+e),""+e+a},d.prototype.view_options=function(a){return a=Object.select(a,s),this.u.reduce(Object.keys(a),function(b){return function(b,c){return a[c]===!0&&b.push(c),b}}(this),[])},d.prototype.toggle_preloader=function(a){var b,c;if(null==a&&(a=!1),c=this.elem(".lt_widget_preloader"),b=100,this.config.setup.fade_in)switch(a){case!0:return c.fadeIn(b);case!1:return c.fadeOut(b)}else switch(a){case!0:return c.show();case!1:return c.hide()}},d.prototype.toggle_progress=function(a){var b,c,d;switch(b=this.elem_result(".lt_hotel_widget_submit_progress"),c=this.elem_result(".lt_hotel_widget_submit"),d=this.elem_result(".lt_hotel_widget_submit_progress_bar"),a){case!0:return m(".hotel_page_sub_button-find").hide(),b.fadeIn(),d.width(0),c.prop({disabled:!0}).addClass("lt_hotel_widget_submit_working").removeClass("lt_hotel_widget_submit_normal");case!1:return b.fadeOut(),c.prop({disabled:!1}).addClass("lt_hotel_widget_submit_normal").removeClass("lt_hotel_widget_submit_working")}},d.prototype.perform_search=function(a){var b;return null!=a&&a.preventDefault(),b=this.collect_search_params(),this.validate_search_params(b).then(function(a){return function(){return a.cancel_request().then(function(){return a._old_min_price=null,a._current_min_price=null,a.selected_date=a.calendar.getMoment().format(n),a.search_request=new LTApi.Utils.SearchRequest({search_params:b,client:a.client,mode:"hotel",auto:!1}),a.handle_request(),a.save_location(b)})}}(this))},d.prototype.validate_search_params=function(a){return new Promise(function(b){return function(c){var d,e;return d=null,a.from&&!a.from.country&&null==d&&(d={msg:"errors.from",el:".location_departure"}),a.kids!==(null!=(e=a.kids_ages)?e.split(",").length:void 0)&&null==d&&(d={msg:"errors.kids_ages",el:".lt_kids_ages"}),null==d?c():b.show_error(d)}}(this))},d.prototype.show_error=function(a){var b;return b=l(a.msg),this.error_notifier.show(b,a.el)},d.prototype.cancel_request=function(){var a;return null!=(a=this.search_request)&&a.cancel(),this.remove_results()},d.prototype.get_hotel_offers=function(){return this.hotel_offers},d.prototype.handle_request=function(){var a;return a=this.elem_result(".lt_hotel_widget_submit_progress_bar"),this.search_request.on("perform",function(a){return function(){return a.trigger("perform"),a.results_shown=!1,a.toggle_progress(!0)}}(this)),this.search_request.on("results",function(a){return function(b){return null!=b.results?(a.hotel_offers=b.response,a.render_results(b.response)):(a.hotel_offers=b.hotel_offers,a.render_results(b.hotel_offers)),a.trigger("results")}}(this)),this.search_request.on("no_results",function(a){return function(b){return a.trigger("no_results"),a.render_no_results()}}(this)),this.search_request.on("progress",function(b){return function(b){return a.stop().animate({width:b.progress+"%"},200)}}(this)),this.search_request.on("complete",function(a){return function(){return a.trigger("search_done")}}(this)),this.search_request.on("stop",function(a){return function(){return a.trigger("loaded"),a.toggle_progress(!1)}}(this)),this.search_request.perform_search()},d.prototype.kids_ages=function(a){var b;return b=this.elem(".lt_widget_kid_age input").toArray().map(function(a){return a.value}),this.u.compact(this.u.first(b,a),!0)},d.prototype.collect_search_params=function(){var a,b,c,d,e;return a=this.select.city_from.get().split("-"),c=Number(this.select.kids_count.get()),b=this.kids_ages(c),e={hotel_ids:this.hotel.id,from_country:a[1],from_city:a[0],to_country:this.hotel.country.iso2,start_date:this.calendar.getMoment().format(p),nights:Number(null!=(d=this.select.nights_count.get())?d:this.config.search_params.nights),adults:Number(this.select.adults_count.get()),kids:c,kids_ages:b.join(","),flex_dates:!0},this.u.compactObject(e,!0)},d.prototype.render_results=function(a){var b,c,d;return d=this.prepare_results(a),c=this.extract_dates(d),d=this.group_by_date(d),b=c.map(function(a){return a.start_date}),this.results_shown=!1,this.config.setup.show_best_price&&this.mark_best_prices(d),this.results={dates:c,results:d,available_dates:b},this.calculate_min_price(a),this.insert_html()},d.prototype.remove_results=function(){return null==this.removing&&(this.removing=new this.promise(function(a){return function(b){var c;return c=a.results_wrapper(),c.is(":visible")?c.animate({opacity:"hide",height:"hide"},{complete:function(){return b()}}):b()}}(this)).then(function(a){return function(){return a.removing=null}}(this))),this.removing},d.prototype.calculate_min_price=function(a){var b;return this._old_min_price=this._current_min_price,b=a.map(function(a){return a.price}),this._current_min_price=this.u.min(b),this._current_min_price!==this._old_min_price?this.trigger("min_price_change",this._current_min_price):void 0},d.prototype.render_no_results=function(){var a;return a=this.tpl("no_results",{i18n:this.locale[this.config.language],config:this.config.setup.no_results}),this.prices_block().empty(),this.results_block().empty().html(a),this.results_wrapper().show()},d.prototype.insert_html=function(){
var a,b,c,d,e,f,g,h,i,j,k,l,n;try{return this.selected_date=this.select_nearest_date_for(this.selected_date,this.results.available_dates),e=this.update_extracted_dates(),j=this.results.results[this.selected_date],k=j.length-this.config.setup.offers_limit,a=m(this.u.trim(this.tpl("mobile/results",{i18n:this.locale[this.config.language],multiline:this.is_multiline(),dates:e,show_dates:this.config.setup.show_flex_prices&&!!e.length,results:j,count:null!=(i=this.show_all)?i:this.config.setup.offers_limit,left:k,show_more:k>0&&null==this.show_all,link_target:this.config.setup.link_target,is_admin:this.detect_admin(),price_on_button:this.config.setup.price_on_button}))),n=this.elem_result(".lt_widget_results_wrapper"),h=a.filter(".lt_hotel_widget_prices"),f=a.filter(".lt_hotel_widget_offers"),this.results_shown?(l=300,g=this.selected_date<this.previous_date?20:-20,b=this.results_block().find(".lt_hotel_widget_offers"),f.css({opacity:0,left:-g}),this.prices_block().html(h),b.animate({opacity:0,left:g},l,function(a){return function(){return a.results_block().html(f),f.animate({opacity:1,left:0},l,function(){return a.attach_tooltips(),a.trigger("show_results")})}}(this))):(this.results_shown=!0,this.results_wrapper().show(),this.results_block().html(f),this.prices_block().html(h),this.attach_tooltips(),this.trigger("show_results"))}catch(d){return c=d,console.log(c.stack||c.message||c)}},d.prototype.prepare_results=function(a){return console.log("Preparing",a),a=this.u.map(a,function(a){return function(b){var c;return a.u.merge(!0,b,{start_date:LTApi.moment(b.start_date,n),page_url:a.create_hotel_url(b.link),pansion:{description_ru:a.u.locale.pansions[a.u.downcase(null!=(c=b.pansion.name)?c:"")]||b.pansion.description}})}}(this)),this.u.sortBy(a,function(a){return a.start_date.toDate()})},d.prototype.group_by_date=function(a){return a=this.u.reduce(a,function(a){return function(b,c){var d,e;return d=c.start_date.format(n),e=(b[d]||[]).concat(c),b[d]=a.u.sortBy(e,function(a){return a.price}),b}}(this),{})},d.prototype.mark_best_prices=function(a){return this.u.values(a).forEach(function(a){return function(b){var c;return c=a.u.first(b),a.u.merge(c,{best_price:!0})}}(this))},d.prototype.extract_dates=function(a){var b,c;return b=this.u.reduce(a,function(a,b){var c;return c=b.start_date.format(n),null==a[c]&&(a[c]=[]),a[c].push(b.price),a},{}),c=this.u.keys(b).map(function(a){return function(c){return{formatted_date:c,start_date:LTApi.moment(c,n),human_date:LTApi.moment(c,n).locale("ltw_ru_alt_lower").format("на D MMMM"),human_date_short:LTApi.moment(c,n).locale("ltw_ru_alt_lower").format("DD MMM (ddd)"),price:a.u.min(b[c])}}}(this)),this.u.sortBy(c,function(a){return a.start_date.toDate()})},d.prototype.update_extracted_dates=function(){return this.results.dates.map(function(a){return function(b){return a.u.merge(b,{active:b.formatted_date===a.selected_date})}}(this))},d.prototype.get_default_departure_city=function(a){var b,c;return b=null!=(c=this.location_detector)?c.get_saved_code():void 0,a=this.location_code(null!=a?a.city:void 0,(null!=a?a.country:void 0)||"RU"),a||b},d.prototype.detect_admin=function(b,c){return function(){var d,e;return e=c[a[0]],d=/leveltravel\.dev|level\.travel|localhost/,d[a[1]](e)&&!!b[a[2]]&&!!b[a[3]]}}(window,location),d.prototype.select_nearest_date_for=function(a,b){var c;return a=LTApi.moment(a),c=this.u.min(b,function(b){return Math.abs(a.diff(b,"days"))}),c.format(n)},d.prototype.get_kids_params=function(a){var b,c,d,e;return c=this.u.is("number",a.kids)?a.kids:null!=(d=a.kids.count)?d:0,b=this.u.is("array",a.kids_ages)?a.kids_ages:null!=(e=a.kids.ages)?e:[],{count:c,ages:b}},d.prototype.is_multiline=function(){return this.config.setup.price_feed||this.width(t)},d.prototype.elem=function(a){return this.widget.find(a)},d.prototype.elem_result=function(a){return this.widget_results?this.widget_results.find(a):this.elem(a)},d.prototype.results_block=function(){return null!=this._results_block?this._results_block:this._results_block=this.elem_result(".lt_hotel_widget_results")},d.prototype.prices_block=function(){return null!=this._prices_block?this._prices_block:this._prices_block=this.elem_result(".lt_hotel_widget_prices_wrapper")},d.prototype.results_wrapper=function(){return null!=this._results_wrapper?this._results_wrapper:this._results_wrapper=this.elem_result(".lt_widget_results_wrapper")},d.prototype.city_to=function(){var a,b;return(null!=(a=this.hotel.city)?a.name_en:void 0)+"-"+(null!=(b=this.hotel.country)?b.iso2:void 0)},d.prototype.width=function(a){var b,c,d;switch(b=a.replace(/([\d]+)/g,""),c=Number(a.replace(/([^\d]+)/g,"")),d=this.config.setup.width,b){case"=":return d===c;case"<":return c>d;case">":return d>c;case"<=":return c>=d;case">=":return d>=c}},d.prototype.create_hotel_url=function(a){var b,c,d,e;return b=LTApi.URI(this.u.cfg("external_url")),e=a.split("?"),c=e[0],d=e[1],b.pathname(c).query(d).addQuery(this.config.setup.params).toString()},d.prototype.config_preprocess={hotel_id:function(a){return LTApi.Utils.flatten([a])[0]}},d.prototype.set_params=function(a){var b;return null==a&&(a={}),b=this.u.clone(this.config.search_params,!0),a=this.u.clone(null!=a?a:{},!0),a=this.u.merge(!0,{},i.search_params,b,a),this.config.search_params=a,this.fill_form()},d.prototype.get_params=function(){var a,b;return a=this.collect_search_params(),b=this.u.is("string",a.start_date)?a.start_date:moment(a.start_date).format(p),this.u.merge(!0,a,{start_date:b})},d.prototype.get_normalized_params=function(){var a,b;return b=this.collect_search_params(),{from:{city:b.from_city,country:b.from_country},start_date:b.start_date,nights:{from:b.nights,to:b.nights},adults:b.adults,kids:{count:b.kids||0,ages:(null!=(a=b.kids_ages)?a.split(","):void 0)||[]}}},d.prototype.get_page_url=function(a){var b,c;return null==a&&(a=!1),c=this.get_normalized_params(),b=this.url_maker.set_params(c),a?b.format("hotel"):b.format("hotel",this.hotel.public_url)},d.prototype.save_location=function(a){var b,c,d;return b=a.from_city,c=this.url_maker.encode_location(a.from_city,a.from_country),null!=(d=this.location_detector)?d.save_location(c,b):void 0},d.prototype.get_search_query=function(){var a,b;return b=this.collect_search_params(),a=[],a.push(this.city_from()+"-to"),a.push(""+this.city_to()),a.push("departure-"+b.start_date),a.push("for-"+b.nights+"-nights"),a.push(b.adults+"-adults"),b.kids?a.push(b.kids+"("+b.kids_ages+")-kids"):a.push("0-kids"),a.push(this.hotel.stars+"..5-stars"),a.join("-")},d.prototype.get_min_price=function(){return this._current_min_price},d.prototype.deprecate_all=function(){return this.deprecate("debug"),this.deprecate("session"),this.deprecate("on_select_date"),this.deprecate("on_select_nights"),this.deprecate("on_select_adults"),this.deprecate("on_select_kids_count"),this.deprecate("on_select_kids_ages"),this.deprecate("on_change_params"),this.deprecate("on_loaded"),this.deprecate("on_perform"),this.deprecate("on_no_results"),this.deprecate("on_show_results"),this.deprecate("url_target"),this.deprecate("button_text","Key {key} is deprecated. Use `config.locale` instead"),this.deprecate("delimiter_text","Key {key} is deprecated. Use `config.locale` instead"),this.deprecate("document_ready","Key {key} is deprecated. Widget is now loaded on document.ready only"),this.deprecate("async","Key {key} is deprecated. Widget now is always async."),this.deprecate("url_params","Key `{key}` is deprecated. Use `{alt_key}` instead.","params"),this.deprecate("hotel_ids","Key `{key}` is deprecated. Use `{alt_key}` instead.","hotel_id"),this.deprecate("date","Key `{key}` is deprecated. Use `{alt_key}` instead.","start_date"),this.deprecate("to","Key {key} is deprecated. You should remove it from configuration.")},d}(LTApi.Modules.WidgetBase)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.PriceStat=function(b){function c(a){c.__super__.constructor.call(this,d,a,"price_stat")}var d,e,f,g;return a(c,b),g=null,f=null,e={},d={place:null,setup:{height:"140px",width:"100%",col_color:"#7ED321",target:"",css:[]},days_count:31,search_query:null,search_params:null,full_month:!1},c.prototype.locale={ru:e},c.prototype.init=function(a,b){var c;return g=a,this.themes=["default"],this.sp=new LTApi.Utils.SearchParams(null!=(c=this.config.search_query)?c:this.config.search_params),this.load_locales(e,b.locale),this.load_styles({external:this.config.setup.css,theme:this.theme_name(),themes_path:"/themes/price_stat"},this.initialize)},c.prototype.initialize=function(){return this.load_partner().then(function(a){return function(){return a.render_base(),a.render_statistics(a.load_statistics()),a.bind_events()}}(this))},c.prototype.render_base=function(){var a;return this.root=g(this.config.place),this.wrapper=g(this.tpl("index",{config:this.config})),this.elements={root:this.wrapper,title:{title_1:this.wrapper.find(".lt_title .lt_title_1"),title_2:this.wrapper.find(".lt_title .lt_title_2")},preloader:this.wrapper.find(".lt_preloader"),body:this.wrapper.find(".lt_statistic_body"),link:this.wrapper.find(".lt_link_external"),top_line:this.wrapper.find(".lt_lines .lt_top_line span"),bottom_line:this.wrapper.find(".lt_lines .lt_bottom_line span"),columns:this.wrapper.find(".lt_columns_row"),slider:{root:this.wrapper.find(".lt_statistic_slider"),content:this.wrapper.find(".lt_statistic_slider .lt_slider_content"),angle:this.wrapper.find(".lt_statistic_slider .lt_slider_angle")},month:{prev:this.wrapper.find("li.lt_month .lt_prev_month"),next:this.wrapper.find("li.lt_month .lt_next_month"),title:this.wrapper.find("li.lt_month .lt_current_month")},scroll:{root:this.wrapper.find(".lt_stat_table_scroll"),left:this.wrapper.find(".lt_stat_table_scroll_left"),right:this.wrapper.find(".lt_stat_table_scroll_right")}},this.elements.root.width(this.config.setup.width),this.elements.body.height(this.config.setup.height),this.elements.link.width(100/this.config.days_count+"%"),(a=this.config.setup.target)&&this.elements.link.prop({target:a}),this.wrapper.appendTo(this.root)},c.prototype.render_statistics=function(a){return a.then(function(a){return function(b){var c,d,e;return a.sp=new LTApi.Utils.SearchParams(b.search_params),e=LTApi.moment(a.sp.get("start_date")).format("YYYY-MM-DD"),d=a.config.full_month,c=b.statistic.map(function(b){var c,f,g;return f=LTApi.moment(b.date,"YYYY-MM-DD"),c=[],(6===(g=f.isoWeekday())||7===g)&&c.push("weekend"),b.price<=0&&c.push("disabled"),b.date!==e||d||c.push("target"),a.u.merge({},b,{class_list:c.join(" "),day_number:f.format("DD"),day_name:f.format("ddd"),link:{url:LTApi.URI(a.u.cfg("external_url")).pathname(b.link),target:a.config.setup.target},dataset:a.u.data_attrs({height:b.percent,date:b.date,price:b.price})})}),a.render_month(),a.render_title(b),a.show_cols(c),a.show_lines(b),a.update_metrics(),a.update_scroll(0)}}(this))},c.prototype.render_title=function(){var a,b,c,d,e;return c=this.sp.search_params.nights,a=c.from,e=c.to,b=a===e?""+a:a+"-"+e,d=b+" "+this.u.pluralize(e,"ночь","ночи","ночей"),d+=" / человека",this.elements.title.title_2.html(this.u.nbsp(d))},c.prototype.render_month=function(){var a;if(this.config.full_month)return a=LTApi.moment(this.sp.search_params.start_date).startOf("day").startOf("month"),this.elements.month.title.text(a.format("MMMM YYYY")),this.elements.month.prev.data({month:a.clone().subtract(1,"month").format("YYYY-MM-DD")}),this.elements.month.next.data({month:a.clone().add(1,"month").format("YYYY-MM-DD")})},c.prototype.show_lines=function(a){return this.elements.top_line.html(this.u.to_currency(a.max_price)+' <i class="ltw-icon-ruble"></i>'),this.elements.bottom_line.html(this.u.to_currency(a.average_price)+' <i class="ltw-icon-ruble"></i>')},c.prototype.show_cols=function(a){var b,c,d;return b=this.tpl("cols",{cols:a}),d=300,c=50,this.elements.columns.html(b),this.elements.columns.find("td:not(.lt_disabled) .col").css({background:this.config.setup.col_color}),setTimeout(function(a){return function(){return a.elements.preloader.fadeOut(100),a.wrapper.addClass("lt_stat_loaded"),a.wrapper.find(".lt_col").each(function(a,b){return setTimeout(function(){var a;return b=g(b),a=b.find(".lt_column"),b.is(".lt_disabled")?a.css({opacity:1}):a.height(b.data("height")+"%")},d+=c)})}}(this),d)},c.prototype.hide_cols=function(){var a,b;return b=0,a=20,this.elements.preloader.fadeIn(100),this.wrapper.find("tr.lt_columns td").each(function(c,d){return setTimeout(function(){var a;return d=g(d),a=d.find(".lt_col"),d.is(".lt_disabled")?a.css({opacity:0}):a.height(0)},b+=d.is(".lt_disabled")?0:a)})},c.prototype.bind_events=function(){return this.wrapper.on("mouseenter",".lt_col",function(a){return function(b){var c,d,e;return d=g(b.currentTarget),c=d.data(),e=d.position().left,d.is(".lt_disabled")?a.render_slider(!1):a.render_slider(c.price)}}(this)),this.wrapper.on("mouseleave",".lt_cols",function(a){return function(){return a.render_slider(!1)}}(this)),this.wrapper.on("mousemove",".lt_cols",function(a){return function(b){var c,d,e,f,h,i,j;return e=g(b.currentTarget),f=a.elements.slider.content.outerWidth(),i=e.width(),c=b.pageX-e.offset().left,j=a.u.normalize_number(c,0,i),d=j-f/2,h=a.u.normalize_number(d,0,i-f),a.elements.slider.content.css({left:h})}}(this)),this.elements.scroll.root.on("scroll",function(a){return function(b){return a.update_scroll(a.elements.scroll.root.scrollLeft())}}(this)),this.wrapper.on("click",".lt_stat_scroll",function(a){return function(b){var c,d;return c=g(b.currentTarget),d=a.elements.scroll.root.scrollLeft(),c.is(a.elements.scroll.left)?d-=a.elements.scroll.root.width():c.is(a.elements.scroll.right)&&(d+=a.elements.scroll.root.width()),a.elements.scroll.root.animate({scrollLeft:d,easing:"easeOutExpo"},400)}}(this)),this.config.full_month?this.wrapper.on("click",".lt_month span:not(.lt_current_month)",function(a){return function(b){var c;return b.preventDefault(),a.sp.set("start_date",LTApi.moment(g(b.currentTarget).data("month"))),c=a.perform_stats_loader({full_month:!0,search_query:a.sp.build_query()}),a.hide_cols(),a.render_statistics(c)}}(this)):void 0},c.prototype.update_scroll=function(a){var b,c,d;if(!(this.metrics.scroll.root>=this.metrics.scroll.table))return d=this.metrics.scroll,c=d.table-d.root,b=0,0===a&&this.elements.scroll.root.scrollLeft(0),b>=a?this.elements.scroll.left.hide().removeClass("visible"):this.elements.scroll.left.show().addClass("visible"),a>=c?this.elements.scroll.right.hide().removeClass("visible"):this.elements.scroll.right.show().addClass("visible")},c.prototype.update_metrics=function(){return this.metrics={scroll:{root:this.elements.scroll.root.width(),table:this.elements.scroll.root.find("table").width(),left:this.elements.scroll.left.width(),right:this.elements.scroll.right.width()}}},c.prototype.render_slider=function(a){return a===!1?this.elements.slider.root.removeClass("lt_visible"):(this.elements.slider.root.addClass("lt_visible"),this.elements.slider.content.html("от "+this.u.to_currency(a)+"<i class='ltw-icon-ruble'></i> на человека"))},c.prototype.load_statistics=function(){var a,b;if(b={count:this.config.days_count},this.config.full_month&&(b.full_month=this.config.full_month),a=this.config.search_query)this.u.merge(b,{search_query:a});else{if(!(a=this.config.search_params))throw"You should pass search query or search params to see statistics";this.u.merge(b,a)}return this.perform_stats_loader(b)},c.prototype.perform_stats_loader=function(a){return this.client.call("statistics.prices",a)},c}(LTApi.Modules.WidgetBase)}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.SearchWidget=function(b){function c(a){c.__super__.constructor.call(this,h,a,"search_widget")}var d,e,f,g,h,i,j,k,l,m,n,o,p,q;return a(c,b),l=null,k=null,o=LTApi.VERSION,p=["single_line","price_feed","show_icons"],e=["locale","api_key"],d="lt_search_",f="DD.MM.YY",g="DD.MM.YYYY",m=location.protocol,i={adults:[1,2,3,4],kids:[0,1,2,3],nights:[1,2,3,4,5,6,7,8,9,10,11,12,13,14,15]},j={title:"Поиск туров онлайн",destination_from:"Город вылета",destination_to:"Страна, город или отель",departure_date:"Дата вылета",placeholder:"страна, курорт или название отеля",nights_count:"Ночей",adults_count:"Взрослых",kids_count:"Детей",kids_ages:"возраст детей",submit:"Найти туры!",footer_text:"поиск туров от level.travel",errors:{from:"Откуда вы летите?",to:"Где вы хотели бы отдохнуть?",nights:"Какова желаемая длительность отдыха?",kids_ages:"Пожалуйста, укажите полный возраст всех детей"}},q={vertical:{min:240,max:500},horizontal:{min:750,max:1400}},n={search_url:LTApi.Handlebars.compile("/search/{{f}}-to-{{t}}-departure-{{d}}-for-{{n}}-nights-{{a}}-adults-{{k}}-kids-{{s}}-stars{{{p}}}"),hotel_url:LTApi.Handlebars.compile("{{url}}?from={{f}}start_date={{d}}&nights={{n}}&adults={{a}}&kids={{k}}{{#if ka}}&kids_ages={{ka}}{{/if}}{{{p}}}")},h={language:"ru",setup:{show_title:!0,place:"#lt_form",theme:"default",width:256,params:{},css:[],calendar_lang:null,show_footer:!0,show_icons:!0,detect_location:!0,price_feed:!1,single_line:!1,collapse_location:!1,type:"vertical"},search_params:{to:{city:null,country:null},date:LTApi.moment().add({days:15}).toDate(),nights:7,adults:2,kids:{count:0,ages:[]},stars:{from:1,to:5}},locale:{}},c.prototype.__widget_name="search_widget",c.prototype.events_list=["ready:once:memory"],c.prototype.locale={ru:j},c.prototype.init=function(a,b){return l=a,k=LTApi.Utils.i18n_base.bind(this),this.themes=["default","lebedev","light"],this.nights=new LTApi.Utils.NightsLoader({client:this.client}),this.load_locales(j,b.locale),this.load_styles({external:this.config.setup.css,theme:this.theme_name(),themes_path:"/themes/search_widget"},this.initialize)},c.prototype.initialize=function(){return this.normalize_type(),this.render_widget(),this.initialize_form()},c.prototype.normalize_type=function(){var a;return a=this.config.setup.type,"vertical"!==a&&"horizontal"!==a&&(a="vertical"),this.config.setup.type=a},c.prototype.render_widget=function(){return this.load_partner().then(function(a){return function(){var b;if(a.widget=l(a.config.setup.place),a.widget.size())return b=a.config.setup,a.root=l(a.tpl("index",{i18n:a.locale[a.config.language],collapse_location:a.is_vertical()&&b.collapse_location,show_title:b.show_title,show_footer:b.show_footer,show_icons:b.show_icons,class_list:a.create_class_list(),lists:i,partner:a.partner,url_params:a.get_url_params()})),a.root.css({opacity:0}),a.widget.html(a.root),a.resize_widget(),a.create_error_notifier(a.elem(".lt_search_widget_body"));throw new Error("Can't find element "+a.config.setup.place)}}(this))},c.prototype.resize_widget=function(){var a;return a=this.normalized_width(),this.offcanvas(function(b){return function(){return b.widget.width(a),b.root.width(a)}}(this))},c.prototype.offcanvas=function(a){return null==this.el_placeholder&&(this.el_placeholder=l("<div>",{"class":"lt_widget_placeholder"})),null==this.el_offcanvas&&(this.el_offcanvas=l("<div>",{"class":"lt_widget_offcsnvas",css:{position:"absolute",top:-99999,left:-9999}})),l("body").append(this.el_offcanvas),this.root.after(this.el_placeholder),this.el_offcanvas.append(this.root),"function"==typeof a&&a(),this.el_placeholder.after(this.root),this.el_placeholder.detach(),this.el_offcanvas.detach()},c.prototype.normalized_width=function(){var a,b;return a=q[this.config.setup.type],b=this.config.setup.width,b=this.u.max([a.min,b]),b=this.u.min([a.max,b])},c.prototype.initialize_form=function(){return this.u.promise.all([this.load_departures(),this.load_partner()]).then(function(a){return function(b){var c;return c=b[0],a.widget.find(".location_departure select").html(a.tpl("destinations",c)),a.attach_custom_select("select"),a.attach_number_input(".kid_age input"),a.attach_autocomplete(".location_arrival input"),a.attach_calendar(".departure_date input"),a.fill_form().then(function(){return LTApi.Utils.ScriptExecutor.execute_batch(a.partner.execute_scripts)}),a.bind_events(),a.attach_location_detection(c),a.root.delay(1e3).animate({opacity:1},200,function(){return a.trigger("ready")})}}(this))},c.prototype.attach_location_detection=function(a){return this.config.setup.detect_location?this.location_detector=new LTApi.Utils.LocationDetection({api_key:this.api_key,select:this.select.from.el,wrapper:this.root,cities:a}):console.log("Automatic location detection disabled")},c.prototype.attach_autocomplete=function(a){var b,c;return b=this.widget.find(a),c="vertical"===this.config.setup.type?7:10,this.destination=new LTApi.Utils.LocationAutocomplete(b,{min_query_length:0,client:this.client,visible_items_count:c,city_from:this.city_from(!1)})},c.prototype.attach_calendar=function(a){var b,c,d,e,g;return b=this.u.parse_date(this.config.search_params.date||new Date,!0),c=this.config.setup.calendar_lang||"ltw_ru",e=LTApi.moment().startOf("day").add({days:1}),d=e.clone().add({months:9}).subtract({days:4}),this.calendar=new LTApi.Utils.Pikaday({field:this.widget.find(a)[0],firstDay:1,format:null!=(g=this.config.setup.date_format)?g:f,minDate:e.toDate(),maxDate:d.toDate(),defaultDate:null!=b?b:e,setDefaultDate:!0,i18n:LTApi.Utils.I18N[c],customClass:"lt-searchform-picker",centered:!0,flexDates:!0,readOnly:!0,momentLang:c,container:"vertical"===this.config.setup.type?this.root.get(0):void 0}),"vertical"===this.config.setup.type?this.calendar.config({reposition:!1}):void 0},c.prototype.attach_custom_select=function(a){return this.select=this.widget.find(a).toArray().reduce(function(a,b){return a[b.id]=new LTApi.Utils.SelectBox(b,{class_name:"lt_widget_select"}),a},{})},c.prototype.attach_number_input=function(a){var b;return b=this.widget.find(a),new LTApi.Utils.NumberInput(b,{min:0,max:16,step:1})},c.prototype.fill_form=function(){var a,b;return b=this.config.search_params,a=this.get_default_departure_city(b.from),this.select.from.set(a),this.destination.set(b.to),this.reload_nights({city:a.city,country:b.to.country}).then(function(a){return function(c){var d,e,f,g,h;return g=a.get_kids_params(b),a.toggle_preloader(!1),a.select.nights.set(b.nights),a.select.adults.set(b.adults),a.select.kids.set(g.count),(f=g.count)>0&&(d=a.valid_kids_ages(a.u.first(g.ages||[],f)),e=a.elem(".kid_age").hide().filter(":lt("+f+")"),h=e.closest(".kids_ages"),a.toggle_kids_ages(".ages",".kid_age",f,d)),c?(a.select_available_date(),a.update_nights_list()):void 0}}(this))},c.prototype.get_kids_params=function(a){var b,c,d,e;return c=this.u.is("number",a.kids)?a.kids:null!=(d=a.kids.count)?d:0,b=this.u.is("array",a.kids_ages)?a.kids_ages:null!=(e=a.kids.ages)?e:0,{count:c,ages:b}},c.prototype.bind_events=function(){return this.elem("input, select").on("mousedown",this.hide_errors.bind(this)),this.elem(".lt_calendar_toggler").on("mousedown",this.suppress_event),this.elem(".lt_calendar_toggler").on("click",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),a.calendar.isVisible()?(a.elem(".lt_calendar_connect").trigger("blur"),a.calendar.hide()):(a.elem(".lt_calendar_connect").trigger("focus"),a.calendar.show())}}(this)),this.select.from.el.on("change",function(a){return function(){return a.select_available_date().then(function(){return a.reload_nights()})}}(this)),this.destination.on("select",function(a){return function(b){switch(b.type){case"hotel":a.calendar.config({flexDates:!1});break;case"country":case"city":a.calendar.config({flexDates:!0})}return null!=b.type?a.reload_nights():void 0}}(this)),this.select.from.el.on("change",function(a){return function(){return a.reload_nights(),a.destination.city_from=a.city_from(!1)}}(this)),this.select.kids.el.on("change",function(a){return function(b){var c;return c=l(b.currentTarget).val(),a.toggle_kids_ages(".ages",".kid_age",c),a.is_horizontal()?a.resize_input():void 0}}(this)),this.calendar.config({onOpen:function(a){return function(){var b;return null!=a.nights_set?(b={minDate:a.nights_set.min.toDate(),maxDate:a.nights_set.max.toDate(),disabledDates:a.nights_set.disabled},a.calendar.config(b),a.calendar.draw()):void 0}}(this),onSelect:function(a){return function(){return null==a.nights_list||a.u.isEmpty(a.nights_list)?void 0:a.update_nights_list()}}(this)}),this.widget.on("mousedown",".lt_search_widget_submit",this.create_search_url.bind(this)),this.widget.on("click",".lt_search_widget_submit",this.process_link.bind(this))},c.prototype.resize_input=function(){var a;return a=[".location_departure",".duration_time",".tourists_count"].join(","),this.offcanvas(function(b){return function(){var c,d;return d=b.elem(".lt_search_widget_form_wrapper").width(),c=b.elem(a).toArray().reduce(function(a,b){return a+l(b).outerWidth()},0),b.elem(".location_arrival").outerWidth(d-c)}}(this))},c.prototype.select_available_date=function(){return new Promise(function(a){return function(b){var c,d;return c=a.calendar.getMoment(),d=a.nights_set.nearest_date_to(c),d&&a.calendar.setDate(d.toDate()),b()}}(this))},c.prototype.update_nights_list=function(){var a,b,c,d,e,f;return a=this.calendar.getMoment(),b=this.nights_cleanup(this.nights_set.find(a),null!=(d=this.config)&&null!=(e=d.search_params)?e.nights:void 0),c=this.select.nights.get(),f=this.nights_set.nearest_nights_to(c,b),this.select.nights.el.html(this.tpl("nights_list",b)),this.select.nights.set(f),String(f)!==String(c)?console.info("Nights count changed. We can handle it in some way"):void 0},c.prototype.create_class_list=function(){var a,b;return b=this.view_options(this.config.setup),a=[this.config.setup.theme,this.config.setup.type],a=a.concat(b).join(" "+d),""+d+a},c.prototype.view_options=function(a){return a=Object.select(a,p),Object.keys(a).reduce(function(b){return function(c,d){var e;return"single_line"===d?(e=a[d]?"single_line":"multi_line","horizontal"===b.config.setup.type&&c.push(e)):(e=a[d],e===!0&&c.push(d)),c}}(this),[])},c.prototype.elem=function(a){return this.root.find(a)},c.prototype.toggle_preloader=function(a){var b;switch(null==a&&(a=!1),b=this.elem(".lt_widget_preloader"),a){case!0:return b.show();case!1:return b.hide()}},c.prototype.submit_data=function(a){var b,c,d,e,f;return c=this.select.from.get().split("-"),b=null!=(d=this.destination.selected)?d:{},f="hotel"===b.type?"hotel":"search",e={from:this.get_value("departure"),to:this.get_value("destination"),start_date:this.get_value("start_date"),adults:this.get_value("adults"),nights:this.get_value("nights_count"),stars:this.get_value("stars"),kids:{count:this.get_value("kids_count"),ages:this.get_value("kids_ages")},params:this.config.setup.params},this.validate_params(e,f).then(function(a){return function(b){return a.create_url(e,f)}}(this),function(a){return function(b){return a.destroy_url(b)}}(this))["catch"](LTApi.Utils.ErrorHandler)},c.prototype.validate_params=function(a,b){return this.hide_errors(),this.promise(function(c){return function(c,d){var e;return e=null,"hotel"!==b&&(a.from&&a.from.country||null==e&&(e={msg:"errors.from",el:".location_departure"}),a.to&&a.to.country||null==e&&(e={msg:"errors.to",el:".location_arrival"})),a.nights||null==e&&(e={msg:"errors.nights",el:".nights_count"}),a.kids.count!==a.kids.ages.length&&null==e&&(e={msg:"errors.kids_ages",el:".kids_ages"}),null==e?c(a):d(e)}}(this),!1)},c.prototype.hide_errors=function(){return this.error_notifier.hide("input, .lt_selectbox")},c.prototype.show_error=function(a,b){return null==b&&(b=null),this.error_notifier.show(k(a),b)},c.prototype.create_search_url=function(){return this.submit_data().then(this.set_url.bind(this))},c.prototype.process_link=function(a){return this.redirect_allowed||(a.preventDefault(),a.stopPropagation()),setTimeout(this.destroy_url.bind(this),30)},c.prototype.create_url=function(a,b){var c,d;return this.redirect_allowed=!0,d=new LTApi.Utils.URLMaker(a),c=this.u.cfg("external_url"),"hotel"===b&&(c+=this.destination.selected.url),d.format(b,c)},c.prototype.destroy_url=function(a){return this.redirect_allowed=!1,this.u.is("object",a)&&this.show_error(a.msg,a.el),this.elem(".lt_search_widget_submit").attr("href","#")},c.prototype.set_url=function(a){return this.u.is("string",a)?(this.elem(".lt_search_widget_submit").attr({href:a,target:"_blank"}),this.run_enhancements("submit")):void 0},c.prototype.is_vertical=function(){return"vertical"===this.config.setup.type},c.prototype.is_horizontal=function(){return"horizontal"===this.config.setup.type},c.prototype.get_default_departure_city=function(a){var b,c;return b=null!=(c=this.location_detector)?c.get_saved_code():void 0,a=this.location_code((null!=a?a.city:void 0)||"Moscow",(null!=a?a.country:void 0)||"RU"),a||b},c.prototype.get_value=function(a){var b,c,d,e,f,g;switch(a){case"from":case"departure":return g=this.select.from.get().split("-"),c=g[0],e=g[1],{city:c,country:e};case"to":case"destination":return f=this.destination.selected,c=(null!=f?f.is_city:void 0)&&null!=f?f.name_en:void 0,e=null!=f?f.iso2:void 0,{city:c,country:e};case"start_date":case"date":return this.calendar.getMoment().format("DD.MM.YYYY");case"adults":case"adults_count":return Number(this.select.adults.get());case"nights":case"nights_count":return{from:Number(this.select.nights.get()),to:Number(this.select.nights.get())};case"stars":return{from:1,to:5};case"kids":case"kids_count":return Number(this.select.kids.get());case"kids_ages":return d=this.get_value("kids_count"),b=this.widget.find(".kid_age input").toArray(),this.u.compact(this.u.first(b,d).map(function(a){return a.value}),!0).map(Number)}},c.prototype.suppress_event=function(a){return a.preventDefault(),a.stopPropagation()},c.prototype.deprecate_all=function(){return this.deprecate("debug"),this.deprecate("session"),this.deprecate("setup.show_footer"),this.deprecate("setup.params.aflt")},c}(LTApi.Modules.WidgetBase),LTApi.WidgetB=LTApi.SearchWidget}.call(this),function(){var a=function(a,c){function d(){this.constructor=a}for(var e in c)b.call(c,e)&&(a[e]=c[e]);return d.prototype=c.prototype,a.prototype=new d,a.__super__=c.prototype,a},b={}.hasOwnProperty;LTApi.SubscribeWidget=function(b){function c(a){c.__super__.constructor.call(this,g,a,"subscribe_widget")}var d,e,f,g,h,i,j,k,l,m;return a(c,b),j=null,i=null,l=LTApi.VERSION,e=["locale","api_key"],d="lt_subscribe_",f="DD MMM YYYY г.",k=location.protocol,h={labels:{destination_to:"Страна, город",dto_placeholder:"Выберите место",departure_date:"Дата вылета",email:"Ваш e-mail"},errors:{country_to:"Где вы хотели бы отдохнуть?",date:"Проверьте дату",email:"Проверьте правильность почты"},popups:{success_label:"Вы успешно подписались",success_button:"подписаться на другие направления",error_label:"Ошибка при отправке",error_desc:"Пожалуйста, убедитесь, что все поля заполнены корректно"}},m={small:250,medium:350,large:600},g={language:"ru",setup:{place:"#lt_subscriber",theme:"default",width:400,params:{},calendar_lang:null},params:{departure:"Moscow",date:LTApi.moment().add({days:15}).toDate()},locale:{}},c.prototype.__widget_name="subscribe_widget",c.prototype.events_list=["ready:once:memory"],c.prototype.locale={ru:h},c.prototype.init=function(a,b){return j=a,i=LTApi.Utils.i18n_base.bind(this),this.nights=new LTApi.Utils.NightsLoader({client:this.client}),this.load_locales(h,b.locale),this.load_styles({themes_path:"/themes/subscribe_widget"},this.initialize)},c.prototype.initialize=function(){return this.render_widget(),this.initialize_form()},c.prototype.render_widget=function(){var a,b;if(this.widget=j(this.config.setup.place),this.widget.size())return a=this.config.setup,b=this.tpl("index",{i18n:this.locale[this.config.language]}).trim(),this.root=j(b),this.widget.html(this.root),this.resize_widget(),this.create_error_notifier(this.elem(".lt_subscribe_widget_body"));throw new Error("Can't find element "+this.config.setup.place);
},c.prototype.size_class=function(){var a,b;return b=this.root.width(),a=b<m.medium?"small":b<m.large?"medium":"large",d+a},c.prototype.resize_widget=function(){var a,b,c,e,f;return b=this.config.setup.width,f=d+"small",e=d+"medium",c=d+"large",b&&b>m.small&&this.root.outerWidth(b),a=this.root.hasClass(this.size_class()),a?void 0:this.root.removeClass(f).removeClass(e).removeClass(c).addClass(this.size_class())},c.prototype.initialize_form=function(){return this.u.promise.all([this.load_departures()]).then(function(a){return function(b){var c;return c=b[0],a.attach_autocomplete(".sform_country_to input"),a.attach_calendar(".sform_date input"),a.bind_events(),a.toggle_status("preloader",!1)}}(this))},c.prototype.attach_autocomplete=function(a){var b;return b=this.widget.find(a),this.destination=new LTApi.Utils.LocationAutocomplete(b,{min_query_length:0,client:this.client,visible_items_count:7,exclude:["hotel","city"],city_from:"Moscow"})},c.prototype.attach_calendar=function(a){var b,c,d,e,g;return b=this.u.parse_date(this.config.params.date||new Date,!0),c=this.config.setup.calendar_lang||"ltw_ru_light",e=LTApi.moment().startOf("day").add({days:1}),d=e.clone().add({months:9}).subtract({days:4}),null==this.is_flex&&(this.is_flex=!1),this.calendar=new LTApi.Utils.Pikaday({field:this.widget.find(a)[0],firstDay:1,format:null!=(g=this.config.setup.date_format)?g:f,minDate:e.toDate(),maxDate:d.toDate(),defaultDate:null!=b?b:e,setDefaultDate:!0,i18n:LTApi.Utils.I18N[c],customClass:"lt-searchform-picker",centered:!0,flexDates:!0,readOnly:!0,momentLang:c,container:"vertical"===this.config.setup.type?this.root.get(0):void 0}),this.calendar.config({onSelect:function(a){return function(){return a.render_calendar_attr()}}(this),onFlexChange:function(a){return function(){return a.is_flex=a.calendar.isFlex(),a.render_calendar_attr()}}(this)}),this.render_calendar_attr()},c.prototype.render_calendar_attr=function(){var a,b,c;return c=this.calendar.getDate(),b=this.elem(".sform_date"),a="flex-enabled",this.is_flex?b.addClass(a):b.removeClass(a)},c.prototype.bind_events=function(){return this.elem("input, select").on("mousedown",this.hide_errors.bind(this)),this.elem(".lt_calendar_toggler").on("mousedown",this.suppress_event),this.elem(".lt_calendar_toggler").on("click",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),a.calendar.isVisible()?(a.elem(".lt_calendar_connect").trigger("blur"),a.calendar.hide()):(a.elem(".lt_calendar_connect").trigger("focus"),a.calendar.show())}}(this)),this.elem("input, select").on("mousedown",this.hide_errors.bind(this)),this.elem(".lt_subscribe_btn").on("click",function(a){return function(b){return b.preventDefault(),b.stopPropagation(),a.submit_data()}}(this)),this.elem(".lt_subscribe_success_button").on("click",this.reset_form.bind(this)),this.destination.on("select",function(a){return function(b){return a.check_nights(b)}}(this))},c.prototype.elem=function(a){return this.root.find(a)},c.prototype.toggle_status=function(a,b){var c;switch(c=function(){switch(a){case"preloader":return this.elem(".lt_widget_preloader");case"success":return this.elem(".lt_subscribe_success");case"fail":return this.elem(".lt_subscribe_fail")}}.call(this),b){case!0:c.fadeIn();break;case!1:c.fadeOut()}return"fail"===a&&b===!0?setTimeout(function(a){return function(){return a.toggle_status("fail",!1)}}(this),1200):void 0},c.prototype.reset_form=function(){var a,b;return a=this.u.parse_date(this.config.params.date||new Date,!0),this.toggle_status("success",!1),this.elem(".sform_email input").val(""),null!=(b=this.calendar)&&b.setDate(a),this.destination.clear()},c.prototype.submit_data=function(a){var b,c,d,e;return b=null!=(c=this.destination.selected)?c:{},e="hotel"===b.type?"hotel":"search",d={country_to:this.get_value("country_to"),date:this.get_value("date"),email:this.get_value("email")},this.validate_params(d,e).then(function(a){return function(){return a.request_sender(d,e)}}(this),function(a){return function(b){return a.show_error(b)}}(this))},c.prototype.check_nights=function(a){return this.nights.load({city:this.config.params.departure,country:a.iso2}).then(function(a){return function(b){var c,d,e,f,g,h;return a.nights_data=b,c=null!=(e=a.calendar)?e.getDate():void 0,d=null!=(f=a.nights_data)?f.nearest_date_to(c):void 0,null!=(g=a.calendar)&&g.config({disabledDates:a.nights_data.disabled}),null!=(h=a.calendar)?h.setDate(d.toDate()):void 0}}(this))},c.prototype.validate_params=function(a,b){return this.hide_errors(),this.promise(function(b){return function(b,c){var d;return d=null,a.country_to||null==d&&(d="country_to"),a.date||null==d&&(d="date"),a.email||null==d&&(d="email"),null==d?b(a):c(d)}}(this),!1)},c.prototype.hide_errors=function(){return this.error_notifier.hide("input, .lt_selectbox")},c.prototype.show_error=function(a){var b;return b=this.elem(".sform_"+a),this.error_notifier.show(i("errors."+a),b)},c.prototype.request_sender=function(a,b){return this.client.call("subscription.daily",{departure:this.config.params.departure,country_to:a.country_to.iso2,email:a.email,start_date:a.date}).then(function(a){return function(b){return b.success===!0?a.toggle_status("success",!0):a.toggle_status("fail",!0)}}(this),function(a){return function(b){return console.log("Error happened"),a.toggle_status("fail",!0)}}(this))},c.prototype.process_link=function(a){return this.redirect_allowed||(a.preventDefault(),a.stopPropagation()),setTimeout(this.destroy_url.bind(this),30)},c.prototype.get_value=function(a){var b,c,d;switch(a){case"country_to":return null!=(c=this.destination.selected)?c:null;case"date":return this.calendar.getMoment().format("DD.MM.YYYY");case"email":return d=/^([a-zA-Z0-9_.+-])+\@(([a-zA-Z0-9-])+\.)+([a-zA-Z0-9]{2,4})+$/,b=this.elem("#email").val(),d.test(b)?b:null}},c.prototype.suppress_event=function(a){return a.preventDefault(),a.stopPropagation()},c}(LTApi.Modules.WidgetBase)}.call(this),function(){!function(){var a,b,c;return(null!=(c=this.LTApi)?c.initialized:void 0)?console.log("LTApi already exists %O",LTApi):(a=this.LTApi,b=new LevelTravelAPI,this.LTApi=a.Utils.merge(b,a)),delete this.LevelTravelAPI}(),null!=this.LTApiInit&&!function(){var a;a=window.LTApiInit;try{delete window.LTApiInit}catch(b){}return Object.keys(a).forEach(function(b){var c,d;return c=a[b],"conf"===b||"config"===b||"setup"===b?LTApi.setup(c):null!=(d=LTApi[b])?new d(c):void 0})}()}.call(this),function(){}.call(this);